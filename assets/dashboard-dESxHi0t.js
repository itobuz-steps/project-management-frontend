import"./main-DiITyB4b.js";import{c as he,d as $,b as B,s as hi,a as co}from"./setTheme-iN45NpD4.js";const uo=$.API_BASE_URL+"/project";class ho{api=he.create({baseURL:uo});constructor(){this.api.interceptors.request.use(function(e){const t=localStorage.getItem("access_token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},function(e){console.error(e)}),this.api.interceptors.response.use(e=>e,async e=>{const t=e.config;if(e.response&&e.response.status===401&&!t._retry){t._retry=!0;try{const r=await he.get($.API_BASE_URL+"/auth/refresh-token",{headers:{Authorization:"Bearer "+localStorage.getItem("refresh_token")}});if(r)return localStorage.setItem("access_token",r.data.accessToken),localStorage.setItem("refresh_token",r.data.refreshToken),t.headers.Authorization=`Bearer ${r.data.accessToken}`,this.api(t)}catch(r){console.error(r),localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),window.location.reload()}}return Promise.reject(e)})}async getAllProjects(){try{return(await this.api.get("/")).data}catch(e){throw new Error(e.response?.data?.message||"Failed to fetch projects")}}async getProjectById(e){try{return(await this.api.get(`/${e}`)).data}catch(t){throw new Error(t.response?.data?.message||"Failed to fetch project")}}async createProject(e){try{return(await this.api.post("/",e)).data}catch(t){throw new Error(t.response?.data?.message||"Failed to create project")}}async updateProject(e,t){try{return(await this.api.put(`/${e}`,t)).data}catch(r){throw new Error(r.response?.data?.message||"Failed to update project")}}async deleteProject(e){try{return(await this.api.delete(`/${e}`)).data}catch(t){throw new Error(t.response?.data?.message||"Failed to delete project")}}async getProjectMembers(e){try{return(await this.api.get(`/get-user/${e}`)).data}catch(t){throw new Error(t.response?.data?.message||"Failed to fetch project members")}}async getProjectsByUserId(){try{return(await this.api.get("/user-projects")).data}catch(e){throw new Error(e.response?.data?.message||"Failed to fetch user projects")}}}const q=new ho,fo=$.API_BASE_URL+"/sprint";class po{api=he.create({baseURL:fo});constructor(){this.api.interceptors.request.use(function(e){const t=localStorage.getItem("access_token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},function(e){console.error(e)}),this.api.interceptors.response.use(e=>e,async e=>{const t=e.config;if(e.response&&e.response.status===401&&!t._retry){t._retry=!0;try{const r=await he.get($.API_BASE_URL+"/auth/refresh-token",{headers:{Authorization:"Bearer "+localStorage.getItem("refresh_token")}});if(r)return localStorage.setItem("access_token",r.data.accessToken),localStorage.setItem("refresh_token",r.data.refreshToken),t.headers.Authorization=`Bearer ${r.data.accessToken}`,this.api(t)}catch(r){console.error(r),localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),window.location.reload()}}return Promise.reject(e)})}async getAllSprints(e=""){try{return(await this.api.get(`/?projectId=${e}`)).data}catch(t){throw new Error(t.response?.data?.message||"Failed to fetch sprints")}}async getSprintById(e){try{return(await this.api.get(`/${e}`)).data}catch(t){throw new Error(t.response?.data?.message||"Failed to fetch sprint")}}async createSprint(e){try{return(await this.api.post("/",e)).data}catch(t){throw new Error(t.response?.data?.message||"Failed to create sprint")}}async updateSprint(e,t){try{return(await this.api.put(`/${e}`,t)).data}catch(r){throw new Error(r.response?.data?.message||"Failed to update sprint")}}async addTasksToSprint(e,t){try{return(await this.api.patch(`/${e}/addTasks`,t)).data}catch(r){throw new Error(r.response?.data?.message||"Failed to update sprint")}}async removeTaskFromSprint(e,t){try{return(await this.api.patch(`/${e}/removeTasks`,t)).data}catch(r){throw new Error(r.response?.data?.message||"Failed to update sprint")}}async deleteSprint(e){try{return(await this.api.delete(`/${e}`)).data}catch(t){throw new Error(t.response?.data?.message||"Failed to delete sprint")}}}const le=new po,mo=$.API_BASE_URL+"/tasks";class go{api=he.create({baseURL:mo});constructor(){this.api.interceptors.request.use(function(e){const t=localStorage.getItem("access_token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},function(e){console.log(e)}),this.api.interceptors.response.use(e=>e,async e=>{const t=e.config;if(e.response&&e.response.status===401&&!t._retry){t._retry=!0;try{const r=await he.get($.API_BASE_URL+"/auth/refresh-token",{headers:{Authorization:"Bearer "+localStorage.getItem("refresh_token")}});if(r)return localStorage.setItem("access_token",r.data.accessToken),localStorage.setItem("refresh_token",r.data.refreshToken),t.headers.Authorization=`Bearer ${r.data.accessToken}`,this.api(t)}catch(r){console.log(r),localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),window.location.reload()}}return Promise.reject(e)})}async getAllTasks(){return await this.api.get("/")}async getAllUserTasks(){return await this.api.get("/me")}async getTaskById(e){return await this.api.get(`/${e}`)}async getUserDetailsById(e){return await this.api.get(`/user/${e}`)}async getTaskByProjectId(e,t,r){return await this.api.get(`/?projectId=${e}&filter=${t}&searchInput=${r}`)}async getMultipleUsers(e){try{return(await this.api.get(`/users/batch?ids=${e.join(",")}`)).data}catch(t){throw new Error(t.response?.data?.message||"Failed to fetch multiple users")}}async createTask(e){const t=new FormData;t.append("projectId",e.projectId),t.append("title",e.title),t.append("storyPoint",e.storyPoint),t.append("description",e.description),t.append("type",e.type),t.append("key",e.key),t.append("status",e.status),t.append("priority",e.priority),t.append("dueDate",e.dueDate),t.append("reporter",e.reporter),e.parentTask&&t.append("parentTask",e.parentTask),e.tags.forEach(r=>{t.append("tags[]",r)}),e.assignee&&t.append("assignee",e.assignee),e.attachments&&Array.from(e.attachments).forEach(r=>{t.append("attachments",r)});try{return await this.api.post("/",t)}catch(r){throw new Error(r.response?.data?.message||"Failed to create task")}}async updateTask(e,t){try{return await this.api.put(`/${e}`,t)}catch(r){throw new Error(r.response?.data?.message||"Failed to update task")}}async deleteTask(e){try{return await this.api.delete(`/${e}`)}catch(t){throw new Error(t.response?.data?.message||"Failed to delete task")}}async taskOfProjectId(e){return await this.api.get(`/projectId/${e}`)}}const S=new go;function un(n){n.innerHTML=""}function $n(n){[...n.parentElement.children].forEach(e=>{e.classList.remove("active")}),n.classList.toggle("active")}function Nn(n){[...n.parentElement.children].forEach(e=>{e.classList.add("hidden")}),n.classList.remove("hidden")}function vn(){document.querySelectorAll(".backlog table tbody").forEach(e=>{const t=e.dataset.id,r=document.querySelector(`.empty-message[data-id="${t}"]`);if(e.children.length>0){r.classList.add("hidden");return}r.classList.remove("hidden")})}function Y(n){n.classList.toggle("hidden")}function ss(n={}){const e=n.key?n.key:"backlog",t=document.getElementById(`dropdownButton-${e}`),r=document.querySelector(`.dropdown-menu-${e}`),s=document.querySelector(`#${e}-empty-message`);t.addEventListener("click",function(){r.classList.toggle("hidden")});const i=document.querySelector(`.dropdown-icon-${e}`);t.addEventListener("click",function(){i.classList.contains("rotate-270")?(i.classList.remove("rotate-270"),vn()):(i.classList.add("rotate-270"),s.classList.contains("hidden")||Y(s))})}function xn(){localStorage.getItem("selectedProject")&&document.getElementById("dashboardOptionsContainer").classList.remove("hidden")}function Cr(n){const e=document.getElementById("projectName");e.innerText=n.name}class Qe extends Error{}class yo extends Qe{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class wo extends Qe{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class ko extends Qe{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class it extends Qe{}class fi extends Qe{constructor(e){super(`Invalid unit ${e}`)}}class G extends Qe{}class $e extends Qe{constructor(){super("Zone is an abstract class")}}const m="numeric",xe="short",ne="long",dn={year:m,month:m,day:m},pi={year:m,month:xe,day:m},bo={year:m,month:xe,day:m,weekday:xe},mi={year:m,month:ne,day:m},gi={year:m,month:ne,day:m,weekday:ne},yi={hour:m,minute:m},wi={hour:m,minute:m,second:m},ki={hour:m,minute:m,second:m,timeZoneName:xe},bi={hour:m,minute:m,second:m,timeZoneName:ne},vi={hour:m,minute:m,hourCycle:"h23"},xi={hour:m,minute:m,second:m,hourCycle:"h23"},Si={hour:m,minute:m,second:m,hourCycle:"h23",timeZoneName:xe},Ei={hour:m,minute:m,second:m,hourCycle:"h23",timeZoneName:ne},Ti={year:m,month:m,day:m,hour:m,minute:m},Ci={year:m,month:m,day:m,hour:m,minute:m,second:m},Li={year:m,month:xe,day:m,hour:m,minute:m},Ii={year:m,month:xe,day:m,hour:m,minute:m,second:m},vo={year:m,month:xe,day:m,weekday:xe,hour:m,minute:m},_i={year:m,month:ne,day:m,hour:m,minute:m,timeZoneName:xe},Oi={year:m,month:ne,day:m,hour:m,minute:m,second:m,timeZoneName:xe},Mi={year:m,month:ne,day:m,weekday:ne,hour:m,minute:m,timeZoneName:ne},Bi={year:m,month:ne,day:m,weekday:ne,hour:m,minute:m,second:m,timeZoneName:ne};class $t{get type(){throw new $e}get name(){throw new $e}get ianaName(){return this.name}get isUniversal(){throw new $e}offsetName(e,t){throw new $e}formatOffset(e,t){throw new $e}offset(e){throw new $e}equals(e){throw new $e}get isValid(){throw new $e}}let Rn=null;class Sn extends $t{static get instance(){return Rn===null&&(Rn=new Sn),Rn}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:t,locale:r}){return Wi(e,t,r)}formatOffset(e,t){return _t(this.offset(e),t)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}}const tr=new Map;function xo(n){let e=tr.get(n);return e===void 0&&(e=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:n,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"}),tr.set(n,e)),e}const So={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function Eo(n,e){const t=n.format(e).replace(/\u200E/g,""),r=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(t),[,s,i,a,l,o,c,u]=r;return[a,s,i,l,o,c,u]}function To(n,e){const t=n.formatToParts(e),r=[];for(let s=0;s<t.length;s++){const{type:i,value:a}=t[s],l=So[i];i==="era"?r[l]=a:k(l)||(r[l]=parseInt(a,10))}return r}const Pn=new Map;class Be extends $t{static create(e){let t=Pn.get(e);return t===void 0&&Pn.set(e,t=new Be(e)),t}static resetCache(){Pn.clear(),tr.clear()}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=Be.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:t,locale:r}){return Wi(e,t,r,this.name)}formatOffset(e,t){return _t(this.offset(e),t)}offset(e){if(!this.valid)return NaN;const t=new Date(e);if(isNaN(t))return NaN;const r=xo(this.name);let[s,i,a,l,o,c,u]=r.formatToParts?To(r,t):Eo(r,t);l==="BC"&&(s=-Math.abs(s)+1);const h=Tn({year:s,month:i,day:a,hour:o===24?0:o,minute:c,second:u,millisecond:0});let f=+t;const p=f%1e3;return f-=p>=0?p:1e3+p,(h-f)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}}let is={};function Co(n,e={}){const t=JSON.stringify([n,e]);let r=is[t];return r||(r=new Intl.ListFormat(n,e),is[t]=r),r}const nr=new Map;function rr(n,e={}){const t=JSON.stringify([n,e]);let r=nr.get(t);return r===void 0&&(r=new Intl.DateTimeFormat(n,e),nr.set(t,r)),r}const sr=new Map;function Lo(n,e={}){const t=JSON.stringify([n,e]);let r=sr.get(t);return r===void 0&&(r=new Intl.NumberFormat(n,e),sr.set(t,r)),r}const ir=new Map;function Io(n,e={}){const{base:t,...r}=e,s=JSON.stringify([n,r]);let i=ir.get(s);return i===void 0&&(i=new Intl.RelativeTimeFormat(n,e),ir.set(s,i)),i}let St=null;function _o(){return St||(St=new Intl.DateTimeFormat().resolvedOptions().locale,St)}const ar=new Map;function Di(n){let e=ar.get(n);return e===void 0&&(e=new Intl.DateTimeFormat(n).resolvedOptions(),ar.set(n,e)),e}const or=new Map;function Oo(n){let e=or.get(n);if(!e){const t=new Intl.Locale(n);e="getWeekInfo"in t?t.getWeekInfo():t.weekInfo,"minimalDays"in e||(e={...Ai,...e}),or.set(n,e)}return e}function Mo(n){const e=n.indexOf("-x-");e!==-1&&(n=n.substring(0,e));const t=n.indexOf("-u-");if(t===-1)return[n];{let r,s;try{r=rr(n).resolvedOptions(),s=n}catch{const o=n.substring(0,t);r=rr(o).resolvedOptions(),s=o}const{numberingSystem:i,calendar:a}=r;return[s,i,a]}}function Bo(n,e,t){return(t||e)&&(n.includes("-u-")||(n+="-u"),t&&(n+=`-ca-${t}`),e&&(n+=`-nu-${e}`)),n}function Do(n){const e=[];for(let t=1;t<=12;t++){const r=y.utc(2009,t,1);e.push(n(r))}return e}function Ao(n){const e=[];for(let t=1;t<=7;t++){const r=y.utc(2016,11,13+t);e.push(n(r))}return e}function Ht(n,e,t,r){const s=n.listingMode();return s==="error"?null:s==="en"?t(e):r(e)}function $o(n){return n.numberingSystem&&n.numberingSystem!=="latn"?!1:n.numberingSystem==="latn"||!n.locale||n.locale.startsWith("en")||Di(n.locale).numberingSystem==="latn"}class No{constructor(e,t,r){this.padTo=r.padTo||0,this.floor=r.floor||!1;const{padTo:s,floor:i,...a}=r;if(!t||Object.keys(a).length>0){const l={useGrouping:!1,...r};r.padTo>0&&(l.minimumIntegerDigits=r.padTo),this.inf=Lo(e,l)}}format(e){if(this.inf){const t=this.floor?Math.floor(e):e;return this.inf.format(t)}else{const t=this.floor?Math.floor(e):Mr(e,3);return H(t,this.padTo)}}}class Ro{constructor(e,t,r){this.opts=r,this.originalZone=void 0;let s;if(this.opts.timeZone)this.dt=e;else if(e.zone.type==="fixed"){const a=-1*(e.offset/60),l=a>=0?`Etc/GMT+${a}`:`Etc/GMT${a}`;e.offset!==0&&Be.create(l).valid?(s=l,this.dt=e):(s="UTC",this.dt=e.offset===0?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else e.zone.type==="system"?this.dt=e:e.zone.type==="iana"?(this.dt=e,s=e.zone.name):(s="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const i={...this.opts};i.timeZone=i.timeZone||s,this.dtf=rr(t,i)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(t=>{if(t.type==="timeZoneName"){const r=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...t,value:r}}else return t}):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class Po{constructor(e,t,r){this.opts={style:"long",...r},!t&&Vi()&&(this.rtf=Io(e,r))}format(e,t){return this.rtf?this.rtf.format(e,t):al(t,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,t){return this.rtf?this.rtf.formatToParts(e,t):[]}}const Ai={firstDay:1,minimalDays:4,weekend:[6,7]};class D{static fromOpts(e){return D.create(e.locale,e.numberingSystem,e.outputCalendar,e.weekSettings,e.defaultToEN)}static create(e,t,r,s,i=!1){const a=e||j.defaultLocale,l=a||(i?"en-US":_o()),o=t||j.defaultNumberingSystem,c=r||j.defaultOutputCalendar,u=cr(s)||j.defaultWeekSettings;return new D(l,o,c,u,a)}static resetCache(){St=null,nr.clear(),sr.clear(),ir.clear(),ar.clear(),or.clear()}static fromObject({locale:e,numberingSystem:t,outputCalendar:r,weekSettings:s}={}){return D.create(e,t,r,s)}constructor(e,t,r,s,i){const[a,l,o]=Mo(e);this.locale=a,this.numberingSystem=t||l||null,this.outputCalendar=r||o||null,this.weekSettings=s,this.intl=Bo(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=i,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=$o(this)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),t=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&t?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:D.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,cr(e.weekSettings)||this.weekSettings,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,t=!1){return Ht(this,e,zi,()=>{const r=this.intl==="ja"||this.intl.startsWith("ja-");t&=!r;const s=t?{month:e,day:"numeric"}:{month:e},i=t?"format":"standalone";if(!this.monthsCache[i][e]){const a=r?l=>this.dtFormatter(l,s).format():l=>this.extract(l,s,"month");this.monthsCache[i][e]=Do(a)}return this.monthsCache[i][e]})}weekdays(e,t=!1){return Ht(this,e,Gi,()=>{const r=t?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},s=t?"format":"standalone";return this.weekdaysCache[s][e]||(this.weekdaysCache[s][e]=Ao(i=>this.extract(i,r,"weekday"))),this.weekdaysCache[s][e]})}meridiems(){return Ht(this,void 0,()=>Ji,()=>{if(!this.meridiemCache){const e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[y.utc(2016,11,13,9),y.utc(2016,11,13,19)].map(t=>this.extract(t,e,"dayperiod"))}return this.meridiemCache})}eras(e){return Ht(this,e,Qi,()=>{const t={era:e};return this.eraCache[e]||(this.eraCache[e]=[y.utc(-40,1,1),y.utc(2017,1,1)].map(r=>this.extract(r,t,"era"))),this.eraCache[e]})}extract(e,t,r){const s=this.dtFormatter(e,t),i=s.formatToParts(),a=i.find(l=>l.type.toLowerCase()===r);return a?a.value:null}numberFormatter(e={}){return new No(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,t={}){return new Ro(e,this.intl,t)}relFormatter(e={}){return new Po(this.intl,this.isEnglish(),e)}listFormatter(e={}){return Co(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||Di(this.intl).locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:ji()?Oo(this.locale):Ai}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let qn=null;class X extends $t{static get utcInstance(){return qn===null&&(qn=new X(0)),qn}static instance(e){return e===0?X.utcInstance:new X(e)}static parseSpecifier(e){if(e){const t=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(t)return new X(Cn(t[1],t[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${_t(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${_t(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,t){return _t(this.fixed,t)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}}class qo extends $t{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function Pe(n,e){if(k(n)||n===null)return e;if(n instanceof $t)return n;if(Uo(n)){const t=n.toLowerCase();return t==="default"?e:t==="local"||t==="system"?Sn.instance:t==="utc"||t==="gmt"?X.utcInstance:X.parseSpecifier(t)||Be.create(n)}else return qe(n)?X.instance(n):typeof n=="object"&&"offset"in n&&typeof n.offset=="function"?n:new qo(n)}const Lr={arab:"[٠-٩]",arabext:"[۰-۹]",bali:"[᭐-᭙]",beng:"[০-৯]",deva:"[०-९]",fullwide:"[０-９]",gujr:"[૦-૯]",hanidec:"[〇|一|二|三|四|五|六|七|八|九]",khmr:"[០-៩]",knda:"[೦-೯]",laoo:"[໐-໙]",limb:"[᥆-᥏]",mlym:"[൦-൯]",mong:"[᠐-᠙]",mymr:"[၀-၉]",orya:"[୦-୯]",tamldec:"[௦-௯]",telu:"[౦-౯]",thai:"[๐-๙]",tibt:"[༠-༩]",latn:"\\d"},as={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},Fo=Lr.hanidec.replace(/[\[|\]]/g,"").split("");function Vo(n){let e=parseInt(n,10);if(isNaN(e)){e="";for(let t=0;t<n.length;t++){const r=n.charCodeAt(t);if(n[t].search(Lr.hanidec)!==-1)e+=Fo.indexOf(n[t]);else for(const s in as){const[i,a]=as[s];r>=i&&r<=a&&(e+=r-i)}}return parseInt(e,10)}else return e}const lr=new Map;function jo(){lr.clear()}function pe({numberingSystem:n},e=""){const t=n||"latn";let r=lr.get(t);r===void 0&&(r=new Map,lr.set(t,r));let s=r.get(e);return s===void 0&&(s=new RegExp(`${Lr[t]}${e}`),r.set(e,s)),s}let os=()=>Date.now(),ls="system",cs=null,us=null,ds=null,hs=60,fs,ps=null;class j{static get now(){return os}static set now(e){os=e}static set defaultZone(e){ls=e}static get defaultZone(){return Pe(ls,Sn.instance)}static get defaultLocale(){return cs}static set defaultLocale(e){cs=e}static get defaultNumberingSystem(){return us}static set defaultNumberingSystem(e){us=e}static get defaultOutputCalendar(){return ds}static set defaultOutputCalendar(e){ds=e}static get defaultWeekSettings(){return ps}static set defaultWeekSettings(e){ps=cr(e)}static get twoDigitCutoffYear(){return hs}static set twoDigitCutoffYear(e){hs=e%100}static get throwOnInvalid(){return fs}static set throwOnInvalid(e){fs=e}static resetCaches(){D.resetCache(),Be.resetCache(),y.resetCache(),jo()}}class ke{constructor(e,t){this.reason=e,this.explanation=t}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const $i=[0,31,59,90,120,151,181,212,243,273,304,334],Ni=[0,31,60,91,121,152,182,213,244,274,305,335];function ce(n,e){return new ke("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${n}, which is invalid`)}function Ir(n,e,t){const r=new Date(Date.UTC(n,e-1,t));n<100&&n>=0&&r.setUTCFullYear(r.getUTCFullYear()-1900);const s=r.getUTCDay();return s===0?7:s}function Ri(n,e,t){return t+(Nt(n)?Ni:$i)[e-1]}function Pi(n,e){const t=Nt(n)?Ni:$i,r=t.findIndex(i=>i<e),s=e-t[r];return{month:r+1,day:s}}function _r(n,e){return(n-e+7)%7+1}function hn(n,e=4,t=1){const{year:r,month:s,day:i}=n,a=Ri(r,s,i),l=_r(Ir(r,s,i),t);let o=Math.floor((a-l+14-e)/7),c;return o<1?(c=r-1,o=Bt(c,e,t)):o>Bt(r,e,t)?(c=r+1,o=1):c=r,{weekYear:c,weekNumber:o,weekday:l,...Ln(n)}}function ms(n,e=4,t=1){const{weekYear:r,weekNumber:s,weekday:i}=n,a=_r(Ir(r,1,e),t),l=at(r);let o=s*7+i-a-7+e,c;o<1?(c=r-1,o+=at(c)):o>l?(c=r+1,o-=at(r)):c=r;const{month:u,day:d}=Pi(c,o);return{year:c,month:u,day:d,...Ln(n)}}function Fn(n){const{year:e,month:t,day:r}=n,s=Ri(e,t,r);return{year:e,ordinal:s,...Ln(n)}}function gs(n){const{year:e,ordinal:t}=n,{month:r,day:s}=Pi(e,t);return{year:e,month:r,day:s,...Ln(n)}}function ys(n,e){if(!k(n.localWeekday)||!k(n.localWeekNumber)||!k(n.localWeekYear)){if(!k(n.weekday)||!k(n.weekNumber)||!k(n.weekYear))throw new it("Cannot mix locale-based week fields with ISO-based week fields");return k(n.localWeekday)||(n.weekday=n.localWeekday),k(n.localWeekNumber)||(n.weekNumber=n.localWeekNumber),k(n.localWeekYear)||(n.weekYear=n.localWeekYear),delete n.localWeekday,delete n.localWeekNumber,delete n.localWeekYear,{minDaysInFirstWeek:e.getMinDaysInFirstWeek(),startOfWeek:e.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function Wo(n,e=4,t=1){const r=En(n.weekYear),s=ue(n.weekNumber,1,Bt(n.weekYear,e,t)),i=ue(n.weekday,1,7);return r?s?i?!1:ce("weekday",n.weekday):ce("week",n.weekNumber):ce("weekYear",n.weekYear)}function Ho(n){const e=En(n.year),t=ue(n.ordinal,1,at(n.year));return e?t?!1:ce("ordinal",n.ordinal):ce("year",n.year)}function qi(n){const e=En(n.year),t=ue(n.month,1,12),r=ue(n.day,1,fn(n.year,n.month));return e?t?r?!1:ce("day",n.day):ce("month",n.month):ce("year",n.year)}function Fi(n){const{hour:e,minute:t,second:r,millisecond:s}=n,i=ue(e,0,23)||e===24&&t===0&&r===0&&s===0,a=ue(t,0,59),l=ue(r,0,59),o=ue(s,0,999);return i?a?l?o?!1:ce("millisecond",s):ce("second",r):ce("minute",t):ce("hour",e)}function k(n){return typeof n>"u"}function qe(n){return typeof n=="number"}function En(n){return typeof n=="number"&&n%1===0}function Uo(n){return typeof n=="string"}function zo(n){return Object.prototype.toString.call(n)==="[object Date]"}function Vi(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function ji(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function Zo(n){return Array.isArray(n)?n:[n]}function ws(n,e,t){if(n.length!==0)return n.reduce((r,s)=>{const i=[e(s),s];return r&&t(r[0],i[0])===r[0]?r:i},null)[1]}function Yo(n,e){return e.reduce((t,r)=>(t[r]=n[r],t),{})}function lt(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function cr(n){if(n==null)return null;if(typeof n!="object")throw new G("Week settings must be an object");if(!ue(n.firstDay,1,7)||!ue(n.minimalDays,1,7)||!Array.isArray(n.weekend)||n.weekend.some(e=>!ue(e,1,7)))throw new G("Invalid week settings");return{firstDay:n.firstDay,minimalDays:n.minimalDays,weekend:Array.from(n.weekend)}}function ue(n,e,t){return En(n)&&n>=e&&n<=t}function Go(n,e){return n-e*Math.floor(n/e)}function H(n,e=2){const t=n<0;let r;return t?r="-"+(""+-n).padStart(e,"0"):r=(""+n).padStart(e,"0"),r}function Re(n){if(!(k(n)||n===null||n===""))return parseInt(n,10)}function We(n){if(!(k(n)||n===null||n===""))return parseFloat(n)}function Or(n){if(!(k(n)||n===null||n==="")){const e=parseFloat("0."+n)*1e3;return Math.floor(e)}}function Mr(n,e,t="round"){const r=10**e;switch(t){case"expand":return n>0?Math.ceil(n*r)/r:Math.floor(n*r)/r;case"trunc":return Math.trunc(n*r)/r;case"round":return Math.round(n*r)/r;case"floor":return Math.floor(n*r)/r;case"ceil":return Math.ceil(n*r)/r;default:throw new RangeError(`Value rounding ${t} is out of range`)}}function Nt(n){return n%4===0&&(n%100!==0||n%400===0)}function at(n){return Nt(n)?366:365}function fn(n,e){const t=Go(e-1,12)+1,r=n+(e-t)/12;return t===2?Nt(r)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][t-1]}function Tn(n){let e=Date.UTC(n.year,n.month-1,n.day,n.hour,n.minute,n.second,n.millisecond);return n.year<100&&n.year>=0&&(e=new Date(e),e.setUTCFullYear(n.year,n.month-1,n.day)),+e}function ks(n,e,t){return-_r(Ir(n,1,e),t)+e-1}function Bt(n,e=4,t=1){const r=ks(n,e,t),s=ks(n+1,e,t);return(at(n)-r+s)/7}function ur(n){return n>99?n:n>j.twoDigitCutoffYear?1900+n:2e3+n}function Wi(n,e,t,r=null){const s=new Date(n),i={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};r&&(i.timeZone=r);const a={timeZoneName:e,...i},l=new Intl.DateTimeFormat(t,a).formatToParts(s).find(o=>o.type.toLowerCase()==="timezonename");return l?l.value:null}function Cn(n,e){let t=parseInt(n,10);Number.isNaN(t)&&(t=0);const r=parseInt(e,10)||0,s=t<0||Object.is(t,-0)?-r:r;return t*60+s}function Hi(n){const e=Number(n);if(typeof n=="boolean"||n===""||!Number.isFinite(e))throw new G(`Invalid unit value ${n}`);return e}function pn(n,e){const t={};for(const r in n)if(lt(n,r)){const s=n[r];if(s==null)continue;t[e(r)]=Hi(s)}return t}function _t(n,e){const t=Math.trunc(Math.abs(n/60)),r=Math.trunc(Math.abs(n%60)),s=n>=0?"+":"-";switch(e){case"short":return`${s}${H(t,2)}:${H(r,2)}`;case"narrow":return`${s}${t}${r>0?`:${r}`:""}`;case"techie":return`${s}${H(t,2)}${H(r,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function Ln(n){return Yo(n,["hour","minute","second","millisecond"])}const Jo=["January","February","March","April","May","June","July","August","September","October","November","December"],Ui=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Qo=["J","F","M","A","M","J","J","A","S","O","N","D"];function zi(n){switch(n){case"narrow":return[...Qo];case"short":return[...Ui];case"long":return[...Jo];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const Zi=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],Yi=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],Xo=["M","T","W","T","F","S","S"];function Gi(n){switch(n){case"narrow":return[...Xo];case"short":return[...Yi];case"long":return[...Zi];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const Ji=["AM","PM"],Ko=["Before Christ","Anno Domini"],el=["BC","AD"],tl=["B","A"];function Qi(n){switch(n){case"narrow":return[...tl];case"short":return[...el];case"long":return[...Ko];default:return null}}function nl(n){return Ji[n.hour<12?0:1]}function rl(n,e){return Gi(e)[n.weekday-1]}function sl(n,e){return zi(e)[n.month-1]}function il(n,e){return Qi(e)[n.year<0?0:1]}function al(n,e,t="always",r=!1){const s={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},i=["hours","minutes","seconds"].indexOf(n)===-1;if(t==="auto"&&i){const d=n==="days";switch(e){case 1:return d?"tomorrow":`next ${s[n][0]}`;case-1:return d?"yesterday":`last ${s[n][0]}`;case 0:return d?"today":`this ${s[n][0]}`}}const a=Object.is(e,-0)||e<0,l=Math.abs(e),o=l===1,c=s[n],u=r?o?c[1]:c[2]||c[1]:o?s[n][0]:n;return a?`${l} ${u} ago`:`in ${l} ${u}`}function bs(n,e){let t="";for(const r of n)r.literal?t+=r.val:t+=e(r.val);return t}const ol={D:dn,DD:pi,DDD:mi,DDDD:gi,t:yi,tt:wi,ttt:ki,tttt:bi,T:vi,TT:xi,TTT:Si,TTTT:Ei,f:Ti,ff:Li,fff:_i,ffff:Mi,F:Ci,FF:Ii,FFF:Oi,FFFF:Bi};class J{static create(e,t={}){return new J(e,t)}static parseFormat(e){let t=null,r="",s=!1;const i=[];for(let a=0;a<e.length;a++){const l=e.charAt(a);l==="'"?((r.length>0||s)&&i.push({literal:s||/^\s+$/.test(r),val:r===""?"'":r}),t=null,r="",s=!s):s||l===t?r+=l:(r.length>0&&i.push({literal:/^\s+$/.test(r),val:r}),r=l,t=l)}return r.length>0&&i.push({literal:s||/^\s+$/.test(r),val:r}),i}static macroTokenToFormatOpts(e){return ol[e]}constructor(e,t){this.opts=t,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,t){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...t}).format()}dtFormatter(e,t={}){return this.loc.dtFormatter(e,{...this.opts,...t})}formatDateTime(e,t){return this.dtFormatter(e,t).format()}formatDateTimeParts(e,t){return this.dtFormatter(e,t).formatToParts()}formatInterval(e,t){return this.dtFormatter(e.start,t).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,t){return this.dtFormatter(e,t).resolvedOptions()}num(e,t=0,r=void 0){if(this.opts.forceSimple)return H(e,t);const s={...this.opts};return t>0&&(s.padTo=t),r&&(s.signDisplay=r),this.loc.numberFormatter(s).format(e)}formatDateTimeFromString(e,t){const r=this.loc.listingMode()==="en",s=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",i=(f,p)=>this.loc.extract(e,f,p),a=f=>e.isOffsetFixed&&e.offset===0&&f.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,f.format):"",l=()=>r?nl(e):i({hour:"numeric",hourCycle:"h12"},"dayperiod"),o=(f,p)=>r?sl(e,f):i(p?{month:f}:{month:f,day:"numeric"},"month"),c=(f,p)=>r?rl(e,f):i(p?{weekday:f}:{weekday:f,month:"long",day:"numeric"},"weekday"),u=f=>{const p=J.macroTokenToFormatOpts(f);return p?this.formatWithSystemDefault(e,p):f},d=f=>r?il(e,f):i({era:f},"era"),h=f=>{switch(f){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return a({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return a({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return a({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return l();case"d":return s?i({day:"numeric"},"day"):this.num(e.day);case"dd":return s?i({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return c("short",!0);case"cccc":return c("long",!0);case"ccccc":return c("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return c("short",!1);case"EEEE":return c("long",!1);case"EEEEE":return c("narrow",!1);case"L":return s?i({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return s?i({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return o("short",!0);case"LLLL":return o("long",!0);case"LLLLL":return o("narrow",!0);case"M":return s?i({month:"numeric"},"month"):this.num(e.month);case"MM":return s?i({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return o("short",!1);case"MMMM":return o("long",!1);case"MMMMM":return o("narrow",!1);case"y":return s?i({year:"numeric"},"year"):this.num(e.year);case"yy":return s?i({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return s?i({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return s?i({year:"numeric"},"year"):this.num(e.year,6);case"G":return d("short");case"GG":return d("long");case"GGGGG":return d("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"n":return this.num(e.localWeekNumber);case"nn":return this.num(e.localWeekNumber,2);case"ii":return this.num(e.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(e.localWeekYear,4);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return u(f)}};return bs(J.parseFormat(t),h)}formatDurationFromString(e,t){const r=this.opts.signMode==="negativeLargestOnly"?-1:1,s=u=>{switch(u[0]){case"S":return"milliseconds";case"s":return"seconds";case"m":return"minutes";case"h":return"hours";case"d":return"days";case"w":return"weeks";case"M":return"months";case"y":return"years";default:return null}},i=(u,d)=>h=>{const f=s(h);if(f){const p=d.isNegativeDuration&&f!==d.largestUnit?r:1;let b;return this.opts.signMode==="negativeLargestOnly"&&f!==d.largestUnit?b="never":this.opts.signMode==="all"?b="always":b="auto",this.num(u.get(f)*p,h.length,b)}else return h},a=J.parseFormat(t),l=a.reduce((u,{literal:d,val:h})=>d?u:u.concat(h),[]),o=e.shiftTo(...l.map(s).filter(u=>u)),c={isNegativeDuration:o<0,largestUnit:Object.keys(o.values)[0]};return bs(a,i(o,c))}}const Xi=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function ut(...n){const e=n.reduce((t,r)=>t+r.source,"");return RegExp(`^${e}$`)}function dt(...n){return e=>n.reduce(([t,r,s],i)=>{const[a,l,o]=i(e,s);return[{...t,...a},l||r,o]},[{},null,1]).slice(0,2)}function ht(n,...e){if(n==null)return[null,null];for(const[t,r]of e){const s=t.exec(n);if(s)return r(s)}return[null,null]}function Ki(...n){return(e,t)=>{const r={};let s;for(s=0;s<n.length;s++)r[n[s]]=Re(e[t+s]);return[r,null,t+s]}}const ea=/(?:([Zz])|([+-]\d\d)(?::?(\d\d))?)/,ll=`(?:${ea.source}?(?:\\[(${Xi.source})\\])?)?`,Br=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,ta=RegExp(`${Br.source}${ll}`),Dr=RegExp(`(?:[Tt]${ta.source})?`),cl=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,ul=/(\d{4})-?W(\d\d)(?:-?(\d))?/,dl=/(\d{4})-?(\d{3})/,hl=Ki("weekYear","weekNumber","weekDay"),fl=Ki("year","ordinal"),pl=/(\d{4})-(\d\d)-(\d\d)/,na=RegExp(`${Br.source} ?(?:${ea.source}|(${Xi.source}))?`),ml=RegExp(`(?: ${na.source})?`);function ot(n,e,t){const r=n[e];return k(r)?t:Re(r)}function gl(n,e){return[{year:ot(n,e),month:ot(n,e+1,1),day:ot(n,e+2,1)},null,e+3]}function ft(n,e){return[{hours:ot(n,e,0),minutes:ot(n,e+1,0),seconds:ot(n,e+2,0),milliseconds:Or(n[e+3])},null,e+4]}function Rt(n,e){const t=!n[e]&&!n[e+1],r=Cn(n[e+1],n[e+2]),s=t?null:X.instance(r);return[{},s,e+3]}function Pt(n,e){const t=n[e]?Be.create(n[e]):null;return[{},t,e+1]}const yl=RegExp(`^T?${Br.source}$`),wl=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function kl(n){const[e,t,r,s,i,a,l,o,c]=n,u=e[0]==="-",d=o&&o[0]==="-",h=(f,p=!1)=>f!==void 0&&(p||f&&u)?-f:f;return[{years:h(We(t)),months:h(We(r)),weeks:h(We(s)),days:h(We(i)),hours:h(We(a)),minutes:h(We(l)),seconds:h(We(o),o==="-0"),milliseconds:h(Or(c),d)}]}const bl={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Ar(n,e,t,r,s,i,a){const l={year:e.length===2?ur(Re(e)):Re(e),month:Ui.indexOf(t)+1,day:Re(r),hour:Re(s),minute:Re(i)};return a&&(l.second=Re(a)),n&&(l.weekday=n.length>3?Zi.indexOf(n)+1:Yi.indexOf(n)+1),l}const vl=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function xl(n){const[,e,t,r,s,i,a,l,o,c,u,d]=n,h=Ar(e,s,r,t,i,a,l);let f;return o?f=bl[o]:c?f=0:f=Cn(u,d),[h,new X(f)]}function Sl(n){return n.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const El=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,Tl=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,Cl=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function vs(n){const[,e,t,r,s,i,a,l]=n;return[Ar(e,s,r,t,i,a,l),X.utcInstance]}function Ll(n){const[,e,t,r,s,i,a,l]=n;return[Ar(e,l,t,r,s,i,a),X.utcInstance]}const Il=ut(cl,Dr),_l=ut(ul,Dr),Ol=ut(dl,Dr),Ml=ut(ta),ra=dt(gl,ft,Rt,Pt),Bl=dt(hl,ft,Rt,Pt),Dl=dt(fl,ft,Rt,Pt),Al=dt(ft,Rt,Pt);function $l(n){return ht(n,[Il,ra],[_l,Bl],[Ol,Dl],[Ml,Al])}function Nl(n){return ht(Sl(n),[vl,xl])}function Rl(n){return ht(n,[El,vs],[Tl,vs],[Cl,Ll])}function Pl(n){return ht(n,[wl,kl])}const ql=dt(ft);function Fl(n){return ht(n,[yl,ql])}const Vl=ut(pl,ml),jl=ut(na),Wl=dt(ft,Rt,Pt);function Hl(n){return ht(n,[Vl,ra],[jl,Wl])}const xs="Invalid Duration",sa={weeks:{days:7,hours:168,minutes:10080,seconds:10080*60,milliseconds:10080*60*1e3},days:{hours:24,minutes:1440,seconds:1440*60,milliseconds:1440*60*1e3},hours:{minutes:60,seconds:3600,milliseconds:3600*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},Ul={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:2184*60,seconds:2184*60*60,milliseconds:2184*60*60*1e3},months:{weeks:4,days:30,hours:720,minutes:720*60,seconds:720*60*60,milliseconds:720*60*60*1e3},...sa},ie=146097/400,et=146097/4800,zl={years:{quarters:4,months:12,weeks:ie/7,days:ie,hours:ie*24,minutes:ie*24*60,seconds:ie*24*60*60,milliseconds:ie*24*60*60*1e3},quarters:{months:3,weeks:ie/28,days:ie/4,hours:ie*24/4,minutes:ie*24*60/4,seconds:ie*24*60*60/4,milliseconds:ie*24*60*60*1e3/4},months:{weeks:et/7,days:et,hours:et*24,minutes:et*24*60,seconds:et*24*60*60,milliseconds:et*24*60*60*1e3},...sa},Ze=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],Zl=Ze.slice(0).reverse();function Le(n,e,t=!1){const r={values:t?e.values:{...n.values,...e.values||{}},loc:n.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||n.conversionAccuracy,matrix:e.matrix||n.matrix};return new C(r)}function ia(n,e){let t=e.milliseconds??0;for(const r of Zl.slice(1))e[r]&&(t+=e[r]*n[r].milliseconds);return t}function Ss(n,e){const t=ia(n,e)<0?-1:1;Ze.reduceRight((r,s)=>{if(k(e[s]))return r;if(r){const i=e[r]*t,a=n[s][r],l=Math.floor(i/a);e[s]+=l*t,e[r]-=l*a*t}return s},null),Ze.reduce((r,s)=>{if(k(e[s]))return r;if(r){const i=e[r]%1;e[r]-=i,e[s]+=i*n[r][s]}return s},null)}function Es(n){const e={};for(const[t,r]of Object.entries(n))r!==0&&(e[t]=r);return e}class C{constructor(e){const t=e.conversionAccuracy==="longterm"||!1;let r=t?zl:Ul;e.matrix&&(r=e.matrix),this.values=e.values,this.loc=e.loc||D.create(),this.conversionAccuracy=t?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=r,this.isLuxonDuration=!0}static fromMillis(e,t){return C.fromObject({milliseconds:e},t)}static fromObject(e,t={}){if(e==null||typeof e!="object")throw new G(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new C({values:pn(e,C.normalizeUnit),loc:D.fromObject(t),conversionAccuracy:t.conversionAccuracy,matrix:t.matrix})}static fromDurationLike(e){if(qe(e))return C.fromMillis(e);if(C.isDuration(e))return e;if(typeof e=="object")return C.fromObject(e);throw new G(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,t){const[r]=Pl(e);return r?C.fromObject(r,t):C.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,t){const[r]=Fl(e);return r?C.fromObject(r,t):C.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,t=null){if(!e)throw new G("need to specify a reason the Duration is invalid");const r=e instanceof ke?e:new ke(e,t);if(j.throwOnInvalid)throw new ko(r);return new C({invalid:r})}static normalizeUnit(e){const t={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!t)throw new fi(e);return t}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,t={}){const r={...t,floor:t.round!==!1&&t.floor!==!1};return this.isValid?J.create(this.loc,r).formatDurationFromString(this,e):xs}toHuman(e={}){if(!this.isValid)return xs;const t=e.showZeros!==!1,r=Ze.map(s=>{const i=this.values[s];return k(i)||i===0&&!t?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:s.slice(0,-1)}).format(i)}).filter(s=>s);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(r)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=Mr(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const t=this.toMillis();return t<0||t>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},y.fromMillis(t,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?ia(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const t=C.fromDurationLike(e),r={};for(const s of Ze)(lt(t.values,s)||lt(this.values,s))&&(r[s]=t.get(s)+this.get(s));return Le(this,{values:r},!0)}minus(e){if(!this.isValid)return this;const t=C.fromDurationLike(e);return this.plus(t.negate())}mapUnits(e){if(!this.isValid)return this;const t={};for(const r of Object.keys(this.values))t[r]=Hi(e(this.values[r],r));return Le(this,{values:t},!0)}get(e){return this[C.normalizeUnit(e)]}set(e){if(!this.isValid)return this;const t={...this.values,...pn(e,C.normalizeUnit)};return Le(this,{values:t})}reconfigure({locale:e,numberingSystem:t,conversionAccuracy:r,matrix:s}={}){const a={loc:this.loc.clone({locale:e,numberingSystem:t}),matrix:s,conversionAccuracy:r};return Le(this,a)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return Ss(this.matrix,e),Le(this,{values:e},!0)}rescale(){if(!this.isValid)return this;const e=Es(this.normalize().shiftToAll().toObject());return Le(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(a=>C.normalizeUnit(a));const t={},r={},s=this.toObject();let i;for(const a of Ze)if(e.indexOf(a)>=0){i=a;let l=0;for(const c in r)l+=this.matrix[c][a]*r[c],r[c]=0;qe(s[a])&&(l+=s[a]);const o=Math.trunc(l);t[a]=o,r[a]=(l*1e3-o*1e3)/1e3}else qe(s[a])&&(r[a]=s[a]);for(const a in r)r[a]!==0&&(t[i]+=a===i?r[a]:r[a]/this.matrix[i][a]);return Ss(this.matrix,t),Le(this,{values:t},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const t of Object.keys(this.values))e[t]=this.values[t]===0?0:-this.values[t];return Le(this,{values:e},!0)}removeZeros(){if(!this.isValid)return this;const e=Es(this.values);return Le(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function t(r,s){return r===void 0||r===0?s===void 0||s===0:r===s}for(const r of Ze)if(!t(this.values[r],e.values[r]))return!1;return!0}}const tt="Invalid Interval";function Yl(n,e){return!n||!n.isValid?V.invalid("missing or invalid start"):!e||!e.isValid?V.invalid("missing or invalid end"):e<n?V.invalid("end before start",`The end of an interval must be after its start, but you had start=${n.toISO()} and end=${e.toISO()}`):null}class V{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,t=null){if(!e)throw new G("need to specify a reason the Interval is invalid");const r=e instanceof ke?e:new ke(e,t);if(j.throwOnInvalid)throw new wo(r);return new V({invalid:r})}static fromDateTimes(e,t){const r=yt(e),s=yt(t),i=Yl(r,s);return i??new V({start:r,end:s})}static after(e,t){const r=C.fromDurationLike(t),s=yt(e);return V.fromDateTimes(s,s.plus(r))}static before(e,t){const r=C.fromDurationLike(t),s=yt(e);return V.fromDateTimes(s.minus(r),s)}static fromISO(e,t){const[r,s]=(e||"").split("/",2);if(r&&s){let i,a;try{i=y.fromISO(r,t),a=i.isValid}catch{a=!1}let l,o;try{l=y.fromISO(s,t),o=l.isValid}catch{o=!1}if(a&&o)return V.fromDateTimes(i,l);if(a){const c=C.fromISO(s,t);if(c.isValid)return V.after(i,c)}else if(o){const c=C.fromISO(r,t);if(c.isValid)return V.before(l,c)}}return V.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get lastDateTime(){return this.isValid&&this.e?this.e.minus(1):null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds",t){if(!this.isValid)return NaN;const r=this.start.startOf(e,t);let s;return t?.useLocaleWeeks?s=this.end.reconfigure({locale:r.locale}):s=this.end,s=s.startOf(e,t),Math.floor(s.diff(r,e).get(e))+(s.valueOf()!==this.end.valueOf())}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:t}={}){return this.isValid?V.fromDateTimes(e||this.s,t||this.e):this}splitAt(...e){if(!this.isValid)return[];const t=e.map(yt).filter(a=>this.contains(a)).sort((a,l)=>a.toMillis()-l.toMillis()),r=[];let{s}=this,i=0;for(;s<this.e;){const a=t[i]||this.e,l=+a>+this.e?this.e:a;r.push(V.fromDateTimes(s,l)),s=l,i+=1}return r}splitBy(e){const t=C.fromDurationLike(e);if(!this.isValid||!t.isValid||t.as("milliseconds")===0)return[];let{s:r}=this,s=1,i;const a=[];for(;r<this.e;){const l=this.start.plus(t.mapUnits(o=>o*s));i=+l>+this.e?this.e:l,a.push(V.fromDateTimes(r,i)),r=i,s+=1}return a}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;const t=this.s>e.s?this.s:e.s,r=this.e<e.e?this.e:e.e;return t>=r?null:V.fromDateTimes(t,r)}union(e){if(!this.isValid)return this;const t=this.s<e.s?this.s:e.s,r=this.e>e.e?this.e:e.e;return V.fromDateTimes(t,r)}static merge(e){const[t,r]=e.sort((s,i)=>s.s-i.s).reduce(([s,i],a)=>i?i.overlaps(a)||i.abutsStart(a)?[s,i.union(a)]:[s.concat([i]),a]:[s,a],[[],null]);return r&&t.push(r),t}static xor(e){let t=null,r=0;const s=[],i=e.map(o=>[{time:o.s,type:"s"},{time:o.e,type:"e"}]),a=Array.prototype.concat(...i),l=a.sort((o,c)=>o.time-c.time);for(const o of l)r+=o.type==="s"?1:-1,r===1?t=o.time:(t&&+t!=+o.time&&s.push(V.fromDateTimes(t,o.time)),t=null);return V.merge(s)}difference(...e){return V.xor([this].concat(e)).map(t=>this.intersection(t)).filter(t=>t&&!t.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} – ${this.e.toISO()})`:tt}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(e=dn,t={}){return this.isValid?J.create(this.s.loc.clone(t),e).formatInterval(this):tt}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:tt}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:tt}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:tt}toFormat(e,{separator:t=" – "}={}){return this.isValid?`${this.s.toFormat(e)}${t}${this.e.toFormat(e)}`:tt}toDuration(e,t){return this.isValid?this.e.diff(this.s,e,t):C.invalid(this.invalidReason)}mapEndpoints(e){return V.fromDateTimes(e(this.s),e(this.e))}}class Ut{static hasDST(e=j.defaultZone){const t=y.now().setZone(e).set({month:12});return!e.isUniversal&&t.offset!==t.set({month:6}).offset}static isValidIANAZone(e){return Be.isValidZone(e)}static normalizeZone(e){return Pe(e,j.defaultZone)}static getStartOfWeek({locale:e=null,locObj:t=null}={}){return(t||D.create(e)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:e=null,locObj:t=null}={}){return(t||D.create(e)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:e=null,locObj:t=null}={}){return(t||D.create(e)).getWeekendDays().slice()}static months(e="long",{locale:t=null,numberingSystem:r=null,locObj:s=null,outputCalendar:i="gregory"}={}){return(s||D.create(t,r,i)).months(e)}static monthsFormat(e="long",{locale:t=null,numberingSystem:r=null,locObj:s=null,outputCalendar:i="gregory"}={}){return(s||D.create(t,r,i)).months(e,!0)}static weekdays(e="long",{locale:t=null,numberingSystem:r=null,locObj:s=null}={}){return(s||D.create(t,r,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:t=null,numberingSystem:r=null,locObj:s=null}={}){return(s||D.create(t,r,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return D.create(e).meridiems()}static eras(e="short",{locale:t=null}={}){return D.create(t,null,"gregory").eras(e)}static features(){return{relative:Vi(),localeWeek:ji()}}}function Ts(n,e){const t=s=>s.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),r=t(e)-t(n);return Math.floor(C.fromMillis(r).as("days"))}function Gl(n,e,t){const r=[["years",(o,c)=>c.year-o.year],["quarters",(o,c)=>c.quarter-o.quarter+(c.year-o.year)*4],["months",(o,c)=>c.month-o.month+(c.year-o.year)*12],["weeks",(o,c)=>{const u=Ts(o,c);return(u-u%7)/7}],["days",Ts]],s={},i=n;let a,l;for(const[o,c]of r)t.indexOf(o)>=0&&(a=o,s[o]=c(n,e),l=i.plus(s),l>e?(s[o]--,n=i.plus(s),n>e&&(l=n,s[o]--,n=i.plus(s))):n=l);return[n,s,l,a]}function Jl(n,e,t,r){let[s,i,a,l]=Gl(n,e,t);const o=e-s,c=t.filter(d=>["hours","minutes","seconds","milliseconds"].indexOf(d)>=0);c.length===0&&(a<e&&(a=s.plus({[l]:1})),a!==s&&(i[l]=(i[l]||0)+o/(a-s)));const u=C.fromObject(i,r);return c.length>0?C.fromMillis(o,r).shiftTo(...c).plus(u):u}const Ql="missing Intl.DateTimeFormat.formatToParts support";function M(n,e=t=>t){return{regex:n,deser:([t])=>e(Vo(t))}}const Xl=" ",aa=`[ ${Xl}]`,oa=new RegExp(aa,"g");function Kl(n){return n.replace(/\./g,"\\.?").replace(oa,aa)}function Cs(n){return n.replace(/\./g,"").replace(oa," ").toLowerCase()}function me(n,e){return n===null?null:{regex:RegExp(n.map(Kl).join("|")),deser:([t])=>n.findIndex(r=>Cs(t)===Cs(r))+e}}function Ls(n,e){return{regex:n,deser:([,t,r])=>Cn(t,r),groups:e}}function zt(n){return{regex:n,deser:([e])=>e}}function ec(n){return n.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function tc(n,e){const t=pe(e),r=pe(e,"{2}"),s=pe(e,"{3}"),i=pe(e,"{4}"),a=pe(e,"{6}"),l=pe(e,"{1,2}"),o=pe(e,"{1,3}"),c=pe(e,"{1,6}"),u=pe(e,"{1,9}"),d=pe(e,"{2,4}"),h=pe(e,"{4,6}"),f=v=>({regex:RegExp(ec(v.val)),deser:([E])=>E,literal:!0}),b=(v=>{if(n.literal)return f(v);switch(v.val){case"G":return me(e.eras("short"),0);case"GG":return me(e.eras("long"),0);case"y":return M(c);case"yy":return M(d,ur);case"yyyy":return M(i);case"yyyyy":return M(h);case"yyyyyy":return M(a);case"M":return M(l);case"MM":return M(r);case"MMM":return me(e.months("short",!0),1);case"MMMM":return me(e.months("long",!0),1);case"L":return M(l);case"LL":return M(r);case"LLL":return me(e.months("short",!1),1);case"LLLL":return me(e.months("long",!1),1);case"d":return M(l);case"dd":return M(r);case"o":return M(o);case"ooo":return M(s);case"HH":return M(r);case"H":return M(l);case"hh":return M(r);case"h":return M(l);case"mm":return M(r);case"m":return M(l);case"q":return M(l);case"qq":return M(r);case"s":return M(l);case"ss":return M(r);case"S":return M(o);case"SSS":return M(s);case"u":return zt(u);case"uu":return zt(l);case"uuu":return M(t);case"a":return me(e.meridiems(),0);case"kkkk":return M(i);case"kk":return M(d,ur);case"W":return M(l);case"WW":return M(r);case"E":case"c":return M(t);case"EEE":return me(e.weekdays("short",!1),1);case"EEEE":return me(e.weekdays("long",!1),1);case"ccc":return me(e.weekdays("short",!0),1);case"cccc":return me(e.weekdays("long",!0),1);case"Z":case"ZZ":return Ls(new RegExp(`([+-]${l.source})(?::(${r.source}))?`),2);case"ZZZ":return Ls(new RegExp(`([+-]${l.source})(${r.source})?`),2);case"z":return zt(/[a-z_+-/]{1,256}?/i);case" ":return zt(/[^\S\n\r]/);default:return f(v)}})(n)||{invalidReason:Ql};return b.token=n,b}const nc={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function rc(n,e,t){const{type:r,value:s}=n;if(r==="literal"){const o=/^\s+$/.test(s);return{literal:!o,val:o?" ":s}}const i=e[r];let a=r;r==="hour"&&(e.hour12!=null?a=e.hour12?"hour12":"hour24":e.hourCycle!=null?e.hourCycle==="h11"||e.hourCycle==="h12"?a="hour12":a="hour24":a=t.hour12?"hour12":"hour24");let l=nc[a];if(typeof l=="object"&&(l=l[i]),l)return{literal:!1,val:l}}function sc(n){return[`^${n.map(t=>t.regex).reduce((t,r)=>`${t}(${r.source})`,"")}$`,n]}function ic(n,e,t){const r=n.match(e);if(r){const s={};let i=1;for(const a in t)if(lt(t,a)){const l=t[a],o=l.groups?l.groups+1:1;!l.literal&&l.token&&(s[l.token.val[0]]=l.deser(r.slice(i,i+o))),i+=o}return[r,s]}else return[r,{}]}function ac(n){const e=i=>{switch(i){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let t=null,r;return k(n.z)||(t=Be.create(n.z)),k(n.Z)||(t||(t=new X(n.Z)),r=n.Z),k(n.q)||(n.M=(n.q-1)*3+1),k(n.h)||(n.h<12&&n.a===1?n.h+=12:n.h===12&&n.a===0&&(n.h=0)),n.G===0&&n.y&&(n.y=-n.y),k(n.u)||(n.S=Or(n.u)),[Object.keys(n).reduce((i,a)=>{const l=e(a);return l&&(i[l]=n[a]),i},{}),t,r]}let Vn=null;function oc(){return Vn||(Vn=y.fromMillis(1555555555555)),Vn}function lc(n,e){if(n.literal)return n;const t=J.macroTokenToFormatOpts(n.val),r=da(t,e);return r==null||r.includes(void 0)?n:r}function la(n,e){return Array.prototype.concat(...n.map(t=>lc(t,e)))}class ca{constructor(e,t){if(this.locale=e,this.format=t,this.tokens=la(J.parseFormat(t),e),this.units=this.tokens.map(r=>tc(r,e)),this.disqualifyingUnit=this.units.find(r=>r.invalidReason),!this.disqualifyingUnit){const[r,s]=sc(this.units);this.regex=RegExp(r,"i"),this.handlers=s}}explainFromTokens(e){if(this.isValid){const[t,r]=ic(e,this.regex,this.handlers),[s,i,a]=r?ac(r):[null,null,void 0];if(lt(r,"a")&&lt(r,"H"))throw new it("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:this.tokens,regex:this.regex,rawMatches:t,matches:r,result:s,zone:i,specificOffset:a}}else return{input:e,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function ua(n,e,t){return new ca(n,t).explainFromTokens(e)}function cc(n,e,t){const{result:r,zone:s,specificOffset:i,invalidReason:a}=ua(n,e,t);return[r,s,i,a]}function da(n,e){if(!n)return null;const r=J.create(e,n).dtFormatter(oc()),s=r.formatToParts(),i=r.resolvedOptions();return s.map(a=>rc(a,n,i))}const jn="Invalid DateTime",Is=864e13;function Et(n){return new ke("unsupported zone",`the zone "${n.name}" is not supported`)}function Wn(n){return n.weekData===null&&(n.weekData=hn(n.c)),n.weekData}function Hn(n){return n.localWeekData===null&&(n.localWeekData=hn(n.c,n.loc.getMinDaysInFirstWeek(),n.loc.getStartOfWeek())),n.localWeekData}function He(n,e){const t={ts:n.ts,zone:n.zone,c:n.c,o:n.o,loc:n.loc,invalid:n.invalid};return new y({...t,...e,old:t})}function ha(n,e,t){let r=n-e*60*1e3;const s=t.offset(r);if(e===s)return[r,e];r-=(s-e)*60*1e3;const i=t.offset(r);return s===i?[r,s]:[n-Math.min(s,i)*60*1e3,Math.max(s,i)]}function Zt(n,e){n+=e*60*1e3;const t=new Date(n);return{year:t.getUTCFullYear(),month:t.getUTCMonth()+1,day:t.getUTCDate(),hour:t.getUTCHours(),minute:t.getUTCMinutes(),second:t.getUTCSeconds(),millisecond:t.getUTCMilliseconds()}}function en(n,e,t){return ha(Tn(n),e,t)}function _s(n,e){const t=n.o,r=n.c.year+Math.trunc(e.years),s=n.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,i={...n.c,year:r,month:s,day:Math.min(n.c.day,fn(r,s))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},a=C.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),l=Tn(i);let[o,c]=ha(l,t,n.zone);return a!==0&&(o+=a,c=n.zone.offset(o)),{ts:o,o:c}}function nt(n,e,t,r,s,i){const{setZone:a,zone:l}=t;if(n&&Object.keys(n).length!==0||e){const o=e||l,c=y.fromObject(n,{...t,zone:o,specificOffset:i});return a?c:c.setZone(l)}else return y.invalid(new ke("unparsable",`the input "${s}" can't be parsed as ${r}`))}function Yt(n,e,t=!0){return n.isValid?J.create(D.create("en-US"),{allowZ:t,forceSimple:!0}).formatDateTimeFromString(n,e):null}function Un(n,e,t){const r=n.c.year>9999||n.c.year<0;let s="";if(r&&n.c.year>=0&&(s+="+"),s+=H(n.c.year,r?6:4),t==="year")return s;if(e){if(s+="-",s+=H(n.c.month),t==="month")return s;s+="-"}else if(s+=H(n.c.month),t==="month")return s;return s+=H(n.c.day),s}function Os(n,e,t,r,s,i,a){let l=!t||n.c.millisecond!==0||n.c.second!==0,o="";switch(a){case"day":case"month":case"year":break;default:if(o+=H(n.c.hour),a==="hour")break;if(e){if(o+=":",o+=H(n.c.minute),a==="minute")break;l&&(o+=":",o+=H(n.c.second))}else{if(o+=H(n.c.minute),a==="minute")break;l&&(o+=H(n.c.second))}if(a==="second")break;l&&(!r||n.c.millisecond!==0)&&(o+=".",o+=H(n.c.millisecond,3))}return s&&(n.isOffsetFixed&&n.offset===0&&!i?o+="Z":n.o<0?(o+="-",o+=H(Math.trunc(-n.o/60)),o+=":",o+=H(Math.trunc(-n.o%60))):(o+="+",o+=H(Math.trunc(n.o/60)),o+=":",o+=H(Math.trunc(n.o%60)))),i&&(o+="["+n.zone.ianaName+"]"),o}const fa={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},uc={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},dc={ordinal:1,hour:0,minute:0,second:0,millisecond:0},tn=["year","month","day","hour","minute","second","millisecond"],hc=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],fc=["year","ordinal","hour","minute","second","millisecond"];function nn(n){const e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[n.toLowerCase()];if(!e)throw new fi(n);return e}function Ms(n){switch(n.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return nn(n)}}function pc(n){if(Tt===void 0&&(Tt=j.now()),n.type!=="iana")return n.offset(Tt);const e=n.name;let t=dr.get(e);return t===void 0&&(t=n.offset(Tt),dr.set(e,t)),t}function Bs(n,e){const t=Pe(e.zone,j.defaultZone);if(!t.isValid)return y.invalid(Et(t));const r=D.fromObject(e);let s,i;if(k(n.year))s=j.now();else{for(const o of tn)k(n[o])&&(n[o]=fa[o]);const a=qi(n)||Fi(n);if(a)return y.invalid(a);const l=pc(t);[s,i]=en(n,l,t)}return new y({ts:s,zone:t,loc:r,o:i})}function Ds(n,e,t){const r=k(t.round)?!0:t.round,s=k(t.rounding)?"trunc":t.rounding,i=(l,o)=>(l=Mr(l,r||t.calendary?0:2,t.calendary?"round":s),e.loc.clone(t).relFormatter(t).format(l,o)),a=l=>t.calendary?e.hasSame(n,l)?0:e.startOf(l).diff(n.startOf(l),l).get(l):e.diff(n,l).get(l);if(t.unit)return i(a(t.unit),t.unit);for(const l of t.units){const o=a(l);if(Math.abs(o)>=1)return i(o,l)}return i(n>e?-0:0,t.units[t.units.length-1])}function As(n){let e={},t;return n.length>0&&typeof n[n.length-1]=="object"?(e=n[n.length-1],t=Array.from(n).slice(0,n.length-1)):t=Array.from(n),[e,t]}let Tt;const dr=new Map;class y{constructor(e){const t=e.zone||j.defaultZone;let r=e.invalid||(Number.isNaN(e.ts)?new ke("invalid input"):null)||(t.isValid?null:Et(t));this.ts=k(e.ts)?j.now():e.ts;let s=null,i=null;if(!r)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(t))[s,i]=[e.old.c,e.old.o];else{const l=qe(e.o)&&!e.old?e.o:t.offset(this.ts);s=Zt(this.ts,l),r=Number.isNaN(s.year)?new ke("invalid input"):null,s=r?null:s,i=r?null:l}this._zone=t,this.loc=e.loc||D.create(),this.invalid=r,this.weekData=null,this.localWeekData=null,this.c=s,this.o=i,this.isLuxonDateTime=!0}static now(){return new y({})}static local(){const[e,t]=As(arguments),[r,s,i,a,l,o,c]=t;return Bs({year:r,month:s,day:i,hour:a,minute:l,second:o,millisecond:c},e)}static utc(){const[e,t]=As(arguments),[r,s,i,a,l,o,c]=t;return e.zone=X.utcInstance,Bs({year:r,month:s,day:i,hour:a,minute:l,second:o,millisecond:c},e)}static fromJSDate(e,t={}){const r=zo(e)?e.valueOf():NaN;if(Number.isNaN(r))return y.invalid("invalid input");const s=Pe(t.zone,j.defaultZone);return s.isValid?new y({ts:r,zone:s,loc:D.fromObject(t)}):y.invalid(Et(s))}static fromMillis(e,t={}){if(qe(e))return e<-Is||e>Is?y.invalid("Timestamp out of range"):new y({ts:e,zone:Pe(t.zone,j.defaultZone),loc:D.fromObject(t)});throw new G(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,t={}){if(qe(e))return new y({ts:e*1e3,zone:Pe(t.zone,j.defaultZone),loc:D.fromObject(t)});throw new G("fromSeconds requires a numerical input")}static fromObject(e,t={}){e=e||{};const r=Pe(t.zone,j.defaultZone);if(!r.isValid)return y.invalid(Et(r));const s=D.fromObject(t),i=pn(e,Ms),{minDaysInFirstWeek:a,startOfWeek:l}=ys(i,s),o=j.now(),c=k(t.specificOffset)?r.offset(o):t.specificOffset,u=!k(i.ordinal),d=!k(i.year),h=!k(i.month)||!k(i.day),f=d||h,p=i.weekYear||i.weekNumber;if((f||u)&&p)throw new it("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(h&&u)throw new it("Can't mix ordinal dates with month/day");const b=p||i.weekday&&!f;let v,E,w=Zt(o,c);b?(v=hc,E=uc,w=hn(w,a,l)):u?(v=fc,E=dc,w=Fn(w)):(v=tn,E=fa);let z=!1;for(const g of v){const F=i[g];k(F)?z?i[g]=E[g]:i[g]=w[g]:z=!0}const Z=b?Wo(i,a,l):u?Ho(i):qi(i),N=Z||Fi(i);if(N)return y.invalid(N);const ee=b?ms(i,a,l):u?gs(i):i,[fe,_]=en(ee,c,r),te=new y({ts:fe,zone:r,o:_,loc:s});return i.weekday&&f&&e.weekday!==te.weekday?y.invalid("mismatched weekday",`you can't specify both a weekday of ${i.weekday} and a date of ${te.toISO()}`):te.isValid?te:y.invalid(te.invalid)}static fromISO(e,t={}){const[r,s]=$l(e);return nt(r,s,t,"ISO 8601",e)}static fromRFC2822(e,t={}){const[r,s]=Nl(e);return nt(r,s,t,"RFC 2822",e)}static fromHTTP(e,t={}){const[r,s]=Rl(e);return nt(r,s,t,"HTTP",t)}static fromFormat(e,t,r={}){if(k(e)||k(t))throw new G("fromFormat requires an input string and a format");const{locale:s=null,numberingSystem:i=null}=r,a=D.fromOpts({locale:s,numberingSystem:i,defaultToEN:!0}),[l,o,c,u]=cc(a,e,t);return u?y.invalid(u):nt(l,o,r,`format ${t}`,e,c)}static fromString(e,t,r={}){return y.fromFormat(e,t,r)}static fromSQL(e,t={}){const[r,s]=Hl(e);return nt(r,s,t,"SQL",e)}static invalid(e,t=null){if(!e)throw new G("need to specify a reason the DateTime is invalid");const r=e instanceof ke?e:new ke(e,t);if(j.throwOnInvalid)throw new yo(r);return new y({invalid:r})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,t={}){const r=da(e,D.fromObject(t));return r?r.map(s=>s?s.val:null).join(""):null}static expandFormat(e,t={}){return la(J.parseFormat(e),D.fromObject(t)).map(s=>s.val).join("")}static resetCache(){Tt=void 0,dr.clear()}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?Wn(this).weekYear:NaN}get weekNumber(){return this.isValid?Wn(this).weekNumber:NaN}get weekday(){return this.isValid?Wn(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?Hn(this).weekday:NaN}get localWeekNumber(){return this.isValid?Hn(this).weekNumber:NaN}get localWeekYear(){return this.isValid?Hn(this).weekYear:NaN}get ordinal(){return this.isValid?Fn(this.c).ordinal:NaN}get monthShort(){return this.isValid?Ut.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?Ut.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?Ut.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?Ut.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const e=864e5,t=6e4,r=Tn(this.c),s=this.zone.offset(r-e),i=this.zone.offset(r+e),a=this.zone.offset(r-s*t),l=this.zone.offset(r-i*t);if(a===l)return[this];const o=r-a*t,c=r-l*t,u=Zt(o,a),d=Zt(c,l);return u.hour===d.hour&&u.minute===d.minute&&u.second===d.second&&u.millisecond===d.millisecond?[He(this,{ts:o}),He(this,{ts:c})]:[this]}get isInLeapYear(){return Nt(this.year)}get daysInMonth(){return fn(this.year,this.month)}get daysInYear(){return this.isValid?at(this.year):NaN}get weeksInWeekYear(){return this.isValid?Bt(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?Bt(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(e={}){const{locale:t,numberingSystem:r,calendar:s}=J.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:t,numberingSystem:r,outputCalendar:s}}toUTC(e=0,t={}){return this.setZone(X.instance(e),t)}toLocal(){return this.setZone(j.defaultZone)}setZone(e,{keepLocalTime:t=!1,keepCalendarTime:r=!1}={}){if(e=Pe(e,j.defaultZone),e.equals(this.zone))return this;if(e.isValid){let s=this.ts;if(t||r){const i=e.offset(this.ts),a=this.toObject();[s]=en(a,i,e)}return He(this,{ts:s,zone:e})}else return y.invalid(Et(e))}reconfigure({locale:e,numberingSystem:t,outputCalendar:r}={}){const s=this.loc.clone({locale:e,numberingSystem:t,outputCalendar:r});return He(this,{loc:s})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const t=pn(e,Ms),{minDaysInFirstWeek:r,startOfWeek:s}=ys(t,this.loc),i=!k(t.weekYear)||!k(t.weekNumber)||!k(t.weekday),a=!k(t.ordinal),l=!k(t.year),o=!k(t.month)||!k(t.day),c=l||o,u=t.weekYear||t.weekNumber;if((c||a)&&u)throw new it("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(o&&a)throw new it("Can't mix ordinal dates with month/day");let d;i?d=ms({...hn(this.c,r,s),...t},r,s):k(t.ordinal)?(d={...this.toObject(),...t},k(t.day)&&(d.day=Math.min(fn(d.year,d.month),d.day))):d=gs({...Fn(this.c),...t});const[h,f]=en(d,this.o,this.zone);return He(this,{ts:h,o:f})}plus(e){if(!this.isValid)return this;const t=C.fromDurationLike(e);return He(this,_s(this,t))}minus(e){if(!this.isValid)return this;const t=C.fromDurationLike(e).negate();return He(this,_s(this,t))}startOf(e,{useLocaleWeeks:t=!1}={}){if(!this.isValid)return this;const r={},s=C.normalizeUnit(e);switch(s){case"years":r.month=1;case"quarters":case"months":r.day=1;case"weeks":case"days":r.hour=0;case"hours":r.minute=0;case"minutes":r.second=0;case"seconds":r.millisecond=0;break}if(s==="weeks")if(t){const i=this.loc.getStartOfWeek(),{weekday:a}=this;a<i&&(r.weekNumber=this.weekNumber-1),r.weekday=i}else r.weekday=1;if(s==="quarters"){const i=Math.ceil(this.month/3);r.month=(i-1)*3+1}return this.set(r)}endOf(e,t){return this.isValid?this.plus({[e]:1}).startOf(e,t).minus(1):this}toFormat(e,t={}){return this.isValid?J.create(this.loc.redefaultToEN(t)).formatDateTimeFromString(this,e):jn}toLocaleString(e=dn,t={}){return this.isValid?J.create(this.loc.clone(t),e).formatDateTime(this):jn}toLocaleParts(e={}){return this.isValid?J.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:t=!1,suppressMilliseconds:r=!1,includeOffset:s=!0,extendedZone:i=!1,precision:a="milliseconds"}={}){if(!this.isValid)return null;a=nn(a);const l=e==="extended";let o=Un(this,l,a);return tn.indexOf(a)>=3&&(o+="T"),o+=Os(this,l,t,r,s,i,a),o}toISODate({format:e="extended",precision:t="day"}={}){return this.isValid?Un(this,e==="extended",nn(t)):null}toISOWeekDate(){return Yt(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:t=!1,includeOffset:r=!0,includePrefix:s=!1,extendedZone:i=!1,format:a="extended",precision:l="milliseconds"}={}){return this.isValid?(l=nn(l),(s&&tn.indexOf(l)>=3?"T":"")+Os(this,a==="extended",t,e,r,i,l)):null}toRFC2822(){return Yt(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return Yt(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?Un(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:t=!1,includeOffsetSpace:r=!0}={}){let s="HH:mm:ss.SSS";return(t||e)&&(r&&(s+=" "),t?s+="z":e&&(s+="ZZ")),Yt(this,s,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():jn}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const t={...this.c};return e.includeConfig&&(t.outputCalendar=this.outputCalendar,t.numberingSystem=this.loc.numberingSystem,t.locale=this.loc.locale),t}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,t="milliseconds",r={}){if(!this.isValid||!e.isValid)return C.invalid("created by diffing an invalid DateTime");const s={locale:this.locale,numberingSystem:this.numberingSystem,...r},i=Zo(t).map(C.normalizeUnit),a=e.valueOf()>this.valueOf(),l=a?this:e,o=a?e:this,c=Jl(l,o,i,s);return a?c.negate():c}diffNow(e="milliseconds",t={}){return this.diff(y.now(),e,t)}until(e){return this.isValid?V.fromDateTimes(this,e):this}hasSame(e,t,r){if(!this.isValid)return!1;const s=e.valueOf(),i=this.setZone(e.zone,{keepLocalTime:!0});return i.startOf(t,r)<=s&&s<=i.endOf(t,r)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const t=e.base||y.fromObject({},{zone:this.zone}),r=e.padding?this<t?-e.padding:e.padding:0;let s=["years","months","days","hours","minutes","seconds"],i=e.unit;return Array.isArray(e.unit)&&(s=e.unit,i=void 0),Ds(t,this.plus(r),{...e,numeric:"always",units:s,unit:i})}toRelativeCalendar(e={}){return this.isValid?Ds(e.base||y.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(y.isDateTime))throw new G("min requires all arguments be DateTimes");return ws(e,t=>t.valueOf(),Math.min)}static max(...e){if(!e.every(y.isDateTime))throw new G("max requires all arguments be DateTimes");return ws(e,t=>t.valueOf(),Math.max)}static fromFormatExplain(e,t,r={}){const{locale:s=null,numberingSystem:i=null}=r,a=D.fromOpts({locale:s,numberingSystem:i,defaultToEN:!0});return ua(a,e,t)}static fromStringExplain(e,t,r={}){return y.fromFormatExplain(e,t,r)}static buildFormatParser(e,t={}){const{locale:r=null,numberingSystem:s=null}=t,i=D.fromOpts({locale:r,numberingSystem:s,defaultToEN:!0});return new ca(i,e)}static fromFormatParser(e,t,r={}){if(k(e)||k(t))throw new G("fromFormatParser requires an input string and a format parser");const{locale:s=null,numberingSystem:i=null}=r,a=D.fromOpts({locale:s,numberingSystem:i,defaultToEN:!0});if(!a.equals(t.locale))throw new G(`fromFormatParser called with a locale of ${a}, but the format parser was created for ${t.locale}`);const{result:l,zone:o,specificOffset:c,invalidReason:u}=t.explainFromTokens(e);return u?y.invalid(u):nt(l,o,r,`format ${t.format}`,e,c)}static get DATE_SHORT(){return dn}static get DATE_MED(){return pi}static get DATE_MED_WITH_WEEKDAY(){return bo}static get DATE_FULL(){return mi}static get DATE_HUGE(){return gi}static get TIME_SIMPLE(){return yi}static get TIME_WITH_SECONDS(){return wi}static get TIME_WITH_SHORT_OFFSET(){return ki}static get TIME_WITH_LONG_OFFSET(){return bi}static get TIME_24_SIMPLE(){return vi}static get TIME_24_WITH_SECONDS(){return xi}static get TIME_24_WITH_SHORT_OFFSET(){return Si}static get TIME_24_WITH_LONG_OFFSET(){return Ei}static get DATETIME_SHORT(){return Ti}static get DATETIME_SHORT_WITH_SECONDS(){return Ci}static get DATETIME_MED(){return Li}static get DATETIME_MED_WITH_SECONDS(){return Ii}static get DATETIME_MED_WITH_WEEKDAY(){return vo}static get DATETIME_FULL(){return _i}static get DATETIME_FULL_WITH_SECONDS(){return Oi}static get DATETIME_HUGE(){return Mi}static get DATETIME_HUGE_WITH_SECONDS(){return Bi}}function yt(n){if(y.isDateTime(n))return n;if(n&&n.valueOf&&qe(n.valueOf()))return y.fromJSDate(n);if(n&&typeof n=="object")return y.fromObject(n);throw new G(`Unknown datetime argument: ${n}, of type ${typeof n}`)}const pa=6048e5,mc=864e5,$s=Symbol.for("constructDateFrom");function De(n,e){return typeof n=="function"?n(e):n&&typeof n=="object"&&$s in n?n[$s](e):n instanceof Date?new n.constructor(e):new Date(e)}function re(n,e){return De(e||n,n)}function gc(n,e,t){const r=re(n,t?.in);return isNaN(e)?De(n,NaN):(r.setDate(r.getDate()+e),r)}let yc={};function In(){return yc}function Dt(n,e){const t=In(),r=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??t.weekStartsOn??t.locale?.options?.weekStartsOn??0,s=re(n,e?.in),i=s.getDay(),a=(i<r?7:0)+i-r;return s.setDate(s.getDate()-a),s.setHours(0,0,0,0),s}function mn(n,e){return Dt(n,{...e,weekStartsOn:1})}function ma(n,e){const t=re(n,e?.in),r=t.getFullYear(),s=De(t,0);s.setFullYear(r+1,0,4),s.setHours(0,0,0,0);const i=mn(s),a=De(t,0);a.setFullYear(r,0,4),a.setHours(0,0,0,0);const l=mn(a);return t.getTime()>=i.getTime()?r+1:t.getTime()>=l.getTime()?r:r-1}function Ns(n){const e=re(n),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+n-+t}function wc(n,...e){const t=De.bind(null,e.find(r=>typeof r=="object"));return e.map(t)}function Rs(n,e){const t=re(n,e?.in);return t.setHours(0,0,0,0),t}function kc(n,e,t){const[r,s]=wc(t?.in,n,e),i=Rs(r),a=Rs(s),l=+i-Ns(i),o=+a-Ns(a);return Math.round((l-o)/mc)}function bc(n,e){const t=ma(n,e),r=De(n,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),mn(r)}function vc(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function xc(n){return!(!vc(n)&&typeof n!="number"||isNaN(+re(n)))}function Sc(n,e){const t=re(n,e?.in);return t.setFullYear(t.getFullYear(),0,1),t.setHours(0,0,0,0),t}const Ec={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Tc=(n,e,t)=>{let r;const s=Ec[n];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",e.toString()),t?.addSuffix?t.comparison&&t.comparison>0?"in "+r:r+" ago":r};function zn(n){return(e={})=>{const t=e.width?String(e.width):n.defaultWidth;return n.formats[t]||n.formats[n.defaultWidth]}}const Cc={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Lc={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Ic={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},_c={date:zn({formats:Cc,defaultWidth:"full"}),time:zn({formats:Lc,defaultWidth:"full"}),dateTime:zn({formats:Ic,defaultWidth:"full"})},Oc={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Mc=(n,e,t,r)=>Oc[n];function wt(n){return(e,t)=>{const r=t?.context?String(t.context):"standalone";let s;if(r==="formatting"&&n.formattingValues){const a=n.defaultFormattingWidth||n.defaultWidth,l=t?.width?String(t.width):a;s=n.formattingValues[l]||n.formattingValues[a]}else{const a=n.defaultWidth,l=t?.width?String(t.width):n.defaultWidth;s=n.values[l]||n.values[a]}const i=n.argumentCallback?n.argumentCallback(e):e;return s[i]}}const Bc={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Dc={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Ac={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},$c={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Nc={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Rc={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Pc=(n,e)=>{const t=Number(n),r=t%100;if(r>20||r<10)switch(r%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},qc={ordinalNumber:Pc,era:wt({values:Bc,defaultWidth:"wide"}),quarter:wt({values:Dc,defaultWidth:"wide",argumentCallback:n=>n-1}),month:wt({values:Ac,defaultWidth:"wide"}),day:wt({values:$c,defaultWidth:"wide"}),dayPeriod:wt({values:Nc,defaultWidth:"wide",formattingValues:Rc,defaultFormattingWidth:"wide"})};function kt(n){return(e,t={})=>{const r=t.width,s=r&&n.matchPatterns[r]||n.matchPatterns[n.defaultMatchWidth],i=e.match(s);if(!i)return null;const a=i[0],l=r&&n.parsePatterns[r]||n.parsePatterns[n.defaultParseWidth],o=Array.isArray(l)?Vc(l,d=>d.test(a)):Fc(l,d=>d.test(a));let c;c=n.valueCallback?n.valueCallback(o):o,c=t.valueCallback?t.valueCallback(c):c;const u=e.slice(a.length);return{value:c,rest:u}}}function Fc(n,e){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&e(n[t]))return t}function Vc(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return t}function jc(n){return(e,t={})=>{const r=e.match(n.matchPattern);if(!r)return null;const s=r[0],i=e.match(n.parsePattern);if(!i)return null;let a=n.valueCallback?n.valueCallback(i[0]):i[0];a=t.valueCallback?t.valueCallback(a):a;const l=e.slice(s.length);return{value:a,rest:l}}}const Wc=/^(\d+)(th|st|nd|rd)?/i,Hc=/\d+/i,Uc={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},zc={any:[/^b/i,/^(a|c)/i]},Zc={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Yc={any:[/1/i,/2/i,/3/i,/4/i]},Gc={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Jc={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Qc={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Xc={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Kc={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},eu={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},tu={ordinalNumber:jc({matchPattern:Wc,parsePattern:Hc,valueCallback:n=>parseInt(n,10)}),era:kt({matchPatterns:Uc,defaultMatchWidth:"wide",parsePatterns:zc,defaultParseWidth:"any"}),quarter:kt({matchPatterns:Zc,defaultMatchWidth:"wide",parsePatterns:Yc,defaultParseWidth:"any",valueCallback:n=>n+1}),month:kt({matchPatterns:Gc,defaultMatchWidth:"wide",parsePatterns:Jc,defaultParseWidth:"any"}),day:kt({matchPatterns:Qc,defaultMatchWidth:"wide",parsePatterns:Xc,defaultParseWidth:"any"}),dayPeriod:kt({matchPatterns:Kc,defaultMatchWidth:"any",parsePatterns:eu,defaultParseWidth:"any"})},nu={code:"en-US",formatDistance:Tc,formatLong:_c,formatRelative:Mc,localize:qc,match:tu,options:{weekStartsOn:0,firstWeekContainsDate:1}};function ru(n,e){const t=re(n,e?.in);return kc(t,Sc(t))+1}function su(n,e){const t=re(n,e?.in),r=+mn(t)-+bc(t);return Math.round(r/pa)+1}function ga(n,e){const t=re(n,e?.in),r=t.getFullYear(),s=In(),i=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,a=De(e?.in||n,0);a.setFullYear(r+1,0,i),a.setHours(0,0,0,0);const l=Dt(a,e),o=De(e?.in||n,0);o.setFullYear(r,0,i),o.setHours(0,0,0,0);const c=Dt(o,e);return+t>=+l?r+1:+t>=+c?r:r-1}function iu(n,e){const t=In(),r=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??t.firstWeekContainsDate??t.locale?.options?.firstWeekContainsDate??1,s=ga(n,e),i=De(e?.in||n,0);return i.setFullYear(s,0,r),i.setHours(0,0,0,0),Dt(i,e)}function au(n,e){const t=re(n,e?.in),r=+Dt(t,e)-+iu(t,e);return Math.round(r/pa)+1}function L(n,e){const t=n<0?"-":"",r=Math.abs(n).toString().padStart(e,"0");return t+r}const Ne={y(n,e){const t=n.getFullYear(),r=t>0?t:1-t;return L(e==="yy"?r%100:r,e.length)},M(n,e){const t=n.getMonth();return e==="M"?String(t+1):L(t+1,2)},d(n,e){return L(n.getDate(),e.length)},a(n,e){const t=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(n,e){return L(n.getHours()%12||12,e.length)},H(n,e){return L(n.getHours(),e.length)},m(n,e){return L(n.getMinutes(),e.length)},s(n,e){return L(n.getSeconds(),e.length)},S(n,e){const t=e.length,r=n.getMilliseconds(),s=Math.trunc(r*Math.pow(10,t-3));return L(s,e.length)}},rt={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Ps={G:function(n,e,t){const r=n.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(r,{width:"abbreviated"});case"GGGGG":return t.era(r,{width:"narrow"});case"GGGG":default:return t.era(r,{width:"wide"})}},y:function(n,e,t){if(e==="yo"){const r=n.getFullYear(),s=r>0?r:1-r;return t.ordinalNumber(s,{unit:"year"})}return Ne.y(n,e)},Y:function(n,e,t,r){const s=ga(n,r),i=s>0?s:1-s;if(e==="YY"){const a=i%100;return L(a,2)}return e==="Yo"?t.ordinalNumber(i,{unit:"year"}):L(i,e.length)},R:function(n,e){const t=ma(n);return L(t,e.length)},u:function(n,e){const t=n.getFullYear();return L(t,e.length)},Q:function(n,e,t){const r=Math.ceil((n.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return L(r,2);case"Qo":return t.ordinalNumber(r,{unit:"quarter"});case"QQQ":return t.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(r,{width:"wide",context:"formatting"})}},q:function(n,e,t){const r=Math.ceil((n.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return L(r,2);case"qo":return t.ordinalNumber(r,{unit:"quarter"});case"qqq":return t.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(r,{width:"wide",context:"standalone"})}},M:function(n,e,t){const r=n.getMonth();switch(e){case"M":case"MM":return Ne.M(n,e);case"Mo":return t.ordinalNumber(r+1,{unit:"month"});case"MMM":return t.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(r,{width:"wide",context:"formatting"})}},L:function(n,e,t){const r=n.getMonth();switch(e){case"L":return String(r+1);case"LL":return L(r+1,2);case"Lo":return t.ordinalNumber(r+1,{unit:"month"});case"LLL":return t.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(r,{width:"wide",context:"standalone"})}},w:function(n,e,t,r){const s=au(n,r);return e==="wo"?t.ordinalNumber(s,{unit:"week"}):L(s,e.length)},I:function(n,e,t){const r=su(n);return e==="Io"?t.ordinalNumber(r,{unit:"week"}):L(r,e.length)},d:function(n,e,t){return e==="do"?t.ordinalNumber(n.getDate(),{unit:"date"}):Ne.d(n,e)},D:function(n,e,t){const r=ru(n);return e==="Do"?t.ordinalNumber(r,{unit:"dayOfYear"}):L(r,e.length)},E:function(n,e,t){const r=n.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(r,{width:"short",context:"formatting"});case"EEEE":default:return t.day(r,{width:"wide",context:"formatting"})}},e:function(n,e,t,r){const s=n.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return L(i,2);case"eo":return t.ordinalNumber(i,{unit:"day"});case"eee":return t.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(s,{width:"short",context:"formatting"});case"eeee":default:return t.day(s,{width:"wide",context:"formatting"})}},c:function(n,e,t,r){const s=n.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return L(i,e.length);case"co":return t.ordinalNumber(i,{unit:"day"});case"ccc":return t.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(s,{width:"narrow",context:"standalone"});case"cccccc":return t.day(s,{width:"short",context:"standalone"});case"cccc":default:return t.day(s,{width:"wide",context:"standalone"})}},i:function(n,e,t){const r=n.getDay(),s=r===0?7:r;switch(e){case"i":return String(s);case"ii":return L(s,e.length);case"io":return t.ordinalNumber(s,{unit:"day"});case"iii":return t.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(r,{width:"short",context:"formatting"});case"iiii":default:return t.day(r,{width:"wide",context:"formatting"})}},a:function(n,e,t){const s=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(n,e,t){const r=n.getHours();let s;switch(r===12?s=rt.noon:r===0?s=rt.midnight:s=r/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(n,e,t){const r=n.getHours();let s;switch(r>=17?s=rt.evening:r>=12?s=rt.afternoon:r>=4?s=rt.morning:s=rt.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(n,e,t){if(e==="ho"){let r=n.getHours()%12;return r===0&&(r=12),t.ordinalNumber(r,{unit:"hour"})}return Ne.h(n,e)},H:function(n,e,t){return e==="Ho"?t.ordinalNumber(n.getHours(),{unit:"hour"}):Ne.H(n,e)},K:function(n,e,t){const r=n.getHours()%12;return e==="Ko"?t.ordinalNumber(r,{unit:"hour"}):L(r,e.length)},k:function(n,e,t){let r=n.getHours();return r===0&&(r=24),e==="ko"?t.ordinalNumber(r,{unit:"hour"}):L(r,e.length)},m:function(n,e,t){return e==="mo"?t.ordinalNumber(n.getMinutes(),{unit:"minute"}):Ne.m(n,e)},s:function(n,e,t){return e==="so"?t.ordinalNumber(n.getSeconds(),{unit:"second"}):Ne.s(n,e)},S:function(n,e){return Ne.S(n,e)},X:function(n,e,t){const r=n.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return Fs(r);case"XXXX":case"XX":return ze(r);case"XXXXX":case"XXX":default:return ze(r,":")}},x:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"x":return Fs(r);case"xxxx":case"xx":return ze(r);case"xxxxx":case"xxx":default:return ze(r,":")}},O:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+qs(r,":");case"OOOO":default:return"GMT"+ze(r,":")}},z:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+qs(r,":");case"zzzz":default:return"GMT"+ze(r,":")}},t:function(n,e,t){const r=Math.trunc(+n/1e3);return L(r,e.length)},T:function(n,e,t){return L(+n,e.length)}};function qs(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),s=Math.trunc(r/60),i=r%60;return i===0?t+String(s):t+String(s)+e+L(i,2)}function Fs(n,e){return n%60===0?(n>0?"-":"+")+L(Math.abs(n)/60,2):ze(n,e)}function ze(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),s=L(Math.trunc(r/60),2),i=L(r%60,2);return t+s+e+i}const Vs=(n,e)=>{switch(n){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},ya=(n,e)=>{switch(n){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},ou=(n,e)=>{const t=n.match(/(P+)(p+)?/)||[],r=t[1],s=t[2];if(!s)return Vs(n,e);let i;switch(r){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",Vs(r,e)).replace("{{time}}",ya(s,e))},lu={p:ya,P:ou},cu=/^D+$/,uu=/^Y+$/,du=["D","DD","YY","YYYY"];function hu(n){return cu.test(n)}function fu(n){return uu.test(n)}function pu(n,e,t){const r=mu(n,e,t);if(console.warn(r),du.includes(n))throw new RangeError(r)}function mu(n,e,t){const r=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${e}\`) for formatting ${r} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const gu=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,yu=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,wu=/^'([^]*?)'?$/,ku=/''/g,bu=/[a-zA-Z]/;function js(n,e,t){const r=In(),s=r.locale??nu,i=r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,a=r.weekStartsOn??r.locale?.options?.weekStartsOn??0,l=re(n,t?.in);if(!xc(l))throw new RangeError("Invalid time value");let o=e.match(yu).map(u=>{const d=u[0];if(d==="p"||d==="P"){const h=lu[d];return h(u,s.formatLong)}return u}).join("").match(gu).map(u=>{if(u==="''")return{isToken:!1,value:"'"};const d=u[0];if(d==="'")return{isToken:!1,value:vu(u)};if(Ps[d])return{isToken:!0,value:u};if(d.match(bu))throw new RangeError("Format string contains an unescaped latin alphabet character `"+d+"`");return{isToken:!1,value:u}});s.localize.preprocessor&&(o=s.localize.preprocessor(l,o));const c={firstWeekContainsDate:i,weekStartsOn:a,locale:s};return o.map(u=>{if(!u.isToken)return u.value;const d=u.value;(fu(d)||hu(d))&&pu(d,e,String(n));const h=Ps[d[0]];return h(l,d,s.localize,c)}).join("")}function vu(n){const e=n.match(wu);return e?e[1].replace(ku,"'"):n}function xu(n,e){const t=re(n,e?.in);if(isNaN(+t))throw new RangeError("Invalid time value");const r=e?.format??"extended";let s="";const i=r==="extended"?"-":"";{const a=L(t.getDate(),2),l=L(t.getMonth()+1,2);s=`${L(t.getFullYear(),4)}${i}${l}${i}${a}`}return s}const Su=$.API_BASE_URL+"/comments";class Eu{api=he.create({baseURL:Su});constructor(){this.api.interceptors.request.use(function(e){const t=localStorage.getItem("access_token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},function(e){console.error(e)}),this.api.interceptors.response.use(e=>e,async e=>{const t=e.config;if(e.response&&e.response.status===401&&!t._retry){t._retry=!0;try{const r=await he.get($.API_BASE_URL+"/auth/refresh-token",{headers:{Authorization:"Bearer "+localStorage.getItem("refresh_token")}});if(r)return localStorage.setItem("access_token",r.data.accessToken),localStorage.setItem("refresh_token",r.data.refreshToken),t.headers.Authorization=`Bearer ${r.data.accessToken}`,this.api(t)}catch(r){console.error(r),localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),window.location.reload()}}return Promise.reject(e)})}async getAllComments(e=""){try{return(await this.api.get(`/?taskId=${e}`)).data}catch(t){throw new Error(t.response?.data?.message||"Failed to fetch comments")}}async createComment(e){try{return(await this.api.post("/",e)).data}catch(t){throw new Error(t.response?.data?.message||"Failed to create comment")}}async updateComment(e,t){try{return(await this.api.put(`/${e}`,t)).data}catch(r){throw new Error(r.response?.data?.message||"Failed to update comment")}}async deleteComment(e){try{return(await this.api.delete(`/${e}`)).data}catch(t){throw new Error(t.response?.data?.message||"Failed to delete comment")}}}const gn=new Eu;async function wa(n,e=null){const t=await q.getProjectMembers(localStorage.getItem("selectedProject"));n.innerHTML="";const r=document.createElement("option");r.innerText="Unassigned",e||(r.selected=!0),r.value="null",n.appendChild(r),t.result.forEach(s=>{const i=document.createElement("option");i.value=s._id,s.email===localStorage.getItem("userEmail")?i.innerText=`${s.email} (assign to me)`:i.innerText=`${s.email}`,s._id===e&&(i.selected=!0),n.appendChild(i)})}async function ka(n,e=null){const t=(await q.getProjectById(localStorage.getItem("selectedProject"))).result;n.innerHTML="",t.columns.forEach(r=>{const s=document.createElement("option");s.innerText=r,s.value=r,e===r&&(s.selected=!0),n.appendChild(s)}),e||(n.firstChild.selected=!0)}const be={task:'<svg class="h-5" fill="#52a3ff" viewBox="0 0 256 256" id="Flat" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <g opacity="0.2"> <circle cx="128" cy="128" r="96"></circle> </g> <g> <path d="M166.47607,98.2135,113.3335,148.94055,89.523,126.213a7.99994,7.99994,0,1,0-11.04688,11.57422l29.334,28a7.99913,7.99913,0,0,0,11.04687-.00049l58.666-56A7.99959,7.99959,0,1,0,166.47607,98.2135Z"></path> <path d="M127.99951,24.00012a104,104,0,1,0,104,104A104.11791,104.11791,0,0,0,127.99951,24.00012Zm0,192a88,88,0,1,1,88-88A88.09957,88.09957,0,0,1,127.99951,216.00012Z"></path> </g> </g></svg>',story:'<svg class="h-5" fill="#07de72" viewBox="0 0 256 256" id="Flat" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round" stroke="#CCCCCC" stroke-width="0.512"></g><g id="SVGRepo_iconCarrier"> <g opacity="0.2"> <path d="M191.9707,224l-64.0074-40L63.9707,224V48a8,8,0,0,1,8-8h112a8,8,0,0,1,8,8Z"></path> </g> <path d="M183.9707,32h-112a16.01833,16.01833,0,0,0-16,16V224a8.00043,8.00043,0,0,0,12.24024,6.78418l59.75293-37.35059L187.731,230.78418A8,8,0,0,0,199.9707,224V48A16.01833,16.01833,0,0,0,183.9707,32Zm0,177.56738-51.76758-32.35156a8.00107,8.00107,0,0,0-8.48,0L71.9707,209.56543V48h112Z"></path> </g></svg>',bug:'<svg class="h-5" fill="#ff6366" viewBox="0 0 256 256" id="Flat" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M200,104v48a71.99981,71.99981,0,0,1-72,72h0a71.99981,71.99981,0,0,1-72-72V104Z" opacity="0.2"></path> <path d="M208,144h16a8,8,0,0,0,0-16H208V112h16a8,8,0,0,0,0-16H207.59912a79.69432,79.69432,0,0,0-19.969-45.25732L205.44336,33.7959A7.99956,7.99956,0,1,0,194.416,22.2041L175.81519,39.8999a79.84411,79.84411,0,0,0-95.70777.05908L61.44336,22.2041A7.99956,7.99956,0,0,0,50.416,33.7959L68.30664,50.81543A79.69482,79.69482,0,0,0,48.40088,96H32a8,8,0,0,0,0,16H48v16H32a8,8,0,0,0,0,16H48v8c0,2.7002.13843,5.36816.40088,8H32a8,8,0,0,0,0,16H51.68286a80.00273,80.00273,0,0,0,152.63428,0H224a8,8,0,0,0,0-16H207.59912c.26245-2.63184.40088-5.2998.40088-8ZM128,40a64.08124,64.08124,0,0,1,63.48218,56H64.51782A64.08124,64.08124,0,0,1,128,40Zm8,175.48242V136a8,8,0,0,0-16,0v79.48242A64.08166,64.08166,0,0,1,64,152V112H192v40A64.08166,64.08166,0,0,1,136,215.48242Z"></path> </g></svg>',critical:'<svg class="h-5 stroke-red-600" title="critical" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M17 18L12 13L7 18M17 11L12 6L7 11" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path> </g></svg>',high:'<svg class="h-5 stroke-blue-600" title="high" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M18 15L12 9L6 15" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path> </g></svg>',medium:'<svg class="h-5 stroke-amber-600" title="medium" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M5 9H19M5 15H19" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path> </g></svg>',low:'<svg class="h-5 stroke-green-600" title="low" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M6 9L12 15L18 9" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path> </g></svg>',back:'<svg class="h-8 stroke-black hover:fill-primary-200" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M9 22H15C20 22 22 20 22 15V9C22 4 20 2 15 2H9C4 2 2 4 2 9V15C2 20 4 22 9 22Z" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path> <path d="M9.00002 15.3802H13.92C15.62 15.3802 17 14.0002 17 12.3002C17 10.6002 15.62 9.22021 13.92 9.22021H7.15002" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"></path> <path d="M8.57 10.7701L7 9.19012L8.57 7.62012" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path> </g></svg>'},Te=Object.create(null);Te.open="0";Te.close="1";Te.ping="2";Te.pong="3";Te.message="4";Te.upgrade="5";Te.noop="6";const rn=Object.create(null);Object.keys(Te).forEach(n=>{rn[Te[n]]=n});const hr={type:"error",data:"parser error"},ba=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",va=typeof ArrayBuffer=="function",xa=n=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(n):n&&n.buffer instanceof ArrayBuffer,$r=({type:n,data:e},t,r)=>ba&&e instanceof Blob?t?r(e):Ws(e,r):va&&(e instanceof ArrayBuffer||xa(e))?t?r(e):Ws(new Blob([e]),r):r(Te[n]+(e||"")),Ws=(n,e)=>{const t=new FileReader;return t.onload=function(){const r=t.result.split(",")[1];e("b"+(r||""))},t.readAsDataURL(n)};function Hs(n){return n instanceof Uint8Array?n:n instanceof ArrayBuffer?new Uint8Array(n):new Uint8Array(n.buffer,n.byteOffset,n.byteLength)}let Zn;function Tu(n,e){if(ba&&n.data instanceof Blob)return n.data.arrayBuffer().then(Hs).then(e);if(va&&(n.data instanceof ArrayBuffer||xa(n.data)))return e(Hs(n.data));$r(n,!1,t=>{Zn||(Zn=new TextEncoder),e(Zn.encode(t))})}const Us="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ct=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let n=0;n<Us.length;n++)Ct[Us.charCodeAt(n)]=n;const Cu=n=>{let e=n.length*.75,t=n.length,r,s=0,i,a,l,o;n[n.length-1]==="="&&(e--,n[n.length-2]==="="&&e--);const c=new ArrayBuffer(e),u=new Uint8Array(c);for(r=0;r<t;r+=4)i=Ct[n.charCodeAt(r)],a=Ct[n.charCodeAt(r+1)],l=Ct[n.charCodeAt(r+2)],o=Ct[n.charCodeAt(r+3)],u[s++]=i<<2|a>>4,u[s++]=(a&15)<<4|l>>2,u[s++]=(l&3)<<6|o&63;return c},Lu=typeof ArrayBuffer=="function",Nr=(n,e)=>{if(typeof n!="string")return{type:"message",data:Sa(n,e)};const t=n.charAt(0);return t==="b"?{type:"message",data:Iu(n.substring(1),e)}:rn[t]?n.length>1?{type:rn[t],data:n.substring(1)}:{type:rn[t]}:hr},Iu=(n,e)=>{if(Lu){const t=Cu(n);return Sa(t,e)}else return{base64:!0,data:n}},Sa=(n,e)=>{switch(e){case"blob":return n instanceof Blob?n:new Blob([n]);case"arraybuffer":default:return n instanceof ArrayBuffer?n:n.buffer}},Ea="",_u=(n,e)=>{const t=n.length,r=new Array(t);let s=0;n.forEach((i,a)=>{$r(i,!1,l=>{r[a]=l,++s===t&&e(r.join(Ea))})})},Ou=(n,e)=>{const t=n.split(Ea),r=[];for(let s=0;s<t.length;s++){const i=Nr(t[s],e);if(r.push(i),i.type==="error")break}return r};function Mu(){return new TransformStream({transform(n,e){Tu(n,t=>{const r=t.length;let s;if(r<126)s=new Uint8Array(1),new DataView(s.buffer).setUint8(0,r);else if(r<65536){s=new Uint8Array(3);const i=new DataView(s.buffer);i.setUint8(0,126),i.setUint16(1,r)}else{s=new Uint8Array(9);const i=new DataView(s.buffer);i.setUint8(0,127),i.setBigUint64(1,BigInt(r))}n.data&&typeof n.data!="string"&&(s[0]|=128),e.enqueue(s),e.enqueue(t)})}})}let Yn;function Gt(n){return n.reduce((e,t)=>e+t.length,0)}function Jt(n,e){if(n[0].length===e)return n.shift();const t=new Uint8Array(e);let r=0;for(let s=0;s<e;s++)t[s]=n[0][r++],r===n[0].length&&(n.shift(),r=0);return n.length&&r<n[0].length&&(n[0]=n[0].slice(r)),t}function Bu(n,e){Yn||(Yn=new TextDecoder);const t=[];let r=0,s=-1,i=!1;return new TransformStream({transform(a,l){for(t.push(a);;){if(r===0){if(Gt(t)<1)break;const o=Jt(t,1);i=(o[0]&128)===128,s=o[0]&127,s<126?r=3:s===126?r=1:r=2}else if(r===1){if(Gt(t)<2)break;const o=Jt(t,2);s=new DataView(o.buffer,o.byteOffset,o.length).getUint16(0),r=3}else if(r===2){if(Gt(t)<8)break;const o=Jt(t,8),c=new DataView(o.buffer,o.byteOffset,o.length),u=c.getUint32(0);if(u>Math.pow(2,21)-1){l.enqueue(hr);break}s=u*Math.pow(2,32)+c.getUint32(4),r=3}else{if(Gt(t)<s)break;const o=Jt(t,s);l.enqueue(Nr(i?o:Yn.decode(o),e)),r=0}if(s===0||s>n){l.enqueue(hr);break}}}})}const Ta=4;function U(n){if(n)return Du(n)}function Du(n){for(var e in U.prototype)n[e]=U.prototype[e];return n}U.prototype.on=U.prototype.addEventListener=function(n,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+n]=this._callbacks["$"+n]||[]).push(e),this};U.prototype.once=function(n,e){function t(){this.off(n,t),e.apply(this,arguments)}return t.fn=e,this.on(n,t),this};U.prototype.off=U.prototype.removeListener=U.prototype.removeAllListeners=U.prototype.removeEventListener=function(n,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var t=this._callbacks["$"+n];if(!t)return this;if(arguments.length==1)return delete this._callbacks["$"+n],this;for(var r,s=0;s<t.length;s++)if(r=t[s],r===e||r.fn===e){t.splice(s,1);break}return t.length===0&&delete this._callbacks["$"+n],this};U.prototype.emit=function(n){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),t=this._callbacks["$"+n],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(t){t=t.slice(0);for(var r=0,s=t.length;r<s;++r)t[r].apply(this,e)}return this};U.prototype.emitReserved=U.prototype.emit;U.prototype.listeners=function(n){return this._callbacks=this._callbacks||{},this._callbacks["$"+n]||[]};U.prototype.hasListeners=function(n){return!!this.listeners(n).length};const _n=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,t)=>t(e,0),oe=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),Au="arraybuffer";function Ca(n,...e){return e.reduce((t,r)=>(n.hasOwnProperty(r)&&(t[r]=n[r]),t),{})}const $u=oe.setTimeout,Nu=oe.clearTimeout;function On(n,e){e.useNativeTimers?(n.setTimeoutFn=$u.bind(oe),n.clearTimeoutFn=Nu.bind(oe)):(n.setTimeoutFn=oe.setTimeout.bind(oe),n.clearTimeoutFn=oe.clearTimeout.bind(oe))}const Ru=1.33;function Pu(n){return typeof n=="string"?qu(n):Math.ceil((n.byteLength||n.size)*Ru)}function qu(n){let e=0,t=0;for(let r=0,s=n.length;r<s;r++)e=n.charCodeAt(r),e<128?t+=1:e<2048?t+=2:e<55296||e>=57344?t+=3:(r++,t+=4);return t}function La(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function Fu(n){let e="";for(let t in n)n.hasOwnProperty(t)&&(e.length&&(e+="&"),e+=encodeURIComponent(t)+"="+encodeURIComponent(n[t]));return e}function Vu(n){let e={},t=n.split("&");for(let r=0,s=t.length;r<s;r++){let i=t[r].split("=");e[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return e}class ju extends Error{constructor(e,t,r){super(e),this.description=t,this.context=r,this.type="TransportError"}}class Rr extends U{constructor(e){super(),this.writable=!1,On(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,r){return super.emitReserved("error",new ju(e,t,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=Nr(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,t={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const t=Fu(e);return t.length?"?"+t:""}}class Wu extends Rr{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||t()})),this.writable||(r++,this.once("drain",function(){--r||t()}))}else t()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const t=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};Ou(e,this.socket.binaryType).forEach(t),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,_u(e,t=>{this.doWrite(t,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",t=this.query||{};return this.opts.timestampRequests!==!1&&(t[this.opts.timestampParam]=La()),!this.supportsBinary&&!t.sid&&(t.b64=1),this.createUri(e,t)}}let Ia=!1;try{Ia=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const Hu=Ia;function Uu(){}class zu extends Wu{constructor(e){if(super(e),typeof location<"u"){const t=location.protocol==="https:";let r=location.port;r||(r=t?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||r!==e.port}}doWrite(e,t){const r=this.request({method:"POST",data:e});r.on("success",t),r.on("error",(s,i)=>{this.onError("xhr post error",s,i)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(t,r)=>{this.onError("xhr poll error",t,r)}),this.pollXhr=e}}class Ee extends U{constructor(e,t,r){super(),this.createRequest=e,On(this,r),this._opts=r,this._method=r.method||"GET",this._uri=t,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var e;const t=Ca(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(t);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let s in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(s)&&r.setRequestHeader(s,this._opts.extraHeaders[s])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var s;r.readyState===3&&((s=this._opts.cookieJar)===null||s===void 0||s.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(s){this.setTimeoutFn(()=>{this._onError(s)},0);return}typeof document<"u"&&(this._index=Ee.requestsCount++,Ee.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=Uu,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Ee.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Ee.requestsCount=0;Ee.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",zs);else if(typeof addEventListener=="function"){const n="onpagehide"in oe?"pagehide":"unload";addEventListener(n,zs,!1)}}function zs(){for(let n in Ee.requests)Ee.requests.hasOwnProperty(n)&&Ee.requests[n].abort()}const Zu=(function(){const n=_a({xdomain:!1});return n&&n.responseType!==null})();class Yu extends zu{constructor(e){super(e);const t=e&&e.forceBase64;this.supportsBinary=Zu&&!t}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new Ee(_a,this.uri(),e)}}function _a(n){const e=n.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||Hu))return new XMLHttpRequest}catch{}if(!e)try{return new oe[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Oa=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class Gu extends Rr{get name(){return"websocket"}doOpen(){const e=this.uri(),t=this.opts.protocols,r=Oa?{}:Ca(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,r)}catch(s){return this.emitReserved("error",s)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const r=e[t],s=t===e.length-1;$r(r,this.supportsBinary,i=>{try{this.doWrite(r,i)}catch{}s&&_n(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=La()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}const Gn=oe.WebSocket||oe.MozWebSocket;class Ju extends Gu{createSocket(e,t,r){return Oa?new Gn(e,t,r):t?new Gn(e,t):new Gn(e)}doWrite(e,t){this.ws.send(t)}}class Qu extends Rr{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const t=Bu(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=e.readable.pipeThrough(t).getReader(),s=Mu();s.readable.pipeTo(e.writable),this._writer=s.writable.getWriter();const i=()=>{r.read().then(({done:l,value:o})=>{l||(this.onPacket(o),i())}).catch(l=>{})};i();const a={type:"open"};this.query.sid&&(a.data=`{"sid":"${this.query.sid}"}`),this._writer.write(a).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const r=e[t],s=t===e.length-1;this._writer.write(r).then(()=>{s&&_n(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const Xu={websocket:Ju,webtransport:Qu,polling:Yu},Ku=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,ed=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function fr(n){if(n.length>8e3)throw"URI too long";const e=n,t=n.indexOf("["),r=n.indexOf("]");t!=-1&&r!=-1&&(n=n.substring(0,t)+n.substring(t,r).replace(/:/g,";")+n.substring(r,n.length));let s=Ku.exec(n||""),i={},a=14;for(;a--;)i[ed[a]]=s[a]||"";return t!=-1&&r!=-1&&(i.source=e,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=td(i,i.path),i.queryKey=nd(i,i.query),i}function td(n,e){const t=/\/{2,9}/g,r=e.replace(t,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&r.splice(0,1),e.slice(-1)=="/"&&r.splice(r.length-1,1),r}function nd(n,e){const t={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,s,i){s&&(t[s]=i)}),t}const pr=typeof addEventListener=="function"&&typeof removeEventListener=="function",sn=[];pr&&addEventListener("offline",()=>{sn.forEach(n=>n())},!1);class Fe extends U{constructor(e,t){if(super(),this.binaryType=Au,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(t=e,e=null),e){const r=fr(e);t.hostname=r.host,t.secure=r.protocol==="https"||r.protocol==="wss",t.port=r.port,r.query&&(t.query=r.query)}else t.host&&(t.hostname=fr(t.host).host);On(this,t),this.secure=t.secure!=null?t.secure:typeof location<"u"&&location.protocol==="https:",t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=t.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach(r=>{const s=r.prototype.name;this.transports.push(s),this._transportsByName[s]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=Vu(this.opts.query)),pr&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},sn.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=Ta,t.transport=e,this.id&&(t.sid=this.id);const r=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&Fe.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",t=>this._onClose("transport close",t))}onOpen(){this.readyState="open",Fe.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const t=new Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let t=1;for(let r=0;r<this.writeBuffer.length;r++){const s=this.writeBuffer[r].data;if(s&&(t+=Pu(s)),r>0&&t>this._maxPayload)return this.writeBuffer.slice(0,r);t+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,_n(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,t,r){return this._sendPacket("message",e,t,r),this}send(e,t,r){return this._sendPacket("message",e,t,r),this}_sendPacket(e,t,r,s){if(typeof t=="function"&&(s=t,t=void 0),typeof r=="function"&&(s=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const i={type:e,data:t,options:r};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),s&&this.once("flush",s),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},r=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():e()}):this.upgrading?r():e()),this}_onError(e){if(Fe.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),pr&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const r=sn.indexOf(this._offlineEventListener);r!==-1&&sn.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}Fe.protocol=Ta;class rd extends Fe{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let t=this.createTransport(e),r=!1;Fe.priorWebsocketSuccess=!1;const s=()=>{r||(t.send([{type:"ping",data:"probe"}]),t.once("packet",d=>{if(!r)if(d.type==="pong"&&d.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;Fe.priorWebsocketSuccess=t.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(u(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())})}else{const h=new Error("probe error");h.transport=t.name,this.emitReserved("upgradeError",h)}}))};function i(){r||(r=!0,u(),t.close(),t=null)}const a=d=>{const h=new Error("probe error: "+d);h.transport=t.name,i(),this.emitReserved("upgradeError",h)};function l(){a("transport closed")}function o(){a("socket closed")}function c(d){t&&d.name!==t.name&&i()}const u=()=>{t.removeListener("open",s),t.removeListener("error",a),t.removeListener("close",l),this.off("close",o),this.off("upgrading",c)};t.once("open",s),t.once("error",a),t.once("close",l),this.once("close",o),this.once("upgrading",c),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{r||t.open()},200):t.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const t=[];for(let r=0;r<e.length;r++)~this.transports.indexOf(e[r])&&t.push(e[r]);return t}}let sd=class extends rd{constructor(e,t={}){const r=typeof e=="object"?e:t;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(s=>Xu[s]).filter(s=>!!s)),super(e,r)}};function id(n,e="",t){let r=n;t=t||typeof location<"u"&&location,n==null&&(n=t.protocol+"//"+t.host),typeof n=="string"&&(n.charAt(0)==="/"&&(n.charAt(1)==="/"?n=t.protocol+n:n=t.host+n),/^(https?|wss?):\/\//.test(n)||(typeof t<"u"?n=t.protocol+"//"+n:n="https://"+n),r=fr(n)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const i=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+i+":"+r.port+e,r.href=r.protocol+"://"+i+(t&&t.port===r.port?"":":"+r.port),r}const ad=typeof ArrayBuffer=="function",od=n=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(n):n.buffer instanceof ArrayBuffer,Ma=Object.prototype.toString,ld=typeof Blob=="function"||typeof Blob<"u"&&Ma.call(Blob)==="[object BlobConstructor]",cd=typeof File=="function"||typeof File<"u"&&Ma.call(File)==="[object FileConstructor]";function Pr(n){return ad&&(n instanceof ArrayBuffer||od(n))||ld&&n instanceof Blob||cd&&n instanceof File}function an(n,e){if(!n||typeof n!="object")return!1;if(Array.isArray(n)){for(let t=0,r=n.length;t<r;t++)if(an(n[t]))return!0;return!1}if(Pr(n))return!0;if(n.toJSON&&typeof n.toJSON=="function"&&arguments.length===1)return an(n.toJSON(),!0);for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&an(n[t]))return!0;return!1}function ud(n){const e=[],t=n.data,r=n;return r.data=mr(t,e),r.attachments=e.length,{packet:r,buffers:e}}function mr(n,e){if(!n)return n;if(Pr(n)){const t={_placeholder:!0,num:e.length};return e.push(n),t}else if(Array.isArray(n)){const t=new Array(n.length);for(let r=0;r<n.length;r++)t[r]=mr(n[r],e);return t}else if(typeof n=="object"&&!(n instanceof Date)){const t={};for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=mr(n[r],e));return t}return n}function dd(n,e){return n.data=gr(n.data,e),delete n.attachments,n}function gr(n,e){if(!n)return n;if(n&&n._placeholder===!0){if(typeof n.num=="number"&&n.num>=0&&n.num<e.length)return e[n.num];throw new Error("illegal attachments")}else if(Array.isArray(n))for(let t=0;t<n.length;t++)n[t]=gr(n[t],e);else if(typeof n=="object")for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&(n[t]=gr(n[t],e));return n}const hd=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],fd=5;var T;(function(n){n[n.CONNECT=0]="CONNECT",n[n.DISCONNECT=1]="DISCONNECT",n[n.EVENT=2]="EVENT",n[n.ACK=3]="ACK",n[n.CONNECT_ERROR=4]="CONNECT_ERROR",n[n.BINARY_EVENT=5]="BINARY_EVENT",n[n.BINARY_ACK=6]="BINARY_ACK"})(T||(T={}));class pd{constructor(e){this.replacer=e}encode(e){return(e.type===T.EVENT||e.type===T.ACK)&&an(e)?this.encodeAsBinary({type:e.type===T.EVENT?T.BINARY_EVENT:T.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let t=""+e.type;return(e.type===T.BINARY_EVENT||e.type===T.BINARY_ACK)&&(t+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(t+=e.nsp+","),e.id!=null&&(t+=e.id),e.data!=null&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=ud(e),r=this.encodeAsString(t.packet),s=t.buffers;return s.unshift(r),s}}function Zs(n){return Object.prototype.toString.call(n)==="[object Object]"}class qr extends U{constructor(e){super(),this.reviver=e}add(e){let t;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const r=t.type===T.BINARY_EVENT;r||t.type===T.BINARY_ACK?(t.type=r?T.EVENT:T.ACK,this.reconstructor=new md(t),t.attachments===0&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else if(Pr(e)||e.base64)if(this.reconstructor)t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let t=0;const r={type:Number(e.charAt(0))};if(T[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===T.BINARY_EVENT||r.type===T.BINARY_ACK){const i=t+1;for(;e.charAt(++t)!=="-"&&t!=e.length;);const a=e.substring(i,t);if(a!=Number(a)||e.charAt(t)!=="-")throw new Error("Illegal attachments");r.attachments=Number(a)}if(e.charAt(t+1)==="/"){const i=t+1;for(;++t&&!(e.charAt(t)===","||t===e.length););r.nsp=e.substring(i,t)}else r.nsp="/";const s=e.charAt(t+1);if(s!==""&&Number(s)==s){const i=t+1;for(;++t;){const a=e.charAt(t);if(a==null||Number(a)!=a){--t;break}if(t===e.length)break}r.id=Number(e.substring(i,t+1))}if(e.charAt(++t)){const i=this.tryParse(e.substr(t));if(qr.isPayloadValid(r.type,i))r.data=i;else throw new Error("invalid payload")}return r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,t){switch(e){case T.CONNECT:return Zs(t);case T.DISCONNECT:return t===void 0;case T.CONNECT_ERROR:return typeof t=="string"||Zs(t);case T.EVENT:case T.BINARY_EVENT:return Array.isArray(t)&&(typeof t[0]=="number"||typeof t[0]=="string"&&hd.indexOf(t[0])===-1);case T.ACK:case T.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class md{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const t=dd(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const gd=Object.freeze(Object.defineProperty({__proto__:null,Decoder:qr,Encoder:pd,get PacketType(){return T},protocol:fd},Symbol.toStringTag,{value:"Module"}));function ge(n,e,t){return n.on(e,t),function(){n.off(e,t)}}const yd=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Ba extends U{constructor(e,t,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[ge(e,"open",this.onopen.bind(this)),ge(e,"packet",this.onpacket.bind(this)),ge(e,"error",this.onerror.bind(this)),ge(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){var r,s,i;if(yd.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(t.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;const a={type:T.EVENT,data:t};if(a.options={},a.options.compress=this.flags.compress!==!1,typeof t[t.length-1]=="function"){const u=this.ids++,d=t.pop();this._registerAckCallback(u,d),a.id=u}const l=(s=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||s===void 0?void 0:s.writable,o=this.connected&&!(!((i=this.io.engine)===null||i===void 0)&&i._hasPingExpired());return this.flags.volatile&&!l||(o?(this.notifyOutgoingListeners(a),this.packet(a)):this.sendBuffer.push(a)),this.flags={},this}_registerAckCallback(e,t){var r;const s=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(s===void 0){this.acks[e]=t;return}const i=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let l=0;l<this.sendBuffer.length;l++)this.sendBuffer[l].id===e&&this.sendBuffer.splice(l,1);t.call(this,new Error("operation has timed out"))},s),a=(...l)=>{this.io.clearTimeoutFn(i),t.apply(this,l)};a.withError=!0,this.acks[e]=a}emitWithAck(e,...t){return new Promise((r,s)=>{const i=(a,l)=>a?s(a):r(l);i.withError=!0,t.push(i),this.emit(e,...t)})}_addToQueue(e){let t;typeof e[e.length-1]=="function"&&(t=e.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((s,...i)=>r!==this._queue[0]?void 0:(s!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),t&&t(s)):(this._queue.shift(),t&&t(null,...i)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:T.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(r=>String(r.id)===e)){const r=this.acks[e];delete this.acks[e],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case T.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case T.EVENT:case T.BINARY_EVENT:this.onevent(e);break;case T.ACK:case T.BINARY_ACK:this.onack(e);break;case T.DISCONNECT:this.ondisconnect();break;case T.CONNECT_ERROR:this.destroy();const r=new Error(e.data.message);r.data=e.data.data,this.emitReserved("connect_error",r);break}}onevent(e){const t=e.data||[];e.id!=null&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const r of t)r.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let r=!1;return function(...s){r||(r=!0,t.packet({type:T.ACK,id:e,data:s}))}}onack(e){const t=this.acks[e.id];typeof t=="function"&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:T.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let r=0;r<t.length;r++)if(e===t[r])return t.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let r=0;r<t.length;r++)if(e===t[r])return t.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const r of t)r.apply(this,e.data)}}}function pt(n){n=n||{},this.ms=n.min||100,this.max=n.max||1e4,this.factor=n.factor||2,this.jitter=n.jitter>0&&n.jitter<=1?n.jitter:0,this.attempts=0}pt.prototype.duration=function(){var n=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),t=Math.floor(e*this.jitter*n);n=(Math.floor(e*10)&1)==0?n-t:n+t}return Math.min(n,this.max)|0};pt.prototype.reset=function(){this.attempts=0};pt.prototype.setMin=function(n){this.ms=n};pt.prototype.setMax=function(n){this.max=n};pt.prototype.setJitter=function(n){this.jitter=n};class yr extends U{constructor(e,t){var r;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.opts=t,On(this,t),this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor((r=t.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new pt({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(t.timeout==null?2e4:t.timeout),this._readyState="closed",this.uri=e;const s=t.parser||gd;this.encoder=new s.Encoder,this.decoder=new s.Decoder,this._autoConnect=t.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(t=this.backoff)===null||t===void 0||t.setMin(e),this)}randomizationFactor(e){var t;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(t=this.backoff)===null||t===void 0||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(t=this.backoff)===null||t===void 0||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new sd(this.uri,this.opts);const t=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const s=ge(t,"open",function(){r.onopen(),e&&e()}),i=l=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",l),e?e(l):this.maybeReconnectOnOpen()},a=ge(t,"error",i);if(this._timeout!==!1){const l=this._timeout,o=this.setTimeoutFn(()=>{s(),i(new Error("timeout")),t.close()},l);this.opts.autoUnref&&o.unref(),this.subs.push(()=>{this.clearTimeoutFn(o)})}return this.subs.push(s),this.subs.push(a),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(ge(e,"ping",this.onping.bind(this)),ge(e,"data",this.ondata.bind(this)),ge(e,"error",this.onerror.bind(this)),ge(e,"close",this.onclose.bind(this)),ge(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(t){this.onclose("parse error",t)}}ondecoded(e){_n(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let r=this.nsps[e];return r?this._autoConnect&&!r.active&&r.connect():(r=new Ba(this,e,t),this.nsps[e]=r),r}_destroy(e){const t=Object.keys(this.nsps);for(const r of t)if(this.nsps[r].active)return;this._close()}_packet(e){const t=this.encoder.encode(e);for(let r=0;r<t.length;r++)this.engine.write(t[r],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(s=>{s?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",s)):e.onreconnect()}))},t);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const bt={};function on(n,e){typeof n=="object"&&(e=n,n=void 0),e=e||{};const t=id(n,e.path||"/socket.io"),r=t.source,s=t.id,i=t.path,a=bt[s]&&i in bt[s].nsps,l=e.forceNew||e["force new connection"]||e.multiplex===!1||a;let o;return l?o=new yr(r,e):(bt[s]||(bt[s]=new yr(r,e)),o=bt[s]),t.query&&!e.query&&(e.query=t.queryKey),o.socket(t.path,e)}Object.assign(on,{Manager:yr,Socket:Ba,io:on,connect:on});const Da=on($.API_BASE_URL+"/",{auth:{token:localStorage.getItem("access_token")}});Da.on("connect",()=>qt(localStorage.getItem("selectedProject")));Da.on("userStatusChanged",()=>{qt(localStorage.getItem("selectedProject"))});async function qt(n){try{if(!n)return;const t=(await q.getProjectMembers(n)).result,r=document.getElementById("memberAvatars");r.innerHTML="",t.forEach((s,i)=>{const a=document.createElement("img"),l=s.profileImage?`${$.API_BASE_URL}/uploads/profile/${s.profileImage}`:"../../../assets/img/profile.png";a.src=l,a.alt=s.name,a.title=s.name,a.className="sm:min-w-10 sm:min-h-10 sm:max-w-10 sm:max-h-10 min-w-7 max-w-7 min-h-7 max-w-7 rounded-full object-cover border-2 border-white shadow-md hover:z-1 aspect-square",a.style.marginLeft=i===0?"0px":"-10px",s.onlineStatus==="online"&&(a.classList.add("border-green-400"),a.classList.remove("border-white")),r.appendChild(a)})}catch(e){console.error("Error loading images:",e)}}function Aa(){localStorage.getItem("access_token")||(window.location.href="signup")}function wd(n){const e=document.createElement("div");return e.dataset.id=n._id,e.className=" p-1 rounded-t",e.innerHTML=`
    <div
      class="relative flex flex-wrap items-center justify-between rounded-md border border-gray-200 bg-gray-50 p-2 text-left shadow-sm"
    >
      <div class="flex flex-1 flex-col md:flex-row">
        <button
          type="button"
          class="dropdownButton flex w-full flex-1 cursor-pointer items-center gap-3 rounded-md text-lg font-semibold focus:outline-none md:w-fit"
          id="dropdownButton-${n.key}"
          aria-expanded="false"
          aria-haspopup="true"
        >
          <svg
            id="dropdown-icon-${n.key}"
            class="dropdown-icon-${n.key} mt-1 h-4 w-4"
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 20 20"
            stroke="currentColor"
            aria-hidden="true"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M5 7l7 7 7-7"
            ></path>
          </svg>
          <p class="text-nowrap">${n.key}</p>
          <div
            class="${n.dueDate?"":"hidden"} flex items-center gap-1"
          >
            <svg
              viewBox="0 0 24 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
              class="stroke-primary-400 h-3 w-3"
            >
              <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
              <g
                id="SVGRepo_tracerCarrier"
                stroke-linecap="round"
                stroke-linejoin="round"
              ></g>
              <g id="SVGRepo_iconCarrier">
                <path
                  d="M12 7V12L14.5 10.5M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z"
                  stroke="inherit"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                ></path>
              </g>
            </svg>
            <p
              id="${n.key}-due-date-preview"
              class="due-date text-primary-400 text-center text-xs font-semibold"
            ></p>
          </div>
        </button>
      </div>

      <div class="flex flex-col md:flex-row md:items-center md:gap-3">
        <form
          class="flex hidden h-7.5 gap-1 md:justify-end"
          id="${n.key}-start-form"
        >
          <input
            type="date"
            name="dueDate"
            id="${n.key}-due-date"
            class="required focus:border-primary-400 w-28 cursor-pointer rounded-sm border border-gray-200 bg-white px-1 text-sm shadow-xs outline-none md:w-30"
            placeholder="Enter the due date"
          />

          <button
            type="submit"
            id="${n.key}-start-form-button"
            class="bg-primary-400 hover:bg-primary-500 w-20 cursor-pointer rounded-sm px-2 py-1 font-medium text-white shadow-xs focus:outline-none"
          >
            Confirm
          </button>
          <svg
            id="${n.key}-start-close-svg"
            class="cursor-pointer stroke-black hover:stroke-red-400 hover:stroke-2"
            viewBox="0 0 24 24"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
            <g
              id="SVGRepo_tracerCarrier"
              stroke-linecap="round"
              stroke-linejoin="round"
            ></g>
            <g id="SVGRepo_iconCarrier">
              <path
                d="M16 8L8 16M8.00001 8L16 16"
                stroke="inherit"
                stroke-width="1.5"
                stroke-linecap="round"
                stroke-linejoin="round"
              ></path>
            </g>
          </svg>
        </form>

        <button
          type="button"
          id="${n.key}-sprint-complete-button"
          class="bg-primary-400 hover:bg-primary-500 hidden cursor-pointer rounded-sm px-2 py-1 font-medium text-white shadow-xs focus:outline-none"
        >
          Complete Sprint
        </button>
        <button
          type="button"
          id="${n.key}-sprint-start-button"
          class="bg-primary-400 hover:bg-primary-500 cursor-pointer rounded-sm px-2 py-1 font-medium text-white shadow-xs focus:outline-none"
        >
          Start Sprint
        </button>
      </div>
    </div>

    <div
      class="dropdown-menu-${n.key} no-scrollbar relative my-2 overflow-x-auto rounded-md border border-gray-200"
    >
      <table class="w-full text-left rtl:text-right">
        <thead
          class="border-b border-l-3 border-gray-200 border-l-gray-100 bg-gray-100 text-xs text-nowrap uppercase hover:border-l-gray-200 hover:bg-gray-200"
        >
          <tr>
            <th scope="col" class="p-2 text-center">Type</th>
            <th scope="col" class="p-2">Key</th>
            <th scope="col" class="min-w-48 p-2">Summary</th>
            <th scope="col" class="min-w-14 p-2">Status</th>
            <th scope="col" class="px-6 py-3">Sprint</th>
            <th scope="col" class="min-w-48 p-2">Assignee</th>
            <th scope="col" class="p-2">Due Date</th>
            <th scope="col" class="min-w-36 p-2">Labels</th>
            <th scope="col" class="p-2">Created</th>
            <th scope="col" class="p-2">Updated</th>
            <th scope="col" class="min-w-36 p-2">Reporter</th>
            <th scope="col" class="min-w-px p-2"></th>
          </tr>
        </thead>
        <tbody id="${n.key}-body" data-id="${n._id}"></tbody>
      </table>
    </div>
    <div
      class="empty-message hover:border-primary-600 hover:text-primary-400 flex hidden h-15 w-full items-center justify-center rounded-lg border border-dotted text-center font-semibold text-gray-400"
      id="${n.key}-empty-message"
      data-id="${n._id}"
    >
      Drop tasks here...
    </div>

    <div class="flex w-full justify-center" id="${n.key}-loader">
      <svg viewBox="25 25 50 50" class="loader">
        <circle r="20" cy="50" cx="50"></circle>
      </svg>
    </div>
  `,e}async function Ys(n,e,t){let r=[];const s=document.getElementById(`${n.key}-body`);for(const l of e){const o=await S.getTaskById(l);r.push(Ye(o.data.result,"",t,n))}const i=document.getElementById(`${n.key}-loader`);s.classList.add("hidden");const a=await Promise.all(r);i.classList.add("hidden"),s.classList.remove("hidden"),bn(s,a,n),vn()}async function kd(n){const e={projectId:localStorage.getItem("selectedProject"),storyPoint:n.value};await le.createSprint(e),await mt(localStorage.getItem("selectedProject"))}async function $a(n,e){(await le.getSprintById(n)).result.tasks.forEach(r=>{r.status,e.columns[e.columns.length-1]}),await le.updateSprint(n,{isCompleted:!0,tasks:[]}),await q.updateProject(e._id,{currentSprint:null}),await mt(localStorage.getItem("selectedProject")),Ft()}async function bd(n){const e=document.getElementById(`${n.key}-sprint-start-button`),t=document.getElementById(`${n.key}-start-close-svg`),r=document.getElementById(`${n.key}-start-form`),s=document.getElementById(`${n.key}-due-date`),i=document.getElementById(`${n.key}-start-form-button`),a=document.getElementById(`${n.key}-sprint-complete-button`),l=await q.getProjectById(localStorage.getItem("selectedProject"));e.addEventListener("click",o),t.addEventListener("click",o);function o(){Y(e),Y(r)}i.addEventListener("click",async d=>{d.preventDefault(),await c()});async function c(){if(l.result.currentSprint)o();else{const d=await le.updateSprint(n._id,{dueDate:s.value});await u(d.result),await mt(localStorage.getItem("selectedProject")),Ft()}}async function u(d){if(d.dueDate){Y(r),Y(a);const h=await q.updateProject(l.result._id,{currentSprint:d._id});a.addEventListener("click",async f=>{f.preventDefault(),await $a(d._id,h.result)})}}}function vd(n,e){e.innerHTML="",Y(e),n.forEach(t=>{const r=document.createElement("li");r.className="dropdown-item px-4 py-2 hover:bg-gray-100 cursor-pointer",r.dataset.id=t._id,r.id=`dropdown-${t.key}`,r.innerHTML=t.key,e.appendChild(r),r.addEventListener("click",async()=>{await xd(r)})})}async function xd(n){const e=document.getElementById("backlog-body");let t=[];e.querySelectorAll(".checkboxes").forEach(r=>{r.checked&&t.push(r.dataset.id)}),await le.addTasksToSprint(n.dataset.id,{tasks:t}),await mt(localStorage.getItem("selectedProject"))}async function Ft(){if(!localStorage.getItem("selectedProject"))return;const n=(await q.getProjectById(localStorage.getItem("selectedProject"))).result,e=document.getElementById("dashboardSprintPreview"),t=document.getElementById("dashboardSprintName"),r=document.getElementById("dashboardSprintDueDateWrapper");if(n.projectType==="scrum")if(e.classList.remove("hidden"),n.currentSprint){const s=document.getElementById("dashboardSprintDueDate"),i=(await le.getSprintById(n.currentSprint)).result;r.classList.remove("hidden"),t.innerText=i.key,s.innerText=new Date(i.dueDate).toLocaleDateString()}else r.classList.add("hidden"),t.innerText="No sprint started";else e.classList.add("hidden")}function Fr(n){const e=document.getElementById("forYouPage"),t=document.getElementById("main-section");setTimeout(n?()=>{t.classList.add("hidden"),e.classList.remove("hidden")}:()=>{e.classList.add("hidden"),t.classList.remove("hidden")},300)}async function Vr(){const n=document.getElementById("forYouProjectsContainer"),e=document.getElementById("forYouGoBackBtn"),t=document.getElementById("forYouTableBody"),r=document.getElementById("forYouGoBackBtn");n.innerHTML="",t.innerHTML="",r.innerHTML=`${be.back}`,(await q.getAllProjects()).forEach(i=>{const a=Sd(i);n.appendChild(a)}),e.addEventListener("click",()=>{Fr(!1)}),await Ed(t),t.querySelectorAll(".tasks-container").forEach(i=>{i.childElementCount===1&&i.firstElementChild.classList.remove("hidden")})}function Sd(n){const e=document.createElement("div");return e.dataset.id=n._id,e.className="flex flex-col gap-3 border-s-2 border-s-primary-500 rounded-sm bg-white md:min-w-64 min-w-48 p-4 cursor-pointer hover:bg-gray-100 shadow-sm border border-gray-200",e.innerHTML=`
    <p class="font-semibold">${n.name}</p>

    <div class="flex flex-col gap-1">
      <div class="flex justify-between">
        <p>Project Type</p>
        <p>${n.projectType}</p>
      </div>

      <div class="flex justify-between">
        <p>Members Assigned</p>
        <p>${n.members.length}</p>
      </div>
      <div></div>
    </div>
  `,e.addEventListener("click",async()=>{localStorage.setItem("selectedProject",n._id),xn(),await W(n._id),Fr(!1),qt(n._id),Bn(),await Ft(),Mn()}),e}async function Ed(n){const e=document.getElementById("forYouTotalTasksCount"),t=(await S.getAllUserTasks()).data.result;e.innerText=t.length;let r={};t.forEach(s=>{r[s.status]||(r[s.status]=[]),r[s.status].push(s)}),Object.keys(r).forEach(s=>{const i=document.createElement("div");i.className="flex flex-col w-full mb-2 hidden",i.id=`${s}-row`,i.innerHTML=`
      <div class="flex items-center justify-between gap-2">
        <p class="my-2 font-semibold text-gray-500 uppercase">${s}</p>
        <div
          class="w-4 rounded-full bg-gray-200 text-center text-[10px]! font-semibold text-black"
          id="${s}-task-count"
        ></div>
      </div>
      <ul
        class="tasks-container flex flex-col gap-1"
        id="${s}-task-container"
      ></ul>
    `,n.appendChild(i)}),await Td(r)}async function Td(n){Object.keys(n).forEach(e=>{const t=document.getElementById(`${e}-task-container`),r=document.getElementById(`${e}-task-count`),s=document.getElementById(`${e}-row`);r.innerText=n[e].length;const i=n[e];i.length&&(s.classList.remove("hidden"),i.forEach(a=>{const l=Cd(a,a.projectId.name);t.appendChild(l)}))})}function Cd(n,e){const t=document.createElement("li"),r=jr(n),s=Na(n);return t.className="bg-white p-2 flex justify-between items-center rounded-sm hover:cursor-pointer hover:bg-primary-50 shadow-sm border border-gray-100",t.innerHTML=`
    <div class="flex items-center justify-start gap-2">
      <div class="flex items-center justify-center">${r}</div>
      <div class="flex flex-col items-start justify-center">
        <div class="flex gap-2">
          <p
            class="smaller-text bg-primary-500 m-auto w-max rounded-sm px-1 text-center font-semibold text-nowrap text-white"
          >
            ${n.key}
          </p>
          <p class="font-semibold">${n.title}</p>
        </div>
        <div class="flex items-center justify-center gap-3">
          <p class="smaller-text font-medium text-gray-500">${e}</p>
        </div>
      </div>
    </div>
    <p class="smaller-text flex gap-2 font-medium">
      ${String(n.priority).charAt(0).toUpperCase()+String(n.priority).slice(1)}${s}
    </p>
  `,t.addEventListener("click",()=>Ve(n._id)),t}const ln=document.querySelector("#sidebar"),Gs=document.querySelector(".toggle-sidebar-btn"),Oe=document.getElementById("projectsDropdown"),Js=document.getElementById("usersMenu"),Me=document.getElementById("usersDropdown"),Qs=document.getElementById("projectsMenu"),Ld=document.getElementById("projectsDropdown"),Id=document.getElementById("toggleInviteForm"),cn=document.getElementById("inviteForm"),Xs=cn.querySelector('input[type="email"]');function Ue(n="toggle"){n==="toggle"?ln.classList.toggle("collapsed"):n=="open"?ln.classList.remove("collapsed"):ln.classList.add("collapsed")}const _d=document.getElementById("logout-btn");_d.addEventListener("click",()=>{const n=localStorage.getItem("theme");localStorage.clear(),localStorage.setItem("theme",n),Aa()});async function Mn(){try{const n=await q.getAllProjects();Oe.innerHTML="",n.length?n.forEach(e=>{const t=document.createElement("li");t.dataset.id=e._id,t.textContent=e.name,t.className="block p-2 text-black hover:bg-primary-100 hover:text-black [&.selected]:bg-primary-200 rounded-md [&.selected]:shadow/25 cursor-pointer",e._id===localStorage.getItem("selectedProject")&&t.classList.toggle("selected"),Oe.appendChild(t)}):(Oe.innerHTML="No project Found",Oe.className="block p-2 text-black")}catch(n){console.error(n.message)}}async function Bn(){let n;if(localStorage.getItem("selectedProject"))n=await q.getProjectMembers(localStorage.getItem("selectedProject"));else return;Me.innerHTML="",n.result.length?n.result.forEach(e=>{const t=document.createElement("li");t.dataset.id=e._id,t.id=e.name,t.innerHTML=`
        <div class="flex cursor-pointer items-center">
          <img
            class="mr-3 aspect-square h-6 w-6 rounded-full object-cover"
            src="${e.profileImage?$.API_BASE_URL+"/uploads/profile/"+e.profileImage:"../../../assets/img/profile.png"}"
          />${e.name}
        </div>
      `,t.className="block p-2 text-black rounded-md",Me.appendChild(t)}):(Me.innerHTML="No user assigned",Me.className="block p-2 text-gray-900 hover:bg-gray-100")}function Od(){Gs.addEventListener("click",e=>{e.stopPropagation(),Ue("toggle")}),document.addEventListener("click",e=>{const t=ln.contains(e.target),r=Gs.contains(e.target);t||r||(Ue("close"),e.stopPropagation())}),Qs.addEventListener("click",e=>{e.stopPropagation(),e.preventDefault(),!Oe.classList.contains("hidden")?Oe.classList.add("hidden"):(Oe.classList.remove("hidden"),Ue("open"))}),Js.addEventListener("click",async e=>{e.stopPropagation(),e.preventDefault(),!Me.classList.contains("hidden")?Me.classList.add("hidden"):(Me.classList.remove("hidden"),Ue("open"))}),document.addEventListener("click",e=>{const t=Qs.contains(e.target)||Oe.contains(e.target),r=Js.contains(e.target)||Me.contains(e.target);t||r||(Oe.classList.add("hidden"),Me.classList.add("hidden"))}),Ld.addEventListener("click",async e=>{const t=e.target;localStorage.setItem("selectedProject",t.dataset.id),[...t.parentElement.children].forEach(r=>{r.classList.remove("selected")}),xn(),await Ft(),Bn(),t.classList.toggle("selected"),await W(localStorage.getItem("selectedProject")),await qt(localStorage.getItem("selectedProject")),Ue("close")}),Id.addEventListener("click",()=>{cn.classList.toggle("hidden"),Ue("open")}),cn.addEventListener("submit",function(e){e.preventDefault();const t=Xs.value.trim();if(t===""){B("please enter a valid emil");return}he.post($.API_BASE_URL+"/invite/email",{email:t,projectId:localStorage.getItem("selectedProject")}).then(r=>{r.data.success?B("Email sent successfully","success"):B("failed to send invitation","error")}).catch(r=>{B("Could not sent invitation"),console.error("Error:",r)}),cn.classList.add("hidden"),Xs.value=""}),document.getElementById("forYouButton").addEventListener("click",async()=>{Fr(!0),Ue("close"),await Vr()})}function Md(){Mn(),Bn(),Od()}function Bd(n){return n.type==="task"?"bg-blue-600":n.type==="story"?"bg-green-600":"bg-red-600"}function jr(n){return n.type==="task"?`${be.task}`:n.type==="story"?`${be.story}`:`${be.bug}`}function Na(n){return n.priority==="low"?`${be.low}`:n.priority==="medium"?`${be.medium}`:n.priority==="high"?`${be.high}`:`${be.critical}`}async function Dd(){const n=localStorage.getItem("inviteToken"),e=localStorage.getItem("access_token");if(n)try{await he.get($.API_BASE_URL+"/invite/join",{params:{token:n},headers:{Authorization:`Bearer ${e}`}}),B("User Joined The Project Successfully","success"),Mn()}catch(t){console.error(t)}finally{localStorage.removeItem("inviteToken")}}function Ad(){let n=[];const e=document.getElementById("search-input-field");document.addEventListener("keydown",t=>{n.push(t.key),n.length===2&&n[0]==="Meta"&&n[1]==="k"&&e.focus()}),document.addEventListener("keyup",()=>{n=[]})}const Wr=document.getElementById("confirmationModal"),$d=document.getElementById("cancelConfirm"),Nd=document.getElementById("confirm"),Rd=document.getElementById("confirmModalMessage");let Ot=null;function Hr(n,e){Rd.textContent=n,Ot=e,Wr.classList.remove("hidden")}$d.addEventListener("click",()=>{Wr.classList.add("hidden"),Ot=null});Nd.addEventListener("click",async()=>{Wr.classList.add("hidden"),Ot&&await Ot(),Ot=null});const Ra=document.getElementById("search-input-field"),Ks=document.getElementById("profileBtn"),Jn=document.getElementById("dropdownMenu"),Qn=document.getElementById("profileImage"),Pd=document.querySelector(".theme-picker"),qd=Pd.querySelectorAll(".theme-option");function Fd(n,e){let t;return function(...r){clearTimeout(t),t=setTimeout(()=>{n.apply(this,r)},e)}}const Vd=Fd(async()=>{await jd()},500);async function jd(){const n=localStorage.getItem("selectedProject");await W(n,"",Ra.value.trim())}async function Pa(n,e="",t=""){return(await S.getTaskByProjectId(n,e,t)).data.result}async function Wd(){Ra.addEventListener("input",e=>{e.preventDefault(),Vd()}),Ks.addEventListener("click",()=>{Jn.classList.toggle("hidden")}),document.addEventListener("click",e=>{!Ks.contains(e.target)&&!Jn.contains(e.target)&&Jn.classList.add("hidden"),e.stopPropagation()}),qd.forEach(e=>{e.addEventListener("click",()=>{localStorage.setItem("theme",e.dataset.value),hi(e.dataset.value)})});const n=await co.getUserInfo();n.profileImage?(Qn.src=`${$.API_BASE_URL}/uploads/profile/${n.profileImage}`,Qn.title=n.email):Qn.src="../../../../assets/img/profile.png"}let qa=document.getElementById("dropdownToggle"),ct=document.getElementById("notificationDropdownMenu");function Hd(){ct.classList.toggle("hidden"),ct.classList.toggle("block")}function Fa(){ct.classList.add("hidden"),ct.classList.remove("block")}qa.addEventListener("click",n=>{n.stopPropagation(),Hd()});ct.querySelectorAll(".dropdown-item").forEach(n=>{n.addEventListener("click",()=>{Fa()})});document.addEventListener("click",n=>{!ct.contains(n.target)&&n.target!==qa&&Fa()});async function wr(n,e="",t=""){const r=localStorage.getItem("selectedProject");if(!n)return;const s=(await q.getProjectById(n)).result,i=await Ud(n,e,t),a=s.columns[s.columns.length-1],l=s.currentSprint?await le.getSprintById(s.currentSprint):null;let o=null;Cr(s);const c=document.getElementById("columns");c.innerHTML="";const u=[];s.columns.forEach(f=>{u.push(...i[f]||[])});const d=[...new Set(u.map(f=>f.assignee).filter(Boolean))];let h={};d.length>0&&(await S.getMultipleUsers(d)).result.forEach(p=>{h[p._id]=p}),s.columns.forEach(f=>{const p=document.createElement("div");p.className="column",p.innerHTML=`
      <div
        class="h-full w-72 shrink-0 overflow-y-auto rounded-lg bg-white pb-4 shadow-md"
      >
        <h2
          class="group sticky top-0 z-10 flex items-center gap-2 bg-white px-4 py-2 text-lg font-semibold text-black uppercase shadow-sm shadow-gray-200"
        >
          <span class="column-name">${f}</span>
          <div
            class="issue-count bg-primary-200 h-5 w-5 rounded-full text-center text-sm text-black"
          ></div>
          <div
            class="add-column-button ml-auto hidden cursor-pointer rounded-full px-2 text-lg/5! group-hover:block hover:bg-gray-100"
          >
            +
          </div>
        </h2>
        <div class="flex h-full flex-col gap-3 p-2 pb-4" id="task-list"></div>
      </div>
    `,(i[f]||[]).forEach(w=>{let z="";if(w.status===s.columns[s.columns.length-1]&&(z="line-through text-gray-400"),s.projectType!=="kanban"&&(!l||!l.result.tasks.includes(w._id)))return;const Z=jr(w),N=Na(w),ee=Bd(w),fe=w.assignee?h[w.assignee]:null,_=document.createElement("div");let te;switch(w.type){case"task":te="border-l-[#165dfc]";break;case"story":te="border-l-[#00a63d]";break;case"bug":te="border-l-[#e7000b]";break}_.dataset._id=w._id,_.className=`task flex flex-col max-w-sm p-3  bg-white rounded-md shadow-sm text-black gap-4 relative cursor-grab border-2 border-gray-100 hover:shadow-md ${te}`,_.innerHTML=`
        <div class="card-header flex items-center justify-between">
          <p
            id="${w.title}-taskId"
            class="task-title ${z} flex-1 cursor-pointer rounded-sm border border-transparent px-1 text-lg font-medium"
          >
            ${w.title}
          </p>
          <div class="menu-button flex flex-row justify-between gap-2">
            <button class="edit-btn w-full cursor-pointer rounded-md p-1">
              <svg
                class="w-5 stroke-black hover:stroke-green-500"
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                <g
                  id="SVGRepo_tracerCarrier"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                ></g>
                <g id="SVGRepo_iconCarrier">
                  <path
                    d="M11 2H9C4 2 2 4 2 9V15C2 20 4 22 9 22H15C20 22 22 20 22 15V13"
                    stroke-width="1.5"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  ></path>
                  <path
                    d="M16.04 3.02001L8.16 10.9C7.86 11.2 7.56 11.79 7.5 12.22L7.07 15.23C6.91 16.32 7.68 17.08 8.77 16.93L11.78 16.5C12.2 16.44 12.79 16.14 13.1 15.84L20.98 7.96001C22.34 6.60001 22.98 5.02001 20.98 3.02001C18.98 1.02001 17.4 1.66001 16.04 3.02001Z"
                    stroke-width="1.5"
                    stroke-miterlimit="10"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  ></path>
                  <path
                    d="M14.91 4.1499C15.58 6.5399 17.45 8.4099 19.85 9.0899"
                    stroke-width="1.5"
                    stroke-miterlimit="10"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  ></path>
                </g>
              </svg>
            </button>
            <button class="delete-btn w-full cursor-pointer rounded-md p-1">
              <svg
                class="w-5 hover:fill-red-500"
                viewBox="0 0 24 24"
                xmlns="http://www.w3.org/2000/svg"
              >
                <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                <g
                  id="SVGRepo_tracerCarrier"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                ></g>
                <g id="SVGRepo_iconCarrier">
                  <path
                    d="M12 2.75C11.0215 2.75 10.1871 3.37503 9.87787 4.24993C9.73983 4.64047 9.31134 4.84517 8.9208 4.70713C8.53026 4.56909 8.32557 4.1406 8.46361 3.75007C8.97804 2.29459 10.3661 1.25 12 1.25C13.634 1.25 15.022 2.29459 15.5365 3.75007C15.6745 4.1406 15.4698 4.56909 15.0793 4.70713C14.6887 4.84517 14.2602 4.64047 14.1222 4.24993C13.813 3.37503 12.9785 2.75 12 2.75Z"
                  ></path>
                  <path
                    d="M2.75 6C2.75 5.58579 3.08579 5.25 3.5 5.25H20.5001C20.9143 5.25 21.2501 5.58579 21.2501 6C21.2501 6.41421 20.9143 6.75 20.5001 6.75H3.5C3.08579 6.75 2.75 6.41421 2.75 6Z"
                  ></path>
                  <path
                    d="M5.91508 8.45011C5.88753 8.03681 5.53015 7.72411 5.11686 7.75166C4.70356 7.77921 4.39085 8.13659 4.41841 8.54989L4.88186 15.5016C4.96735 16.7844 5.03641 17.8205 5.19838 18.6336C5.36678 19.4789 5.6532 20.185 6.2448 20.7384C6.83639 21.2919 7.55994 21.5307 8.41459 21.6425C9.23663 21.75 10.2751 21.75 11.5607 21.75H12.4395C13.7251 21.75 14.7635 21.75 15.5856 21.6425C16.4402 21.5307 17.1638 21.2919 17.7554 20.7384C18.347 20.185 18.6334 19.4789 18.8018 18.6336C18.9637 17.8205 19.0328 16.7844 19.1183 15.5016L19.5818 8.54989C19.6093 8.13659 19.2966 7.77921 18.8833 7.75166C18.47 7.72411 18.1126 8.03681 18.0851 8.45011L17.6251 15.3492C17.5353 16.6971 17.4712 17.6349 17.3307 18.3405C17.1943 19.025 17.004 19.3873 16.7306 19.6431C16.4572 19.8988 16.083 20.0647 15.391 20.1552C14.6776 20.2485 13.7376 20.25 12.3868 20.25H11.6134C10.2626 20.25 9.32255 20.2485 8.60915 20.1552C7.91715 20.0647 7.54299 19.8988 7.26957 19.6431C6.99616 19.3873 6.80583 19.025 6.66948 18.3405C6.52891 17.6349 6.46488 16.6971 6.37503 15.3492L5.91508 8.45011Z"
                  ></path>
                  <path
                    d="M9.42546 10.2537C9.83762 10.2125 10.2051 10.5132 10.2464 10.9254L10.7464 15.9254C10.7876 16.3375 10.4869 16.7051 10.0747 16.7463C9.66256 16.7875 9.29502 16.4868 9.25381 16.0746L8.75381 11.0746C8.71259 10.6625 9.0133 10.2949 9.42546 10.2537Z"
                  ></path>
                  <path
                    d="M15.2464 11.0746C15.2876 10.6625 14.9869 10.2949 14.5747 10.2537C14.1626 10.2125 13.795 10.5132 13.7538 10.9254L13.2538 15.9254C13.2126 16.3375 13.5133 16.7051 13.9255 16.7463C14.3376 16.7875 14.7051 16.4868 14.7464 16.0746L15.2464 11.0746Z"
                  ></path>
                </g>
              </svg>
            </button>
          </div>
        </div>
        <div
          class="card-footer flex items-center justify-between text-sm text-gray-400"
        >
          <div class="flex items-center gap-2">
            <span class="">${Z}</span>
            <span
              class="type-tag ${ee} rounded-sm p-1 text-xs font-semibold text-white"
              >${w.key}</span
            >
            <span class="">${N}</span>
          </div>
          <div class="flex items-center gap-2">
            <div class="flex flex-row">
              <svg
                width="20px"
                height="20px"
                viewBox="0 0 48 48"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
                class="attachmentIcon hidden"
              >
                <g id="attachment">
                  <g id="attachment_2">
                    <path
                      id="Combined Shape"
                      fill-rule="evenodd"
                      clip-rule="evenodd"
                      d="M26.4252 29.1104L39.5729 15.9627C42.3094 13.2262 42.3094 8.78901 39.5729 6.05248C36.8364 3.31601 32.4015 3.31601 29.663 6.05218L16.4487 19.2665L16.4251 19.2909L8.92989 26.7861C5.02337 30.6926 5.02337 37.0238 8.92989 40.9303C12.8344 44.8348 19.1656 44.8348 23.0701 40.9303L41.7835 22.2169C42.174 21.8264 42.174 21.1933 41.7835 20.8027C41.3929 20.4122 40.7598 20.4122 40.3693 20.8027L21.6559 39.5161C18.5324 42.6396 13.4676 42.6396 10.3441 39.5161C7.21863 36.3906 7.21863 31.3258 10.3441 28.2003L30.1421 8.4023L30.1657 8.37788L31.0769 7.4667C33.0341 5.51117 36.2032 5.51117 38.1587 7.4667C40.1142 9.42217 40.1142 12.593 38.1587 14.5485L28.282 24.4252C28.2748 24.4319 28.2678 24.4388 28.2608 24.4458L25.0064 27.7008L24.9447 27.7625C24.9437 27.7635 24.9427 27.7644 24.9418 27.7654L17.3988 35.3097C16.6139 36.0934 15.3401 36.0934 14.5545 35.3091C13.7714 34.5247 13.7714 33.2509 14.5557 32.4653L24.479 22.544C24.8696 22.1535 24.8697 21.5203 24.4792 21.1298C24.0887 20.7392 23.4555 20.7391 23.065 21.1296L13.141 31.0516C11.5766 32.6187 11.5766 35.1569 13.1403 36.7233C14.7079 38.2882 17.2461 38.2882 18.8125 36.7245L26.3589 29.1767L26.4252 29.1104Z"
                      fill="#000000"
                    />
                  </g>
                </g>
              </svg>
              <svg
                width="20px"
                height="20px"
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
                class="subtaskIcon ml-2 hidden"
              >
                <rect
                  x="16"
                  y="9"
                  width="4"
                  height="4"
                  rx="2"
                  transform="rotate(90 16 9)"
                  stroke="#33363F"
                  stroke-width="1"
                />
                <rect
                  x="20"
                  y="17"
                  width="4"
                  height="4"
                  rx="2"
                  transform="rotate(90 20 17)"
                  stroke="#33363F"
                  stroke-width="1"
                />
                <path
                  d="M5 4V15C5 16.8856 5 17.8284 5.58579 18.4142C6.17157 19 7.11438 19 9 19H16"
                  stroke="#33363F"
                  stroke-width="1"
                />
                <path
                  d="M5 7V7C5 8.88562 5 9.82843 5.58579 10.4142C6.17157 11 7.11438 11 9 11H12"
                  stroke="#33363F"
                  stroke-width="1"
                />
              </svg>
            </div>
            <span
              class="user-avatar flex h-8 w-8 cursor-pointer items-center justify-center rounded-full bg-blue-50 font-semibold text-white"
            >
              <img
                src="${fe?.profileImage?$.API_BASE_URL+"/uploads/profile/"+fe.profileImage:"../../../assets/img/profile.png"}"
                class="aspect-square h-8 w-8 rounded-full object-cover"
                title="${fe?.name||"Unassigned"}"
              />
            </span>
            <div
              class="avatar-dropdown absolute right-2.5 -bottom-8 hidden rounded-sm"
            >
              <ul
                class="assignee-list relative z-1 rounded-sm border border-gray-200 bg-white shadow-md"
              ></ul>
            </div>
          </div>
        </div>
      `;const g=_.querySelector(".attachmentIcon"),F=_.querySelector(".subtaskIcon");w.attachments.length&&g.classList.remove("hidden"),w.subTask.length&&F.classList.remove("hidden");const se=_.querySelector(".user-avatar"),Q=_.querySelector(".avatar-dropdown"),Ke=_.querySelector(".assignee-list");let je=[],Se=null,gt=null;async function jt(R){try{je=(await q.getProjectMembers(r)).result,R.innerHTML="",je.forEach(Ce=>{const Wt=document.createElement("li");Wt.className="min-w-24 hover:bg-gray-100 cursor-pointer p-2",Wt.textContent=Ce.name,Wt.dataset.id=Ce._id,R.appendChild(Wt)})}catch(Ae){console.error("Error loading users:",Ae)}}se.addEventListener("click",async()=>{Q.classList.toggle("hidden"),Q.classList.contains("hidden")||await jt(Ke)}),Ke.addEventListener("click",async R=>{if(R.target.tagName==="LI"){if(Se=R.target.dataset.id,gt=je.find(Ce=>Ce._id==Se),gt){const Ce=se.querySelector("img");gt.profileImage?Ce.src=`${$.API_BASE_URL}/uploads/profile/${gt.profileImage}`:Ce.src="../../../assets/img/profile.png"}const Ae=_.dataset._id;await S.updateTask(Ae,{assignee:Se}),Q.classList.add("hidden")}}),document.addEventListener("click",R=>{const Ae=se.contains(R.target),Ce=Q.contains(R.target);!Ae&&!Ce&&Q.classList.add("hidden")}),_.setAttribute("draggable","true"),_.addEventListener("dragstart",R=>{const Ae=R.target.parentElement.parentElement;R.dataTransfer.setData("taskId",w._id),R.dataTransfer.effectAllowed="move",o=Ae,_.classList.remove("cursor-grab"),_.classList.add("cursor-grabbing")}),_.addEventListener("dragend",()=>{_.classList.remove("cursor-grabbing"),_.classList.add("cursor-grab")});const x=_.querySelector(".card-header > p");_.addEventListener("click",R=>{R.target===_&&Ve(w._id)}),x.addEventListener("click",()=>Ve(w._id)),_.querySelector(".edit-btn").addEventListener("click",()=>{Wa(w._id)}),_.querySelector(".delete-btn").addEventListener("click",R=>{R.stopPropagation(),Hr("Are you sure you want to delete this task?",async()=>{await S.deleteTask(w._id),await W(localStorage.getItem("selectedProject"))})}),p.querySelector("#task-list").appendChild(_)});const v=p.querySelector("#task-list");v.addEventListener("dragover",w=>w.preventDefault()),v.addEventListener("drop",async w=>{w.preventDefault();const z=w.dataTransfer.getData("taskId"),Z=document.querySelector(`[data-_id="${z}"]`),N=Z.querySelector(".task-title");f===a?N.classList.add("line-through","text-gray-400"):N.classList.remove("line-through","text-gray-400"),v.appendChild(Z),S.updateTask(z,{status:f}).catch(ee=>{console.error("Failed to update task status",ee)}),p.querySelector(".issue-count").innerText=+p.querySelector(".issue-count").innerText+1,o.querySelector(".issue-count").innerText=+o.querySelector(".issue-count").innerText-1,await Vr()});const E=document.createElement("div");E.className="new-column flex gap-0.5 mt-1 hidden",E.innerHTML=`<input placeholder="Enter column name..." class="bg-white border px-2 border-gray-300 h-8 rounded-sm"></input> 
    `,p.querySelector(".add-column-button").addEventListener("click",()=>E.classList.toggle("hidden")),document.addEventListener("click",w=>{w.stopPropagation(),!w.target.classList.contains("add-column-button")&&!w.target.classList.contains("new-column")&&!w.target.parentElement.classList.contains("new-column")&&E.classList.add("hidden")}),E.querySelector("input").addEventListener("keydown",async w=>{if(w.key!=="Enter")return;if(s.columns.includes(w.target.value.toLowerCase())){B("Column with given name already exist","error");return}const Z=c.querySelectorAll(".column, .new-column:not(.hidden)"),N=Array.from(Z).map(ee=>ee.classList.contains("column")?ee.querySelector(".column-name").textContent:ee.querySelector("input").value.toLowerCase());await q.updateProject(localStorage.getItem("selectedProject"),{columns:N}),W(localStorage.getItem("selectedProject"))}),c.appendChild(p),c.appendChild(E),p.querySelector(".issue-count").innerText=v.childElementCount,p.querySelector(".add-column-button").addEventListener("click",()=>{})})}async function Ud(n,e,t){if(!n)return;const r=(await q.getProjectById(n)).result,s={};return r.columns.forEach(a=>s[a]=[]),(await Pa(n,e,t)).forEach(a=>s[a.status].push(a)),s}const ei=document.getElementById("empty-list-container"),Qt=document.getElementById("table-body");async function Va(n,e="",t=""){Qt.innerHTML="";const r=(await q.getProjectById(n)).result,s=await Pa(n,e,t),i=document.getElementById("list-loader");if(Cr(r),!s.length)ei.classList.remove("hidden"),i.classList.add("hidden");else{ei.classList.add("hidden");let a=[];for(const o of s)a.push(Ye(o,"list",r.projectType,null));i.classList.contains("hidden")&&i.classList.remove("hidden"),Qt.classList.add("hidden");const l=await Promise.all(a);i.classList.add("hidden"),Qt.classList.remove("hidden"),l.forEach(o=>{Qt.append(o)})}}async function W(n,e="",t=""){const r=localStorage.getItem("selectedTab");if(r==="board")await wr(n,e,t);else if(r==="list")await Va(n,e,t);else{if(t&&e||t||e)return;await mt(n,e,t)}}const zd=document.getElementById("close-update-task-modal"),P=document.getElementById("update-task-modal"),Zd=document.getElementById("edit-task-form"),Yd=document.querySelector(".drawer-backdrop");let ja=null;Zd.addEventListener("submit",async n=>{n.preventDefault();const e={title:P.querySelector("#title").value,storyPoint:P.querySelector("#story-point-update").value,description:P.querySelector("#description").value,type:P.querySelector("#type").value,priority:P.querySelector("#priority").value,status:P.querySelector("#status").value,tags:P.querySelector("#tags").value.split(",").map(t=>t.trim()),dueDate:P.querySelector("#dueDate").value,assignee:P.querySelector("#assignee").value==="null"?null:P.querySelector("#assignee").value};try{await S.updateTask(ja,e),B("Task Updated Successfully","success"),P.classList.add("hidden"),await W(localStorage.getItem("selectedProject")),setTimeout(()=>{const t=document.getElementById("task-side-drawer");t.classList.add("translate-x-full"),t.classList.remove("transform-none"),Yd.classList.add("hidden")},100)}catch(t){console.error(t)}});zd.addEventListener("click",()=>{P.classList.add("hidden")});async function Wa(n){ja=n;try{const t=(await S.getTaskById(n)).data.result,r=P.querySelector("#status");if(P.querySelector("#title").value=t.title,P.querySelector("#story-point-update").value=t.storyPoint,P.querySelector("#description").value=t.description,P.querySelector("#type").value=t.type,P.querySelector("#priority").value=t.priority,await ka(r,t.status),P.querySelector("#tags").value=t.tags?.join(", ")||"",t.dueDate){const a=new Date(t.dueDate).toISOString().slice(0,10);P.querySelector("#dueDate").value=a}else P.querySelector("#dueDate").value="";const s=P.querySelector("#assignee");await wa(s,t.assignee),P.classList.remove("hidden")}catch(e){console.error("Failed to load task:",e)}}function Gd(n){const e=document.getElementById("attachmentsList");if(e.innerHTML="",!n.attachments||n.attachments.length===0){e.innerHTML=`
      <p class="text-gray-400 text-sm">No attachments</p>
    `;return}n.attachments.forEach(t=>{const r=`${$.API_BASE_URL}/uploads/attachments/${t}`,s=document.createElement("a");s.href=r,s.target="_blank",s.className="w-full no-scrollbar hover:underline text-primary-900 flex hover:text-primary-700 gap-2",s.innerHTML=`
      <svg viewBox="0 0 24 24" fill="none" class="stroke-primary-900 size-6" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M19 9V17.8C19 18.9201 19 19.4802 18.782 19.908C18.5903 20.2843 18.2843 20.5903 17.908 20.782C17.4802 21 16.9201 21 15.8 21H8.2C7.07989 21 6.51984 21 6.09202 20.782C5.71569 20.5903 5.40973 20.2843 5.21799 19.908C5 19.4802 5 18.9201 5 17.8V6.2C5 5.07989 5 4.51984 5.21799 4.09202C5.40973 3.71569 5.71569 3.40973 6.09202 3.21799C6.51984 3 7.0799 3 8.2 3H13M19 9L13 3M19 9H14C13.4477 9 13 8.55228 13 8V3" stroke="inherit" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path> </g></svg>      
      <span class="truncate">${t}</span>
    `,e.appendChild(s)})}function Ur(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var Xe=Ur();function Ha(n){Xe=n}var Mt={exec:()=>null};function I(n,e=""){let t=typeof n=="string"?n:n.source,r={replace:(s,i)=>{let a=typeof i=="string"?i:i.source;return a=a.replace(K.caret,"$1"),t=t.replace(s,a),r},getRegex:()=>new RegExp(t,e)};return r}var Jd=(()=>{try{return!!new RegExp("(?<=1)(?<!1)")}catch{return!1}})(),K={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] +\S/,listReplaceTask:/^\[[ xX]\] +/,listTaskCheckbox:/\[[ xX]\]/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:n=>new RegExp(`^( {0,3}${n})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}#`),htmlBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}<(?:[a-z].*>|!--)`,"i")},Qd=/^(?:[ \t]*(?:\n|$))+/,Xd=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,Kd=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Vt=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,eh=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,zr=/(?:[*+-]|\d{1,9}[.)])/,Ua=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,za=I(Ua).replace(/bull/g,zr).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),th=I(Ua).replace(/bull/g,zr).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),Zr=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,nh=/^[^\n]+/,Yr=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,rh=I(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",Yr).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),sh=I(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,zr).getRegex(),Dn="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Gr=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,ih=I("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",Gr).replace("tag",Dn).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Za=I(Zr).replace("hr",Vt).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Dn).getRegex(),ah=I(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Za).getRegex(),Jr={blockquote:ah,code:Xd,def:rh,fences:Kd,heading:eh,hr:Vt,html:ih,lheading:za,list:sh,newline:Qd,paragraph:Za,table:Mt,text:nh},ti=I("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Vt).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Dn).getRegex(),oh={...Jr,lheading:th,table:ti,paragraph:I(Zr).replace("hr",Vt).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",ti).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Dn).getRegex()},lh={...Jr,html:I(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Gr).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Mt,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:I(Zr).replace("hr",Vt).replace("heading",` *#{1,6} *[^
]`).replace("lheading",za).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},ch=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,uh=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,Ya=/^( {2,}|\\)\n(?!\s*$)/,dh=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,An=/[\p{P}\p{S}]/u,Qr=/[\s\p{P}\p{S}]/u,Ga=/[^\s\p{P}\p{S}]/u,hh=I(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,Qr).getRegex(),Ja=/(?!~)[\p{P}\p{S}]/u,fh=/(?!~)[\s\p{P}\p{S}]/u,ph=/(?:[^\s\p{P}\p{S}]|~)/u,mh=I(/link|precode-code|html/,"g").replace("link",/\[(?:[^\[\]`]|(?<a>`+)[^`]+\k<a>(?!`))*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)/).replace("precode-",Jd?"(?<!`)()":"(^^|[^`])").replace("code",/(?<b>`+)[^`]+\k<b>(?!`)/).replace("html",/<(?! )[^<>]*?>/).getRegex(),Qa=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,gh=I(Qa,"u").replace(/punct/g,An).getRegex(),yh=I(Qa,"u").replace(/punct/g,Ja).getRegex(),Xa="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",wh=I(Xa,"gu").replace(/notPunctSpace/g,Ga).replace(/punctSpace/g,Qr).replace(/punct/g,An).getRegex(),kh=I(Xa,"gu").replace(/notPunctSpace/g,ph).replace(/punctSpace/g,fh).replace(/punct/g,Ja).getRegex(),bh=I("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,Ga).replace(/punctSpace/g,Qr).replace(/punct/g,An).getRegex(),vh=I(/\\(punct)/,"gu").replace(/punct/g,An).getRegex(),xh=I(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),Sh=I(Gr).replace("(?:-->|$)","-->").getRegex(),Eh=I("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",Sh).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),yn=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`+[^`]*?`+(?!`)|[^\[\]\\`])*?/,Th=I(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",yn).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Ka=I(/^!?\[(label)\]\[(ref)\]/).replace("label",yn).replace("ref",Yr).getRegex(),eo=I(/^!?\[(ref)\](?:\[\])?/).replace("ref",Yr).getRegex(),Ch=I("reflink|nolink(?!\\()","g").replace("reflink",Ka).replace("nolink",eo).getRegex(),ni=/[hH][tT][tT][pP][sS]?|[fF][tT][pP]/,Xr={_backpedal:Mt,anyPunctuation:vh,autolink:xh,blockSkip:mh,br:Ya,code:uh,del:Mt,emStrongLDelim:gh,emStrongRDelimAst:wh,emStrongRDelimUnd:bh,escape:ch,link:Th,nolink:eo,punctuation:hh,reflink:Ka,reflinkSearch:Ch,tag:Eh,text:dh,url:Mt},Lh={...Xr,link:I(/^!?\[(label)\]\((.*?)\)/).replace("label",yn).getRegex(),reflink:I(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",yn).getRegex()},kr={...Xr,emStrongRDelimAst:kh,emStrongLDelim:yh,url:I(/^((?:protocol):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("protocol",ni).replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:I(/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|protocol:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/).replace("protocol",ni).getRegex()},Ih={...kr,br:I(Ya).replace("{2,}","*").getRegex(),text:I(kr.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Xt={normal:Jr,gfm:oh,pedantic:lh},vt={normal:Xr,gfm:kr,breaks:Ih,pedantic:Lh},_h={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ri=n=>_h[n];function Ie(n,e){if(e){if(K.escapeTest.test(n))return n.replace(K.escapeReplace,ri)}else if(K.escapeTestNoEncode.test(n))return n.replace(K.escapeReplaceNoEncode,ri);return n}function si(n){try{n=encodeURI(n).replace(K.percentDecode,"%")}catch{return null}return n}function ii(n,e){let t=n.replace(K.findPipe,(i,a,l)=>{let o=!1,c=a;for(;--c>=0&&l[c]==="\\";)o=!o;return o?"|":" |"}),r=t.split(K.splitPipe),s=0;if(r[0].trim()||r.shift(),r.length>0&&!r.at(-1)?.trim()&&r.pop(),e)if(r.length>e)r.splice(e);else for(;r.length<e;)r.push("");for(;s<r.length;s++)r[s]=r[s].trim().replace(K.slashPipe,"|");return r}function xt(n,e,t){let r=n.length;if(r===0)return"";let s=0;for(;s<r&&n.charAt(r-s-1)===e;)s++;return n.slice(0,r-s)}function Oh(n,e){if(n.indexOf(e[1])===-1)return-1;let t=0;for(let r=0;r<n.length;r++)if(n[r]==="\\")r++;else if(n[r]===e[0])t++;else if(n[r]===e[1]&&(t--,t<0))return r;return t>0?-2:-1}function ai(n,e,t,r,s){let i=e.href,a=e.title||null,l=n[1].replace(s.other.outputLinkReplace,"$1");r.state.inLink=!0;let o={type:n[0].charAt(0)==="!"?"image":"link",raw:t,href:i,title:a,text:l,tokens:r.inlineTokens(l)};return r.state.inLink=!1,o}function Mh(n,e,t){let r=n.match(t.other.indentCodeCompensation);if(r===null)return e;let s=r[1];return e.split(`
`).map(i=>{let a=i.match(t.other.beginningSpace);if(a===null)return i;let[l]=a;return l.length>=s.length?i.slice(s.length):i}).join(`
`)}var wn=class{options;rules;lexer;constructor(n){this.options=n||Xe}space(n){let e=this.rules.block.newline.exec(n);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(n){let e=this.rules.block.code.exec(n);if(e){let t=e[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?t:xt(t,`
`)}}}fences(n){let e=this.rules.block.fences.exec(n);if(e){let t=e[0],r=Mh(t,e[3]||"",this.rules);return{type:"code",raw:t,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:r}}}heading(n){let e=this.rules.block.heading.exec(n);if(e){let t=e[2].trim();if(this.rules.other.endingHash.test(t)){let r=xt(t,"#");(this.options.pedantic||!r||this.rules.other.endingSpaceChar.test(r))&&(t=r.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:t,tokens:this.lexer.inline(t)}}}hr(n){let e=this.rules.block.hr.exec(n);if(e)return{type:"hr",raw:xt(e[0],`
`)}}blockquote(n){let e=this.rules.block.blockquote.exec(n);if(e){let t=xt(e[0],`
`).split(`
`),r="",s="",i=[];for(;t.length>0;){let a=!1,l=[],o;for(o=0;o<t.length;o++)if(this.rules.other.blockquoteStart.test(t[o]))l.push(t[o]),a=!0;else if(!a)l.push(t[o]);else break;t=t.slice(o);let c=l.join(`
`),u=c.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");r=r?`${r}
${c}`:c,s=s?`${s}
${u}`:u;let d=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(u,i,!0),this.lexer.state.top=d,t.length===0)break;let h=i.at(-1);if(h?.type==="code")break;if(h?.type==="blockquote"){let f=h,p=f.raw+`
`+t.join(`
`),b=this.blockquote(p);i[i.length-1]=b,r=r.substring(0,r.length-f.raw.length)+b.raw,s=s.substring(0,s.length-f.text.length)+b.text;break}else if(h?.type==="list"){let f=h,p=f.raw+`
`+t.join(`
`),b=this.list(p);i[i.length-1]=b,r=r.substring(0,r.length-h.raw.length)+b.raw,s=s.substring(0,s.length-f.raw.length)+b.raw,t=p.substring(i.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:r,tokens:i,text:s}}}list(n){let e=this.rules.block.list.exec(n);if(e){let t=e[1].trim(),r=t.length>1,s={type:"list",raw:"",ordered:r,start:r?+t.slice(0,-1):"",loose:!1,items:[]};t=r?`\\d{1,9}\\${t.slice(-1)}`:`\\${t}`,this.options.pedantic&&(t=r?t:"[*+-]");let i=this.rules.other.listItemRegex(t),a=!1;for(;n;){let o=!1,c="",u="";if(!(e=i.exec(n))||this.rules.block.hr.test(n))break;c=e[0],n=n.substring(c.length);let d=e[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,b=>" ".repeat(3*b.length)),h=n.split(`
`,1)[0],f=!d.trim(),p=0;if(this.options.pedantic?(p=2,u=d.trimStart()):f?p=e[1].length+1:(p=e[2].search(this.rules.other.nonSpaceChar),p=p>4?1:p,u=d.slice(p),p+=e[1].length),f&&this.rules.other.blankLine.test(h)&&(c+=h+`
`,n=n.substring(h.length+1),o=!0),!o){let b=this.rules.other.nextBulletRegex(p),v=this.rules.other.hrRegex(p),E=this.rules.other.fencesBeginRegex(p),w=this.rules.other.headingBeginRegex(p),z=this.rules.other.htmlBeginRegex(p);for(;n;){let Z=n.split(`
`,1)[0],N;if(h=Z,this.options.pedantic?(h=h.replace(this.rules.other.listReplaceNesting,"  "),N=h):N=h.replace(this.rules.other.tabCharGlobal,"    "),E.test(h)||w.test(h)||z.test(h)||b.test(h)||v.test(h))break;if(N.search(this.rules.other.nonSpaceChar)>=p||!h.trim())u+=`
`+N.slice(p);else{if(f||d.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||E.test(d)||w.test(d)||v.test(d))break;u+=`
`+h}!f&&!h.trim()&&(f=!0),c+=Z+`
`,n=n.substring(Z.length+1),d=N.slice(p)}}s.loose||(a?s.loose=!0:this.rules.other.doubleBlankLine.test(c)&&(a=!0)),s.items.push({type:"list_item",raw:c,task:!!this.options.gfm&&this.rules.other.listIsTask.test(u),loose:!1,text:u,tokens:[]}),s.raw+=c}let l=s.items.at(-1);if(l)l.raw=l.raw.trimEnd(),l.text=l.text.trimEnd();else return;s.raw=s.raw.trimEnd();for(let o of s.items){if(this.lexer.state.top=!1,o.tokens=this.lexer.blockTokens(o.text,[]),o.task){if(o.text=o.text.replace(this.rules.other.listReplaceTask,""),o.tokens[0]?.type==="text"||o.tokens[0]?.type==="paragraph"){o.tokens[0].raw=o.tokens[0].raw.replace(this.rules.other.listReplaceTask,""),o.tokens[0].text=o.tokens[0].text.replace(this.rules.other.listReplaceTask,"");for(let u=this.lexer.inlineQueue.length-1;u>=0;u--)if(this.rules.other.listIsTask.test(this.lexer.inlineQueue[u].src)){this.lexer.inlineQueue[u].src=this.lexer.inlineQueue[u].src.replace(this.rules.other.listReplaceTask,"");break}}let c=this.rules.other.listTaskCheckbox.exec(o.raw);if(c){let u={type:"checkbox",raw:c[0]+" ",checked:c[0]!=="[ ]"};o.checked=u.checked,s.loose?o.tokens[0]&&["paragraph","text"].includes(o.tokens[0].type)&&"tokens"in o.tokens[0]&&o.tokens[0].tokens?(o.tokens[0].raw=u.raw+o.tokens[0].raw,o.tokens[0].text=u.raw+o.tokens[0].text,o.tokens[0].tokens.unshift(u)):o.tokens.unshift({type:"paragraph",raw:u.raw,text:u.raw,tokens:[u]}):o.tokens.unshift(u)}}if(!s.loose){let c=o.tokens.filter(d=>d.type==="space"),u=c.length>0&&c.some(d=>this.rules.other.anyLine.test(d.raw));s.loose=u}}if(s.loose)for(let o of s.items){o.loose=!0;for(let c of o.tokens)c.type==="text"&&(c.type="paragraph")}return s}}html(n){let e=this.rules.block.html.exec(n);if(e)return{type:"html",block:!0,raw:e[0],pre:e[1]==="pre"||e[1]==="script"||e[1]==="style",text:e[0]}}def(n){let e=this.rules.block.def.exec(n);if(e){let t=e[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),r=e[2]?e[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",s=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:t,raw:e[0],href:r,title:s}}}table(n){let e=this.rules.block.table.exec(n);if(!e||!this.rules.other.tableDelimiter.test(e[2]))return;let t=ii(e[1]),r=e[2].replace(this.rules.other.tableAlignChars,"").split("|"),s=e[3]?.trim()?e[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],i={type:"table",raw:e[0],header:[],align:[],rows:[]};if(t.length===r.length){for(let a of r)this.rules.other.tableAlignRight.test(a)?i.align.push("right"):this.rules.other.tableAlignCenter.test(a)?i.align.push("center"):this.rules.other.tableAlignLeft.test(a)?i.align.push("left"):i.align.push(null);for(let a=0;a<t.length;a++)i.header.push({text:t[a],tokens:this.lexer.inline(t[a]),header:!0,align:i.align[a]});for(let a of s)i.rows.push(ii(a,i.header.length).map((l,o)=>({text:l,tokens:this.lexer.inline(l),header:!1,align:i.align[o]})));return i}}lheading(n){let e=this.rules.block.lheading.exec(n);if(e)return{type:"heading",raw:e[0],depth:e[2].charAt(0)==="="?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(n){let e=this.rules.block.paragraph.exec(n);if(e){let t=e[1].charAt(e[1].length-1)===`
`?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:t,tokens:this.lexer.inline(t)}}}text(n){let e=this.rules.block.text.exec(n);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(n){let e=this.rules.inline.escape.exec(n);if(e)return{type:"escape",raw:e[0],text:e[1]}}tag(n){let e=this.rules.inline.tag.exec(n);if(e)return!this.lexer.state.inLink&&this.rules.other.startATag.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(n){let e=this.rules.inline.link.exec(n);if(e){let t=e[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(t)){if(!this.rules.other.endAngleBracket.test(t))return;let i=xt(t.slice(0,-1),"\\");if((t.length-i.length)%2===0)return}else{let i=Oh(e[2],"()");if(i===-2)return;if(i>-1){let a=(e[0].indexOf("!")===0?5:4)+e[1].length+i;e[2]=e[2].substring(0,i),e[0]=e[0].substring(0,a).trim(),e[3]=""}}let r=e[2],s="";if(this.options.pedantic){let i=this.rules.other.pedanticHrefTitle.exec(r);i&&(r=i[1],s=i[3])}else s=e[3]?e[3].slice(1,-1):"";return r=r.trim(),this.rules.other.startAngleBracket.test(r)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(t)?r=r.slice(1):r=r.slice(1,-1)),ai(e,{href:r&&r.replace(this.rules.inline.anyPunctuation,"$1"),title:s&&s.replace(this.rules.inline.anyPunctuation,"$1")},e[0],this.lexer,this.rules)}}reflink(n,e){let t;if((t=this.rules.inline.reflink.exec(n))||(t=this.rules.inline.nolink.exec(n))){let r=(t[2]||t[1]).replace(this.rules.other.multipleSpaceGlobal," "),s=e[r.toLowerCase()];if(!s){let i=t[0].charAt(0);return{type:"text",raw:i,text:i}}return ai(t,s,t[0],this.lexer,this.rules)}}emStrong(n,e,t=""){let r=this.rules.inline.emStrongLDelim.exec(n);if(!(!r||r[3]&&t.match(this.rules.other.unicodeAlphaNumeric))&&(!(r[1]||r[2])||!t||this.rules.inline.punctuation.exec(t))){let s=[...r[0]].length-1,i,a,l=s,o=0,c=r[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(c.lastIndex=0,e=e.slice(-1*n.length+s);(r=c.exec(e))!=null;){if(i=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!i)continue;if(a=[...i].length,r[3]||r[4]){l+=a;continue}else if((r[5]||r[6])&&s%3&&!((s+a)%3)){o+=a;continue}if(l-=a,l>0)continue;a=Math.min(a,a+l+o);let u=[...r[0]][0].length,d=n.slice(0,s+r.index+u+a);if(Math.min(s,a)%2){let f=d.slice(1,-1);return{type:"em",raw:d,text:f,tokens:this.lexer.inlineTokens(f)}}let h=d.slice(2,-2);return{type:"strong",raw:d,text:h,tokens:this.lexer.inlineTokens(h)}}}}codespan(n){let e=this.rules.inline.code.exec(n);if(e){let t=e[2].replace(this.rules.other.newLineCharGlobal," "),r=this.rules.other.nonSpaceChar.test(t),s=this.rules.other.startingSpaceChar.test(t)&&this.rules.other.endingSpaceChar.test(t);return r&&s&&(t=t.substring(1,t.length-1)),{type:"codespan",raw:e[0],text:t}}}br(n){let e=this.rules.inline.br.exec(n);if(e)return{type:"br",raw:e[0]}}del(n){let e=this.rules.inline.del.exec(n);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(n){let e=this.rules.inline.autolink.exec(n);if(e){let t,r;return e[2]==="@"?(t=e[1],r="mailto:"+t):(t=e[1],r=t),{type:"link",raw:e[0],text:t,href:r,tokens:[{type:"text",raw:t,text:t}]}}}url(n){let e;if(e=this.rules.inline.url.exec(n)){let t,r;if(e[2]==="@")t=e[0],r="mailto:"+t;else{let s;do s=e[0],e[0]=this.rules.inline._backpedal.exec(e[0])?.[0]??"";while(s!==e[0]);t=e[0],e[1]==="www."?r="http://"+e[0]:r=e[0]}return{type:"link",raw:e[0],text:t,href:r,tokens:[{type:"text",raw:t,text:t}]}}}inlineText(n){let e=this.rules.inline.text.exec(n);if(e){let t=this.lexer.state.inRawBlock;return{type:"text",raw:e[0],text:e[0],escaped:t}}}},ye=class br{tokens;options;state;inlineQueue;tokenizer;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Xe,this.options.tokenizer=this.options.tokenizer||new wn,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let t={other:K,block:Xt.normal,inline:vt.normal};this.options.pedantic?(t.block=Xt.pedantic,t.inline=vt.pedantic):this.options.gfm&&(t.block=Xt.gfm,this.options.breaks?t.inline=vt.breaks:t.inline=vt.gfm),this.tokenizer.rules=t}static get rules(){return{block:Xt,inline:vt}}static lex(e,t){return new br(t).lex(e)}static lexInline(e,t){return new br(t).inlineTokens(e)}lex(e){e=e.replace(K.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){let r=this.inlineQueue[t];this.inlineTokens(r.src,r.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[],r=!1){for(this.options.pedantic&&(e=e.replace(K.tabCharGlobal,"    ").replace(K.spaceLine,""));e;){let s;if(this.options.extensions?.block?.some(a=>(s=a.call({lexer:this},e,t))?(e=e.substring(s.raw.length),t.push(s),!0):!1))continue;if(s=this.tokenizer.space(e)){e=e.substring(s.raw.length);let a=t.at(-1);s.raw.length===1&&a!==void 0?a.raw+=`
`:t.push(s);continue}if(s=this.tokenizer.code(e)){e=e.substring(s.raw.length);let a=t.at(-1);a?.type==="paragraph"||a?.type==="text"?(a.raw+=(a.raw.endsWith(`
`)?"":`
`)+s.raw,a.text+=`
`+s.text,this.inlineQueue.at(-1).src=a.text):t.push(s);continue}if(s=this.tokenizer.fences(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.heading(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.hr(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.blockquote(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.list(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.html(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.def(e)){e=e.substring(s.raw.length);let a=t.at(-1);a?.type==="paragraph"||a?.type==="text"?(a.raw+=(a.raw.endsWith(`
`)?"":`
`)+s.raw,a.text+=`
`+s.raw,this.inlineQueue.at(-1).src=a.text):this.tokens.links[s.tag]||(this.tokens.links[s.tag]={href:s.href,title:s.title},t.push(s));continue}if(s=this.tokenizer.table(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.lheading(e)){e=e.substring(s.raw.length),t.push(s);continue}let i=e;if(this.options.extensions?.startBlock){let a=1/0,l=e.slice(1),o;this.options.extensions.startBlock.forEach(c=>{o=c.call({lexer:this},l),typeof o=="number"&&o>=0&&(a=Math.min(a,o))}),a<1/0&&a>=0&&(i=e.substring(0,a+1))}if(this.state.top&&(s=this.tokenizer.paragraph(i))){let a=t.at(-1);r&&a?.type==="paragraph"?(a.raw+=(a.raw.endsWith(`
`)?"":`
`)+s.raw,a.text+=`
`+s.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=a.text):t.push(s),r=i.length!==e.length,e=e.substring(s.raw.length);continue}if(s=this.tokenizer.text(e)){e=e.substring(s.raw.length);let a=t.at(-1);a?.type==="text"?(a.raw+=(a.raw.endsWith(`
`)?"":`
`)+s.raw,a.text+=`
`+s.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=a.text):t.push(s);continue}if(e){let a="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(a);break}else throw new Error(a)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let r=e,s=null;if(this.tokens.links){let o=Object.keys(this.tokens.links);if(o.length>0)for(;(s=this.tokenizer.rules.inline.reflinkSearch.exec(r))!=null;)o.includes(s[0].slice(s[0].lastIndexOf("[")+1,-1))&&(r=r.slice(0,s.index)+"["+"a".repeat(s[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(s=this.tokenizer.rules.inline.anyPunctuation.exec(r))!=null;)r=r.slice(0,s.index)+"++"+r.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);let i;for(;(s=this.tokenizer.rules.inline.blockSkip.exec(r))!=null;)i=s[2]?s[2].length:0,r=r.slice(0,s.index+i)+"["+"a".repeat(s[0].length-i-2)+"]"+r.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);r=this.options.hooks?.emStrongMask?.call({lexer:this},r)??r;let a=!1,l="";for(;e;){a||(l=""),a=!1;let o;if(this.options.extensions?.inline?.some(u=>(o=u.call({lexer:this},e,t))?(e=e.substring(o.raw.length),t.push(o),!0):!1))continue;if(o=this.tokenizer.escape(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.tag(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.link(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(o.raw.length);let u=t.at(-1);o.type==="text"&&u?.type==="text"?(u.raw+=o.raw,u.text+=o.text):t.push(o);continue}if(o=this.tokenizer.emStrong(e,r,l)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.codespan(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.br(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.del(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.autolink(e)){e=e.substring(o.raw.length),t.push(o);continue}if(!this.state.inLink&&(o=this.tokenizer.url(e))){e=e.substring(o.raw.length),t.push(o);continue}let c=e;if(this.options.extensions?.startInline){let u=1/0,d=e.slice(1),h;this.options.extensions.startInline.forEach(f=>{h=f.call({lexer:this},d),typeof h=="number"&&h>=0&&(u=Math.min(u,h))}),u<1/0&&u>=0&&(c=e.substring(0,u+1))}if(o=this.tokenizer.inlineText(c)){e=e.substring(o.raw.length),o.raw.slice(-1)!=="_"&&(l=o.raw.slice(-1)),a=!0;let u=t.at(-1);u?.type==="text"?(u.raw+=o.raw,u.text+=o.text):t.push(o);continue}if(e){let u="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(u);break}else throw new Error(u)}}return t}},kn=class{options;parser;constructor(n){this.options=n||Xe}space(n){return""}code({text:n,lang:e,escaped:t}){let r=(e||"").match(K.notSpaceStart)?.[0],s=n.replace(K.endingNewline,"")+`
`;return r?'<pre><code class="language-'+Ie(r)+'">'+(t?s:Ie(s,!0))+`</code></pre>
`:"<pre><code>"+(t?s:Ie(s,!0))+`</code></pre>
`}blockquote({tokens:n}){return`<blockquote>
${this.parser.parse(n)}</blockquote>
`}html({text:n}){return n}def(n){return""}heading({tokens:n,depth:e}){return`<h${e}>${this.parser.parseInline(n)}</h${e}>
`}hr(n){return`<hr>
`}list(n){let e=n.ordered,t=n.start,r="";for(let a=0;a<n.items.length;a++){let l=n.items[a];r+=this.listitem(l)}let s=e?"ol":"ul",i=e&&t!==1?' start="'+t+'"':"";return"<"+s+i+`>
`+r+"</"+s+`>
`}listitem(n){return`<li>${this.parser.parse(n.tokens)}</li>
`}checkbox({checked:n}){return"<input "+(n?'checked="" ':"")+'disabled="" type="checkbox"> '}paragraph({tokens:n}){return`<p>${this.parser.parseInline(n)}</p>
`}table(n){let e="",t="";for(let s=0;s<n.header.length;s++)t+=this.tablecell(n.header[s]);e+=this.tablerow({text:t});let r="";for(let s=0;s<n.rows.length;s++){let i=n.rows[s];t="";for(let a=0;a<i.length;a++)t+=this.tablecell(i[a]);r+=this.tablerow({text:t})}return r&&(r=`<tbody>${r}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+r+`</table>
`}tablerow({text:n}){return`<tr>
${n}</tr>
`}tablecell(n){let e=this.parser.parseInline(n.tokens),t=n.header?"th":"td";return(n.align?`<${t} align="${n.align}">`:`<${t}>`)+e+`</${t}>
`}strong({tokens:n}){return`<strong>${this.parser.parseInline(n)}</strong>`}em({tokens:n}){return`<em>${this.parser.parseInline(n)}</em>`}codespan({text:n}){return`<code>${Ie(n,!0)}</code>`}br(n){return"<br>"}del({tokens:n}){return`<del>${this.parser.parseInline(n)}</del>`}link({href:n,title:e,tokens:t}){let r=this.parser.parseInline(t),s=si(n);if(s===null)return r;n=s;let i='<a href="'+n+'"';return e&&(i+=' title="'+Ie(e)+'"'),i+=">"+r+"</a>",i}image({href:n,title:e,text:t,tokens:r}){r&&(t=this.parser.parseInline(r,this.parser.textRenderer));let s=si(n);if(s===null)return Ie(t);n=s;let i=`<img src="${n}" alt="${t}"`;return e&&(i+=` title="${Ie(e)}"`),i+=">",i}text(n){return"tokens"in n&&n.tokens?this.parser.parseInline(n.tokens):"escaped"in n&&n.escaped?n.text:Ie(n.text)}},Kr=class{strong({text:n}){return n}em({text:n}){return n}codespan({text:n}){return n}del({text:n}){return n}html({text:n}){return n}text({text:n}){return n}link({text:n}){return""+n}image({text:n}){return""+n}br(){return""}checkbox({raw:n}){return n}},we=class vr{options;renderer;textRenderer;constructor(e){this.options=e||Xe,this.options.renderer=this.options.renderer||new kn,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Kr}static parse(e,t){return new vr(t).parse(e)}static parseInline(e,t){return new vr(t).parseInline(e)}parse(e){let t="";for(let r=0;r<e.length;r++){let s=e[r];if(this.options.extensions?.renderers?.[s.type]){let a=s,l=this.options.extensions.renderers[a.type].call({parser:this},a);if(l!==!1||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(a.type)){t+=l||"";continue}}let i=s;switch(i.type){case"space":{t+=this.renderer.space(i);break}case"hr":{t+=this.renderer.hr(i);break}case"heading":{t+=this.renderer.heading(i);break}case"code":{t+=this.renderer.code(i);break}case"table":{t+=this.renderer.table(i);break}case"blockquote":{t+=this.renderer.blockquote(i);break}case"list":{t+=this.renderer.list(i);break}case"checkbox":{t+=this.renderer.checkbox(i);break}case"html":{t+=this.renderer.html(i);break}case"def":{t+=this.renderer.def(i);break}case"paragraph":{t+=this.renderer.paragraph(i);break}case"text":{t+=this.renderer.text(i);break}default:{let a='Token with "'+i.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return t}parseInline(e,t=this.renderer){let r="";for(let s=0;s<e.length;s++){let i=e[s];if(this.options.extensions?.renderers?.[i.type]){let l=this.options.extensions.renderers[i.type].call({parser:this},i);if(l!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(i.type)){r+=l||"";continue}}let a=i;switch(a.type){case"escape":{r+=t.text(a);break}case"html":{r+=t.html(a);break}case"link":{r+=t.link(a);break}case"image":{r+=t.image(a);break}case"checkbox":{r+=t.checkbox(a);break}case"strong":{r+=t.strong(a);break}case"em":{r+=t.em(a);break}case"codespan":{r+=t.codespan(a);break}case"br":{r+=t.br(a);break}case"del":{r+=t.del(a);break}case"text":{r+=t.text(a);break}default:{let l='Token with "'+a.type+'" type was not found.';if(this.options.silent)return console.error(l),"";throw new Error(l)}}}return r}},Lt=class{options;block;constructor(n){this.options=n||Xe}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens","emStrongMask"]);static passThroughHooksRespectAsync=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(n){return n}postprocess(n){return n}processAllTokens(n){return n}emStrongMask(n){return n}provideLexer(){return this.block?ye.lex:ye.lexInline}provideParser(){return this.block?we.parse:we.parseInline}},Bh=class{defaults=Ur();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=we;Renderer=kn;TextRenderer=Kr;Lexer=ye;Tokenizer=wn;Hooks=Lt;constructor(...n){this.use(...n)}walkTokens(n,e){let t=[];for(let r of n)switch(t=t.concat(e.call(this,r)),r.type){case"table":{let s=r;for(let i of s.header)t=t.concat(this.walkTokens(i.tokens,e));for(let i of s.rows)for(let a of i)t=t.concat(this.walkTokens(a.tokens,e));break}case"list":{let s=r;t=t.concat(this.walkTokens(s.items,e));break}default:{let s=r;this.defaults.extensions?.childTokens?.[s.type]?this.defaults.extensions.childTokens[s.type].forEach(i=>{let a=s[i].flat(1/0);t=t.concat(this.walkTokens(a,e))}):s.tokens&&(t=t.concat(this.walkTokens(s.tokens,e)))}}return t}use(...n){let e=this.defaults.extensions||{renderers:{},childTokens:{}};return n.forEach(t=>{let r={...t};if(r.async=this.defaults.async||r.async||!1,t.extensions&&(t.extensions.forEach(s=>{if(!s.name)throw new Error("extension name required");if("renderer"in s){let i=e.renderers[s.name];i?e.renderers[s.name]=function(...a){let l=s.renderer.apply(this,a);return l===!1&&(l=i.apply(this,a)),l}:e.renderers[s.name]=s.renderer}if("tokenizer"in s){if(!s.level||s.level!=="block"&&s.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let i=e[s.level];i?i.unshift(s.tokenizer):e[s.level]=[s.tokenizer],s.start&&(s.level==="block"?e.startBlock?e.startBlock.push(s.start):e.startBlock=[s.start]:s.level==="inline"&&(e.startInline?e.startInline.push(s.start):e.startInline=[s.start]))}"childTokens"in s&&s.childTokens&&(e.childTokens[s.name]=s.childTokens)}),r.extensions=e),t.renderer){let s=this.defaults.renderer||new kn(this.defaults);for(let i in t.renderer){if(!(i in s))throw new Error(`renderer '${i}' does not exist`);if(["options","parser"].includes(i))continue;let a=i,l=t.renderer[a],o=s[a];s[a]=(...c)=>{let u=l.apply(s,c);return u===!1&&(u=o.apply(s,c)),u||""}}r.renderer=s}if(t.tokenizer){let s=this.defaults.tokenizer||new wn(this.defaults);for(let i in t.tokenizer){if(!(i in s))throw new Error(`tokenizer '${i}' does not exist`);if(["options","rules","lexer"].includes(i))continue;let a=i,l=t.tokenizer[a],o=s[a];s[a]=(...c)=>{let u=l.apply(s,c);return u===!1&&(u=o.apply(s,c)),u}}r.tokenizer=s}if(t.hooks){let s=this.defaults.hooks||new Lt;for(let i in t.hooks){if(!(i in s))throw new Error(`hook '${i}' does not exist`);if(["options","block"].includes(i))continue;let a=i,l=t.hooks[a],o=s[a];Lt.passThroughHooks.has(i)?s[a]=c=>{if(this.defaults.async&&Lt.passThroughHooksRespectAsync.has(i))return(async()=>{let d=await l.call(s,c);return o.call(s,d)})();let u=l.call(s,c);return o.call(s,u)}:s[a]=(...c)=>{if(this.defaults.async)return(async()=>{let d=await l.apply(s,c);return d===!1&&(d=await o.apply(s,c)),d})();let u=l.apply(s,c);return u===!1&&(u=o.apply(s,c)),u}}r.hooks=s}if(t.walkTokens){let s=this.defaults.walkTokens,i=t.walkTokens;r.walkTokens=function(a){let l=[];return l.push(i.call(this,a)),s&&(l=l.concat(s.call(this,a))),l}}this.defaults={...this.defaults,...r}}),this}setOptions(n){return this.defaults={...this.defaults,...n},this}lexer(n,e){return ye.lex(n,e??this.defaults)}parser(n,e){return we.parse(n,e??this.defaults)}parseMarkdown(n){return(e,t)=>{let r={...t},s={...this.defaults,...r},i=this.onError(!!s.silent,!!s.async);if(this.defaults.async===!0&&r.async===!1)return i(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof e>"u"||e===null)return i(new Error("marked(): input parameter is undefined or null"));if(typeof e!="string")return i(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected"));if(s.hooks&&(s.hooks.options=s,s.hooks.block=n),s.async)return(async()=>{let a=s.hooks?await s.hooks.preprocess(e):e,l=await(s.hooks?await s.hooks.provideLexer():n?ye.lex:ye.lexInline)(a,s),o=s.hooks?await s.hooks.processAllTokens(l):l;s.walkTokens&&await Promise.all(this.walkTokens(o,s.walkTokens));let c=await(s.hooks?await s.hooks.provideParser():n?we.parse:we.parseInline)(o,s);return s.hooks?await s.hooks.postprocess(c):c})().catch(i);try{s.hooks&&(e=s.hooks.preprocess(e));let a=(s.hooks?s.hooks.provideLexer():n?ye.lex:ye.lexInline)(e,s);s.hooks&&(a=s.hooks.processAllTokens(a)),s.walkTokens&&this.walkTokens(a,s.walkTokens);let l=(s.hooks?s.hooks.provideParser():n?we.parse:we.parseInline)(a,s);return s.hooks&&(l=s.hooks.postprocess(l)),l}catch(a){return i(a)}}}onError(n,e){return t=>{if(t.message+=`
Please report this to https://github.com/markedjs/marked.`,n){let r="<p>An error occurred:</p><pre>"+Ie(t.message+"",!0)+"</pre>";return e?Promise.resolve(r):r}if(e)return Promise.reject(t);throw t}}},Je=new Bh;function A(n,e){return Je.parse(n,e)}A.options=A.setOptions=function(n){return Je.setOptions(n),A.defaults=Je.defaults,Ha(A.defaults),A};A.getDefaults=Ur;A.defaults=Xe;A.use=function(...n){return Je.use(...n),A.defaults=Je.defaults,Ha(A.defaults),A};A.walkTokens=function(n,e){return Je.walkTokens(n,e)};A.parseInline=Je.parseInline;A.Parser=we;A.parser=we.parse;A.Renderer=kn;A.TextRenderer=Kr;A.Lexer=ye;A.lexer=ye.lex;A.Tokenizer=wn;A.Hooks=Lt;A.parse=A;A.options;A.setOptions;A.use;A.walkTokens;A.parseInline;we.parse;ye.lex;function Dh(n,e){const t=document.createElement("div");t.className="flex gap-2 md:gap-3 items-start px-3 pb-4 border-b border-gray-200 ",t.innerHTML=`
    <div id="CommentInformation" class="flex flex-1 flex-col gap-1 md:gap-2">
      <div class="flex items-center gap-2">
        <img
          src="${n.author.profileImage?$.API_BASE_URL+"/uploads/profile/"+n.author.profileImage:"../../../assets/img/profile.png"}"
          alt="Avatar"
          class="border-primary-300 h-7 w-7 rounded-full border object-cover"
        />
        <div class="flex flex-1 flex-col">
          <div class="username font-medium">${n.author.name}</div>
          <div class="text-xs! text-gray-500">
            ${y.fromISO(n.createdAt).toRelative()}
          </div>
        </div>
        <div class="flex items-center md:gap-1">
          <svg
            width="20px"
            height="20px"
            viewBox="0 0 48 48"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
            class="mr-2 hidden cursor-pointer"
            id="attachmentLogo"
            title="Attachments"
          >
            <g id="attachment_2">
              <g id="attachment">
                <path
                  id="Combined Shape"
                  fill-rule="evenodd"
                  clip-rule="evenodd"
                  d="M26.4252 29.1104L39.5729 15.9627C42.3094 13.2262 42.3094 8.78901 39.5729 6.05248C36.8364 3.31601 32.4015 3.31601 29.663 6.05218L16.4487 19.2665L16.4251 19.2909L8.92989 26.7861C5.02337 30.6926 5.02337 37.0238 8.92989 40.9303C12.8344 44.8348 19.1656 44.8348 23.0701 40.9303L41.7835 22.2169C42.174 21.8264 42.174 21.1933 41.7835 20.8027C41.3929 20.4122 40.7598 20.4122 40.3693 20.8027L21.6559 39.5161C18.5324 42.6396 13.4676 42.6396 10.3441 39.5161C7.21863 36.3906 7.21863 31.3258 10.3441 28.2003L30.1421 8.4023L30.1657 8.37788L31.0769 7.4667C33.0341 5.51117 36.2032 5.51117 38.1587 7.4667C40.1142 9.42217 40.1142 12.593 38.1587 14.5485L28.282 24.4252C28.2748 24.4319 28.2678 24.4388 28.2608 24.4458L25.0064 27.7008L24.9447 27.7625C24.9437 27.7635 24.9427 27.7644 24.9418 27.7654L17.3988 35.3097C16.6139 36.0934 15.3401 36.0934 14.5545 35.3091C13.7714 34.5247 13.7714 33.2509 14.5557 32.4653L24.479 22.544C24.8696 22.1535 24.8697 21.5203 24.4792 21.1298C24.0887 20.7392 23.4555 20.7391 23.065 21.1296L13.141 31.0516C11.5766 32.6187 11.5766 35.1569 13.1403 36.7233C14.7079 38.2882 17.2461 38.2882 18.8125 36.7245L26.3589 29.1767L26.4252 29.1104Z"
                  fill="#000000"
                ></path>
              </g>
            </g>
          </svg>

          <svg
            class="edit-btn h-4 stroke-black hover:stroke-green-500 hover:stroke-2"
            viewBox="0 0 24 24"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
            <g
              id="SVGRepo_tracerCarrier"
              stroke-linecap="round"
              stroke-linejoin="round"
            ></g>
            <g id="SVGRepo_iconCarrier">
              <path
                d="M11 2H9C4 2 2 4 2 9V15C2 20 4 22 9 22H15C20 22 22 20 22 15V13"
                stroke-linecap="round"
                stroke-linejoin="round"
              ></path>
              <path
                d="M16.04 3.02001L8.16 10.9C7.86 11.2 7.56 11.79 7.5 12.22L7.07 15.23C6.91 16.32 7.68 17.08 8.77 16.93L11.78 16.5C12.2 16.44 12.79 16.14 13.1 15.84L20.98 7.96001C22.34 6.60001 22.98 5.02001 20.98 3.02001C18.98 1.02001 17.4 1.66001 16.04 3.02001Z"
                stroke-miterlimit="10"
                stroke-linecap="round"
                stroke-linejoin="round"
              ></path>
              <path
                d="M14.91 4.1499C15.58 6.5399 17.45 8.4099 19.85 9.0899"
                stroke-miterlimit="10"
                stroke-linecap="round"
                stroke-linejoin="round"
              ></path>
            </g>
          </svg>
          <svg
            class="delete-btn w-5 hover:fill-red-500"
            viewBox="0 0 24 24"
            xmlns="http://www.w3.org/2000/svg"
          >
            <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
            <g
              id="SVGRepo_tracerCarrier"
              stroke-linecap="round"
              stroke-linejoin="round"
            ></g>
            <g id="SVGRepo_iconCarrier">
              <path
                d="M12 2.75C11.0215 2.75 10.1871 3.37503 9.87787 4.24993C9.73983 4.64047 9.31134 4.84517 8.9208 4.70713C8.53026 4.56909 8.32557 4.1406 8.46361 3.75007C8.97804 2.29459 10.3661 1.25 12 1.25C13.634 1.25 15.022 2.29459 15.5365 3.75007C15.6745 4.1406 15.4698 4.56909 15.0793 4.70713C14.6887 4.84517 14.2602 4.64047 14.1222 4.24993C13.813 3.37503 12.9785 2.75 12 2.75Z"
              ></path>
              <path
                d="M2.75 6C2.75 5.58579 3.08579 5.25 3.5 5.25H20.5001C20.9143 5.25 21.2501 5.58579 21.2501 6C21.2501 6.41421 20.9143 6.75 20.5001 6.75H3.5C3.08579 6.75 2.75 6.41421 2.75 6Z"
              ></path>
              <path
                d="M5.91508 8.45011C5.88753 8.03681 5.53015 7.72411 5.11686 7.75166C4.70356 7.77921 4.39085 8.13659 4.41841 8.54989L4.88186 15.5016C4.96735 16.7844 5.03641 17.8205 5.19838 18.6336C5.36678 19.4789 5.6532 20.185 6.2448 20.7384C6.83639 21.2919 7.55994 21.5307 8.41459 21.6425C9.23663 21.75 10.2751 21.75 11.5607 21.75H12.4395C13.7251 21.75 14.7635 21.75 15.5856 21.6425C16.4402 21.5307 17.1638 21.2919 17.7554 20.7384C18.347 20.185 18.6334 19.4789 18.8018 18.6336C18.9637 17.8205 19.0328 16.7844 19.1183 15.5016L19.5818 8.54989C19.6093 8.13659 19.2966 7.77921 18.8833 7.75166C18.47 7.72411 18.1126 8.03681 18.0851 8.45011L17.6251 15.3492C17.5353 16.6971 17.4712 17.6349 17.3307 18.3405C17.1943 19.025 17.004 19.3873 16.7306 19.6431C16.4572 19.8988 16.083 20.0647 15.391 20.1552C14.6776 20.2485 13.7376 20.25 12.3868 20.25H11.6134C10.2626 20.25 9.32255 20.2485 8.60915 20.1552C7.91715 20.0647 7.54299 19.8988 7.26957 19.6431C6.99616 19.3873 6.80583 19.025 6.66948 18.3405C6.52891 17.6349 6.46488 16.6971 6.37503 15.3492L5.91508 8.45011Z"
              ></path>
              <path
                d="M9.42546 10.2537C9.83762 10.2125 10.2051 10.5132 10.2464 10.9254L10.7464 15.9254C10.7876 16.3375 10.4869 16.7051 10.0747 16.7463C9.66256 16.7875 9.29502 16.4868 9.25381 16.0746L8.75381 11.0746C8.71259 10.6625 9.0133 10.2949 9.42546 10.2537Z"
              ></path>
              <path
                d="M15.2464 11.0746C15.2876 10.6625 14.9869 10.2949 14.5747 10.2537C14.1626 10.2125 13.795 10.5132 13.7538 10.9254L13.2538 15.9254C13.2126 16.3375 13.5133 16.7051 13.9255 16.7463C14.3376 16.7875 14.7051 16.4868 14.7464 16.0746L15.2464 11.0746Z"
              ></path>
            </g>
          </svg>
        </div>
      </div>

      <div class="message prose text-sm text-gray-700">
        ${A.parse(n.message)}
      </div>

      <div class="edit-controls hidden">
        <textarea
          class="edit-input min-h-20 w-full rounded-md border border-gray-200 p-2 outline-none"
          rows="1"
        >
${n.message}</textarea
        >
        <button class="save-btn btn-primary mt-0! w-full py-1!">Save</button>
      </div>
    </div>
  `;const r=t.querySelector(".delete-btn"),s=t.querySelector(".edit-btn"),i=t.querySelector(".edit-controls"),a=t.querySelector(".message"),l=t.querySelector(".edit-input"),o=t.querySelector(".save-btn"),c=t.querySelector("#attachmentLogo");n.attachment&&c.classList.remove("hidden"),c.addEventListener("click",()=>{const u=`${$.API_BASE_URL}/uploads/commentsAttachment/${n.attachment}`;window.open(u,"_blank")}),s.addEventListener("click",u=>{u.preventDefault(),a.classList.add("hidden"),i.classList.remove("hidden")}),o.addEventListener("click",async u=>{u.preventDefault(),$h(l,n._id,n,a,i)}),r.addEventListener("click",async u=>{u.preventDefault(),Hr("Are you sure you want to delete this comment?",()=>{Ah(t,n._id,e)})}),e.appendChild(t),e.scrollTop=e.scrollHeight}async function Ah(n,e,t){try{await gn.deleteComment(e),t.removeChild(n)}catch(r){console.error("Error deleting comment:",r)}}async function $h(n,e,t,r,s){const i=n.value,a={message:i};if(!i.trim()){B("Comment cannot be empty");return}try{await gn.updateComment(e,a),t.message=i,r.textContent=i,B("Comment Updated successfully","success"),s.classList.add("hidden"),r.classList.remove("hidden")}catch(l){B(`${l}`),console.error("Edit error: ",l)}}async function to(n){const e=document.getElementById("subtasksList");if(e.innerHTML="",!n.subTask.length){e.innerHTML="<p class='text-gray-400 font-semibold'>No subtasks</p>";return}(await S.getTaskById(n._id)).data.result.subTask.forEach(async r=>{const s=(await S.getTaskById(r)).data.result,i=s.assignee?(await S.getUserDetailsById(s.assignee)).data.result:null,a=document.createElement("div");let l;switch(s.type){case"task":l="border-l-[#165dfc]";break;case"story":l="border-l-[#00a63d]";break;case"bug":l="border-l-[#e7000b]";break}a.className=`flex items-center bg-white rounded-md shadow-sm p-3 subtaskEl cursor-pointer w-full border border-gray-200 ${l}`,a.innerHTML=`
      <img
        src="${i&&i.profileImage?$.API_BASE_URL+"/uploads/profile/"+i.profileImage:"../../../assets/img/profile.png"}"
        class="border-primary-300 h-8 w-8 rounded-full object-cover"
        title="${i?i.name:"unassigned"}"
      />
      <div class="flex flex-1">
        <div class="ml-3 gap-2">
          <span
            class="bg-primary-400 h-fit w-fit rounded-sm px-2 py-0.5 text-center text-xs font-medium text-nowrap text-white"
            >${s.key}</span
          >
          <span class="font-medium">${s.title}</span>
        </div>
        <div class="ml-auto flex gap-0.5">
          <svg
            width="20px"
            height="20px"
            viewBox="0 0 48 48"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
            class="attachmentIcon ml-2 hidden"
            title="Attachments"
          >
            <g id="attachment_2">
              <g id="attachment">
                <path
                  id="Combined Shape"
                  fill-rule="evenodd"
                  clip-rule="evenodd"
                  d="M26.4252 29.1104L39.5729 15.9627C42.3094 13.2262 42.3094 8.78901 39.5729 6.05248C36.8364 3.31601 32.4015 3.31601 29.663 6.05218L16.4487 19.2665L16.4251 19.2909L8.92989 26.7861C5.02337 30.6926 5.02337 37.0238 8.92989 40.9303C12.8344 44.8348 19.1656 44.8348 23.0701 40.9303L41.7835 22.2169C42.174 21.8264 42.174 21.1933 41.7835 20.8027C41.3929 20.4122 40.7598 20.4122 40.3693 20.8027L21.6559 39.5161C18.5324 42.6396 13.4676 42.6396 10.3441 39.5161C7.21863 36.3906 7.21863 31.3258 10.3441 28.2003L30.1421 8.4023L30.1657 8.37788L31.0769 7.4667C33.0341 5.51117 36.2032 5.51117 38.1587 7.4667C40.1142 9.42217 40.1142 12.593 38.1587 14.5485L28.282 24.4252C28.2748 24.4319 28.2678 24.4388 28.2608 24.4458L25.0064 27.7008L24.9447 27.7625C24.9437 27.7635 24.9427 27.7644 24.9418 27.7654L17.3988 35.3097C16.6139 36.0934 15.3401 36.0934 14.5545 35.3091C13.7714 34.5247 13.7714 33.2509 14.5557 32.4653L24.479 22.544C24.8696 22.1535 24.8697 21.5203 24.4792 21.1298C24.0887 20.7392 23.4555 20.7391 23.065 21.1296L13.141 31.0516C11.5766 32.6187 11.5766 35.1569 13.1403 36.7233C14.7079 38.2882 17.2461 38.2882 18.8125 36.7245L26.3589 29.1767L26.4252 29.1104Z"
                  fill="#000000"
                />
              </g>
            </g>
          </svg>
          <svg
            width="20px"
            height="20px"
            viewBox="0 0 24 24"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
            class="subtaskIcon ml-1 hidden"
          >
            <rect
              x="16"
              y="9"
              width="4"
              height="4"
              rx="2"
              transform="rotate(90 16 9)"
              stroke="#33363F"
              stroke-width="1"
            />
            <rect
              x="20"
              y="17"
              width="4"
              height="4"
              rx="2"
              transform="rotate(90 20 17)"
              stroke="#33363F"
              stroke-width="1"
            />
            <path
              d="M5 4V15C5 16.8856 5 17.8284 5.58579 18.4142C6.17157 19 7.11438 19 9 19H16"
              stroke="#33363F"
              stroke-width="1"
            />
            <path
              d="M5 7V7C5 8.88562 5 9.82843 5.58579 10.4142C6.17157 11 7.11438 11 9 11H12"
              stroke="#33363F"
              stroke-width="1"
            />
          </svg>
        </div>
      </div>
    `;const o=a.querySelector(".attachmentIcon"),c=a.querySelector(".subtaskIcon");s.attachments.length&&o.classList.remove("hidden"),s.subTask.length&&c.classList.remove("hidden"),a.addEventListener("click",()=>Ve(r)),e.appendChild(a)})}let It=null;const Nh=document.getElementById("close-task-modal"),es=document.getElementById("create-task-modal"),Rh=document.getElementById("status-create-task-modal"),Ph=document.getElementById("create-modal-assignee"),_e=document.getElementById("attachments"),xr=document.getElementById("file-name"),Sr=document.getElementById("task-form"),st=new DataTransfer;Nh.addEventListener("click",()=>{es.classList.add("hidden"),Sr.reset()});_e.addEventListener("change",()=>{if(_e.files.length+st.files.length>0&&_e.files.length+st.files.length<6){for(const n of _e.files)st.items.add(n);_e.files=st.files,xr.textContent=Array.from(_e.files).map(n=>n.name).join(", ")}else _e.files.length+st.files.length>=6?(B("Maximum 5 files you can insert","info"),_e.files=st.files):xr.textContent="No file chosen"});Sr.addEventListener("submit",async n=>{n.preventDefault();let e;document.getElementById("dueDate").value?(e=document.getElementById("dueDate").value,e=js(e,"yyyy-MM-dd")):(e=new Date,e=gc(e,7),e=js(e,"yyyy-MM-dd"));const t={projectId:localStorage.getItem("selectedProject"),title:document.getElementById("create-task-modal-title").value.trim(),storyPoint:document.getElementById("story-point").value.trim(),description:document.getElementById("description").value.trim(),type:document.getElementById("type").value,priority:document.getElementById("priority").value,status:document.getElementById("status-create-task-modal").value,tags:document.getElementById("tags").value?document.getElementById("tags").value.split(",").map(r=>r.trim()):[],dueDate:e,assignee:document.getElementById("create-modal-assignee").value==="null"?null:document.getElementById("create-modal-assignee").value,attachments:_e.files,parentTask:It?._id||null};try{const s=(await S.createTask(t)).data.result.newTask,i=document.getElementById("subtaskDropdown"),a=document.getElementById("saveSubtasksBtn");if(es.classList.add("hidden"),B("Task created Successfully","success"),xr.textContent="No file chosen",Sr.reset(),It){const l=It._id,o=(await S.getTaskById(l)).data.result,c=o.subTask?[...o.subTask,s._id]:[s._id];await S.updateTask(l,{subTask:c}),to({...o,subTask:c}),i&&a&&(i.classList.add("hidden"),a.classList.add("hidden"))}else await W(localStorage.getItem("selectedProject"));It=null}catch(r){console.error(r)}});function ts(n=null){It=n,es.classList.remove("hidden"),ka(Rh),wa(Ph)}function qh(n,e){const t=n.querySelector("#subtaskDropdown"),r=n.querySelector("#saveSubtasksBtn"),s=n.querySelector("#subtaskButton"),i=n.querySelector("#subtaskList"),a=n.querySelector("#subtaskContainer");let l=!1;async function o(){try{const h=(await S.taskOfProjectId(localStorage.getItem("selectedProject"))).data.result.find(p=>p.subTask?.includes(e._id));let f=!1;e.type==="story"&&(f=!0),(e.type==="task"||e.type==="bug")&&(!h||h.type==="story")&&(f=!0),f||(a.style.display="none")}catch(d){console.error(d)}}o();function c(d,h){const f=document.createElement("div");f.className="flex items-center gap-2 text-primary-500 cursor-pointer font-medium mb-2 hover:scale-95 transition-all delay-75",f.innerHTML=`
      <span class="text-lg">+</span>
      <span>Create Subtask</span>
    `,f.onclick=async()=>{const p=ts(e);if(p?.newTask){const b=h.subTask?[...h.subTask,p.newTask._id]:[p.newTask._id];await S.updateTask(h._id,{subTask:b});const v=(await S.getTaskById(h._id)).data.result;t.classList.add("hidden"),r.classList.add("hidden"),l=!1,i.innerHTML="";const E=(await S.getTaskByProjectId(localStorage.getItem("selectedProject"))).data.result;c(E,v),W(localStorage.getItem("selectedProject"))}},i.appendChild(f),d.forEach(p=>{if(e.type==="task"&&p.type==="story"||p._id===e._id||p.subTask.length&&e.type!=="story")return;const b=h.subTask?.includes(p._id),v=document.createElement("div");v.className="flex items-center gap-4",v.innerHTML=`
        <input
          type="checkbox"
          class="subtask-check cursor-pointer"
          value="${p._id}"
          ${b?"checked":""}
        />
        <span class="bg-primary-400 w-fit rounded-sm px-2 py-0.5 text-center text-xs font-medium text-white text-nowrap">${p.key}</span>
        <span>${p.title}</span>
      `,i.appendChild(v)})}const u=async()=>{try{const d=[...n.querySelectorAll(".subtask-check")].filter(h=>h.checked).map(h=>h.value);await S.updateTask(e._id,{subTask:d}),W(localStorage.getItem("selectedProject")),B("Subtasks updated!","success"),t.classList.add("hidden"),r.classList.add("hidden"),l=!1,Ve(e._id)}catch(d){B(`${d}`,"error")}};r.onclick=u,s.onclick=async()=>{if(l){t.classList.add("hidden"),l=!1;return}t.classList.remove("hidden"),r.classList.remove("hidden"),l=!0;const d=(await S.getTaskById(e._id)).data.result;let h=(await S.getTaskByProjectId(localStorage.getItem("selectedProject"))).data.result;const p=h.filter(v=>v.subTask?.length).reduce((v,E)=>[...v,...E.subTask],[]);h=h.filter(v=>v._id!==d._id&&!p.includes(v._id));const b=await Promise.all((d.subTask||[]).map(async v=>(await S.getTaskById(v)).data.result));h=[...h,...b],i.innerHTML="",c(h,d)}}const Fh=` <div>
  <div class="flex flex-col gap-3 p-3">
    <div class="container-secondary flex flex-col gap-5">
      <div class="flex justify-between gap-3">
        <div class="title-container flex flex-col gap-2">
          <div class="flex items-center gap-2">
            <span class="type-icon"></span>
            <span
              class="task-key bg-primary-500 w-fit rounded-sm px-2 py-0.5 text-center text-xs font-semibold text-white"
            ></span>
          </div>
          <h2 class="title text-[16px]! font-semibold"></h2>
        </div>
        <div class="right-container flex items-start gap-3">
          <button id="edit-task-button">
            <svg
              class="h-5 w-5 stroke-black hover:stroke-green-500 hover:stroke-2"
              viewBox="0 0 24 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
              <g
                id="SVGRepo_tracerCarrier"
                stroke-linecap="round"
                stroke-linejoin="round"
              ></g>
              <g id="SVGRepo_iconCarrier">
                <path
                  d="M11 2H9C4 2 2 4 2 9V15C2 20 4 22 9 22H15C20 22 22 20 22 15V13"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                ></path>
                <path
                  d="M16.04 3.02001L8.16 10.9C7.86 11.2 7.56 11.79 7.5 12.22L7.07 15.23C6.91 16.32 7.68 17.08 8.77 16.93L11.78 16.5C12.2 16.44 12.79 16.14 13.1 15.84L20.98 7.96001C22.34 6.60001 22.98 5.02001 20.98 3.02001C18.98 1.02001 17.4 1.66001 16.04 3.02001Z"
                  stroke-miterlimit="10"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                ></path>
                <path
                  d="M14.91 4.1499C15.58 6.5399 17.45 8.4099 19.85 9.0899"
                  stroke-miterlimit="10"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                ></path>
              </g>
            </svg>
          </button>
          <button type="button" class="close-btn">
            <svg
              class="mt-0.5 h-4 w-4 stroke-gray-600 hover:stroke-red-400 hover:stroke-2"
              aria-hidden="true"
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 14 14"
            >
              <path
                stroke="inherit"
                stroke-linecap="round"
                stroke-linejoin="round"
                d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"
              />
            </svg>
          </button>
        </div>
      </div>
      <div class="flex items-center gap-3 relative">
        <div class="profile-name">
          <img
            src="../assets/img/profile.png"
            alt="Avatar"
            class="profile-image h-8 w-8 rounded-full border border-white shadow-sm"
          />
        </div>
        <div class="flex flex-col leading-tight">
          <p class="text-gray-500">Assignee</p>
          <p
            class="assignee text-primary-500  font-medium"
            id="assignee-name"
          ></p>
        </div>
        <select
          id="assignee-dropdown-taskDrawer"
          class="absolute opacity-0 top-4 left-4 w-52 rounded-sm bg-white border cursor-pointer border-gray-200 p-2 shadow-md"
        ></select>
      </div>
      <div class="flex flex-col gap-1">
        <p class="text-md text-gray-500">Due Date</p>
        <div class="flex items-center gap-2">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="-ml-1 h-5 w-5 text-gray-400"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="1.5"
              d="M8 7V3m8 4V3m-9 8h10m-11 8h12a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2z"
            />
          </svg>
          <span class="due-date text-gray-600"></span>
        </div>
      </div>
      <!-- Description Container -->
      <div class="flex flex-col gap-2">
        <h2 id="descriptionHeader" class="font-semibold">Description</h2>
        <div
          class="description prose max-h-28 w-full overflow-auto rounded-md border border-gray-100 p-1"
        ></div>
      </div>
    </div>
    <!-- subtasks -->
    <div class="container-secondary flex flex-col gap-2" id="subtaskContainer">
      <div class="flex items-center gap-2">
        <h2 class="font-semibold">Subtasks</h2>
        <div class="relative">
          <button
            id="subtaskButton"
            class="subtask cursor-pointer rounded-sm bg-gray-200 p-1 hover:bg-gray-300"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width="2"
              stroke="currentColor"
              class="size-4 stroke-black"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M12 4.5v15m7.5-7.5h-15"
              ></path>
            </svg>
          </button>
        </div>
      </div>
      <div
        id="subtaskDropdown"
        class="hidden max-h-64 w-full overflow-y-auto rounded-md border border-gray-200 p-3 shadow-md"
      >
        <div id="subtaskList" class="ml-2 flex flex-col gap-2"></div>
        <button
          id="saveSubtasksBtn"
          class="bg-primary-500 hover:bg-primary-600 mt-3 hidden w-full rounded py-2 text-white"
        >
          Save Subtasks
        </button>
      </div>
      <div
        id="subtasksList"
        class="flex max-h-42 w-full flex-col items-center gap-2 overflow-x-auto"
      ></div>
    </div>
    <!-- Details -->
    <div class="container-secondary">
      <div class="flex flex-col gap-3">
        <h2 class="font-semibold">Details</h2>
        <div class="flex flex-col gap-3 rounded-lg p-2">
          <div class="flex items-center justify-between">
            <span class="font-medium text-gray-500">Status</span>
            <select
              id="statusSelect"
              class="bg-primary-400 w-30 rounded-sm px-2 py-2 text-left text-white outline-none"
            ></select>
          </div>
          <div class="flex items-center justify-between">
            <span class="font-medium text-gray-500">Priority</span>
            <select
              id="prioritySelect"
              class="bg-primary-400 w-30 rounded-sm px-2 py-2 text-left text-white outline-none"
            >
            <option value="low">Low</option>
            <option value="medium">Medium</option>
            <option value="high">High</option>
              <option value="critical">Critical</option>
            </select>
          </div>
          <div class="flex items-center justify-between">
            <span class="font-medium text-gray-500">Type</span>
            <select
              id="typeSelect"
              class="bg-primary-400 w-30 rounded-sm px-2 py-2 text-left text-white outline-none"
            >
              <option value="task">Task</option>
              <option value="story">Story</option>
              <option value="bug">Bug</option>
            </select>
          </div>
          <div class="flex items-center justify-between">
            <span class="flex-1 font-medium text-gray-500">Story Point</span>
            <input
              type="number"
              id="story-point-value"
              value="1"
              class="focus:border-primary-500 max-w-30 min-w-30 rounded-sm border border-gray-300 bg-white p-2 px-2 py-1 text-sm text-gray-800 shadow-xs transition-all duration-200 outline-none placeholder:text-sm placeholder:text-white/50"
            />
          </div>
          <div class="flex items-center justify-end gap-3">
            <span class="flex-1 font-medium text-gray-500" >Reporter</span>
            <div class='flex items-center gap-1 justify-end'>
          <img
            src="../assets/img/profile.png"
            alt="Avatar"
            class="reporter-profile-image h-6 w-6 rounded-full border border-white shadow-sm"
          />
            <p
              class="reporter text-primary-500 font-medium text-wrap text-end flex-1"
              id="reporter-name"
            ></p>
            </div>
          </div>
          <div class="flex justify-between">
          <span class="flex-1 font-medium text-gray-500 mr-4">Label</span>
            <div class="labels flex min-w-18 gap-1 text-xs flex-wrap justify-end"></div>
            </div>
          </div>
        </div>
      </div>
      <!-- Attachment Container -->
      <div class="container-secondary">
        <div class="mb-2 flex items-center justify-between px-1">
          <h2 class="font-semibold">Attachments</h2>
        </div>
        <div
          id="attachmentsList"
          class="flex flex-col items-center gap-2 overflow-y-auto"
        ></div>
      </div>
      <!-- Comments Container -->
      <div class="container-secondary flex flex-col gap-2">
        <h2 id="commentContainerHeaderText" class="font-semibold">Comments</h2>
        <div
          id="commentsContainer"
          class="flex max-h-64 flex-col gap-2 overflow-y-auto rounded-sm border border-gray-200 bg-white pt-3 inset-shadow-xs"
        ></div>
        <!-- comment input  -->
        <div class="comment-create flex flex-col bg-white">
          <textarea
            type="text"
            id="commentInput"
            minlength="3"
            placeholder="Enter your Comment"
            class="min-h-20 flex-1 rounded-sm border border-gray-300 border-b-transparent p-2 focus:outline-none"
          ></textarea>
          <input type="file" id="commentAttachment" class="hidden" />
          <div class="flex">
            <div
              class="flex flex-1 items-center border-b border-l border-gray-300 px-2"
            >
              <button
                type="button"
                id="attachButton"
                class=""
                title="Attach a file"
              >
                <svg
                  viewBox="0 0 24 24"
                  id="Layer_4"
                  version="1.1"
                  xml:space="preserve"
                  xmlns="http://www.w3.org/2000/svg"
                  xmlns:xlink="http://www.w3.org/1999/xlink"
                  class="hover:fill-primary-600 size-6 fill-black"
                >
                  <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                  <g
                    id="SVGRepo_tracerCarrier"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  ></g>
                  <g id="SVGRepo_iconCarrier">
                    <path
                      class="st0"
                      d="M14.77,20.99c0.138,0,0.251-0.02,0.367-0.041c0.161,0.024,0.322,0.041,0.484,0.041 c2.272,0,4.12-1.848,4.12-4.12c0-1.667-0.994-3.133-2.48-3.763V7.39c0-0.134-0.054-0.263-0.15-0.357l-0.455-0.446 c-0.016-0.022-0.033-0.043-0.052-0.061L13.237,3.16c-0.094-0.096-0.223-0.15-0.357-0.15H8.25c-0.276,0-0.5,0.224-0.5,0.5 s0.224,0.5,0.5,0.5h4.158c-0.02,0.071-0.033,0.145-0.033,0.221V6.38c0,0.833,0.677,1.51,1.51,1.51h2.149 c0.078,0,0.153-0.012,0.226-0.034v4.942c-0.019-0.003-0.036-0.002-0.055-0.005c-0.199-0.033-0.395-0.054-0.585-0.054 c-2.272,0-4.12,1.853-4.12,4.13c0,0.283,0.036,0.558,0.091,0.826c0.017,0.084,0.044,0.164,0.066,0.246 c0.049,0.183,0.108,0.361,0.181,0.534c0.037,0.086,0.075,0.17,0.117,0.254c0.084,0.167,0.18,0.324,0.286,0.477 c0.047,0.068,0.09,0.139,0.141,0.204c0.163,0.208,0.34,0.405,0.541,0.578c0,0,0,0,0.001,0.001H6.74c-0.816,0-1.48-0.673-1.48-1.5 V5.51c0-0.771,0.569-1.412,1.324-1.492c0.274-0.029,0.474-0.275,0.444-0.55C7,3.193,6.759,2.999,6.479,3.024 C5.214,3.158,4.26,4.226,4.26,5.51v12.98c0,1.378,1.113,2.5,2.48,2.5H14.77z M13.885,6.89c-0.281,0-0.51-0.229-0.51-0.51V4.717 l2.173,2.173H13.885z M15.62,13.74c0.237,0,0.502,0.039,0.779,0.115c0.062,0.016,0.124,0.03,0.207,0.061 c1.277,0.414,2.135,1.602,2.135,2.955c0,1.72-1.4,3.12-3.12,3.12c-0.129,0-0.259-0.007-0.479-0.04l-0.139-0.032 c-1.45-0.271-2.502-1.553-2.502-3.048C12.5,15.145,13.9,13.74,15.62,13.74z"
                    ></path>
                    <path
                      class="st0"
                      d="M14.494,17.37h0.626v0.626c0,0.276,0.224,0.5,0.5,0.5s0.5-0.224,0.5-0.5V17.37h0.626c0.276,0,0.5-0.224,0.5-0.5 s-0.224-0.5-0.5-0.5H16.12v-0.626c0-0.276-0.224-0.5-0.5-0.5s-0.5,0.224-0.5,0.5v0.626h-0.626c-0.276,0-0.5,0.224-0.5,0.5 S14.217,17.37,14.494,17.37z"
                    ></path>
                  </g>
                </svg>
              </button>
              <span id="commentAttachmentText"></span>
            </div>
            <div class="rounded-tl-md border-t border-l border-gray-300 p-1">
              <button
                type="button"
                id="submitButton"
                class="btn-primary mt-0! rounded-xs! px-4 py-1!"
              >
                <svg
                  class="size-4 fill-white"
                  viewBox="0 0 24 24"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                  <g
                    id="SVGRepo_tracerCarrier"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  ></g>
                  <g id="SVGRepo_iconCarrier">
                    <path
                      d="M19,6a1,1,0,0,0-1,1v4a1,1,0,0,1-1,1H7.41l1.3-1.29A1,1,0,0,0,7.29,9.29l-3,3a1,1,0,0,0-.21.33,1,1,0,0,0,0,.76,1,1,0,0,0,.21.33l3,3a1,1,0,0,0,1.42,0,1,1,0,0,0,0-1.42L7.41,14H17a3,3,0,0,0,3-3V7A1,1,0,0,0,19,6Z"
                    ></path>
                  </g>
                </svg>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>`;async function Ve(n){const e=document.getElementById("task-side-drawer");e.innerHTML=Fh;const t=(await S.getTaskById(n)).data.result,r=(await S.getUserDetailsById(t.reporter)).data.result,s=t.assignee?(await S.getUserDetailsById(t.assignee)).data.result:null,i=document.querySelector(".task-drawer"),a=document.querySelector(".drawer-backdrop"),l=i.querySelector(".title"),o=i.querySelector(".type-icon"),c=i.querySelector(".task-key"),u=i.querySelector(".description"),d=i.querySelector("#assignee-name"),h=i.querySelector(".profile-image"),f=i.querySelector(".due-date"),p=i.querySelector(".close-btn"),b=i.querySelector("#statusSelect"),v=i.querySelector("#prioritySelect"),E=i.querySelector("#commentInput"),w=i.querySelector("#submitButton"),z=document.getElementById("update-task-modal"),Z=document.querySelector("#edit-task-button"),N=i.querySelector("#commentAttachment"),ee=i.querySelector("#attachButton"),fe=i.querySelector("#commentAttachmentText"),_=(await q.getProjectById(localStorage.getItem("selectedProject"))).result.columns,te=i.querySelector("#story-point-value"),g=i.querySelector("#typeSelect"),F=i.querySelector("#assignee-dropdown-taskDrawer"),se=i.querySelector("#reporter-name"),Q=i.querySelector(".reporter-profile-image"),Ke=i.querySelector(".labels"),je=t.tags.map(x=>` <div
      class="label bg-primary-100 rounded-sm px-2 py-1"
    >
      ${x}
    </div>`);Ke.innerHTML=je.join(""),se.textContent=r.name,r.profileImage?Q.src=$.API_BASE_URL+"/uploads/profile/"+r.profileImage:h.src="../../../assets/img/profile.png",d.textContent=s?s.name:"No assignee",F.classList.remove("hidden"),F.innerHTML="";const Se=document.createElement("option");Se.value="",Se.textContent="Unassigned",t.assignee||(Se.selected=!0),F.appendChild(Se),(await q.getProjectMembers(localStorage.getItem("selectedProject"))).result.forEach(x=>{const O=document.createElement("option");O.value=x._id,O.textContent=x.name,x._id===t.assignee&&(O.selected=!0),F.appendChild(O)}),F.addEventListener("change",async x=>{const O=x.target.value;try{if(await S.updateTask(n,{assignee:O||null}),!O)d.textContent="Unassigned";else{const R=(await S.getUserDetailsById(O)).data.result;d.textContent=R.name}F.classList.add("hidden"),W(localStorage.getItem("selectedProject")),B("Assignee updated","success"),Ve(n)}catch(R){B("Failed to update assignee","error"),console.error(R)}}),ee.addEventListener("click",()=>{N.click()}),Z.addEventListener("click",()=>{z.classList.remove("hidden"),Wa(n)}),to(t),E.addEventListener("keydown",function(x){if(x.key==="Enter"){if(x.shiftKey)return;x.preventDefault(),w.click()}}),N.addEventListener("change",x=>{x.target.files[0]&&(fe.textContent=x.target.files[0].name)}),w.addEventListener("click",async()=>{const x=E.value.trim(),O=new FormData;if(!x&&N.files.length){B("You must enter a comment before adding an attachment");return}O.append("taskId",t._id),O.append("message",x),N.files.length&&O.append("attachment",N.files[0]);try{await gn.createComment(O),E.value="",N.value="",fe.textContent="",jt()}catch(R){B("Failed to submit comment"),console.error(R)}}),_.forEach(x=>{const O=document.createElement("option");O.value=x,O.textContent=x.charAt(0).toUpperCase()+x.slice(1),b.appendChild(O)}),b.addEventListener("change",async x=>{try{await S.updateTask(n,{status:x.target.value}),W(localStorage.getItem("selectedProject")),B("Status updated successfully","success"),x.preventDefault()}catch(O){B("Failed to update status","error"),console.error(O)}}),v.addEventListener("change",async x=>{try{await S.updateTask(n,{priority:x.target.value}),W(localStorage.getItem("selectedProject")),B("Status updated successfully","success"),x.preventDefault()}catch(O){B("Failed to update priority","error"),console.error(O)}}),te.addEventListener("keydown",async x=>{try{x.key==="Enter"&&(x.preventDefault(),await S.updateTask(n,{storyPoint:+x.target.value}),W(localStorage.getItem("selectedProject")),B("Story point updated successfully","success"))}catch(O){B("Failed to update story point","error"),console.error(O)}}),g.addEventListener("change",async x=>{try{await S.updateTask(n,{type:x.target.value}),W(localStorage.getItem("selectedProject")),B("Type updated successfully","success"),x.preventDefault()}catch(O){B("Failed to update type","error"),console.error(O)}}),b.value=t.status,v.value=t.priority,te.value=t.storyPoint,g.value=t.type,i.dataset.id=t._id,l.textContent=t.title,c.textContent=t.key,o.innerHTML=jr(t),u.innerHTML=t.description?A.parse(t.description):"No description added....",h.src="../../../assets/img/profile.png",s?(d.textContent=s.name,s.profileImage?(h.src=$.API_BASE_URL+"/uploads/profile/"+s.profileImage,h.classList.add("object-cover")):h.src="../../../assets/img/profile.png"):d.textContent="No assignee",f.textContent=t.dueDate.split("T")[0],i.classList.remove("translate-x-full"),i.classList.add("transform-none"),a.classList.remove("hidden"),a.addEventListener("click",()=>{i.classList.add("translate-x-full"),i.classList.remove("transform-none"),a.classList.add("hidden")}),p.addEventListener("click",()=>{i.classList.add("translate-x-full"),i.classList.remove("transform-none"),a.classList.add("hidden")});async function jt(){const x=(await gn.getAllComments(t._id)).result,O=i.querySelector("#commentsContainer");O.innerHTML="",x.length||(O.innerHTML=`
      <p class="text-gray-400 text-sm text-center mb-3">No Comments...</p>
    `),x.forEach(R=>Dh(R,O))}jt(),qh(i,t),Gd(t)}async function Ye(n,e,t,r){let s="hidden";e==="backlog"&&(s="");let i="";t==="kanban"&&(i="hidden");let a;n.type==="task"?a=`${be.task}`:n.type==="story"?a=`${be.story}`:a=`${be.bug}`;let l;switch(n.priority){case"low":l="border-l-green-500";break;case"medium":l="border-l-blue-500";break;case"high":l="border-l-yellow-400";break;case"critical":l="border-l-red-600";break}const o=document.createElement("tr"),c=n.reporter?(await S.getUserDetailsById(n.reporter)).data.result:"";let u={};if(n.assignee){const E=(await S.getUserDetailsById(n.assignee)).data.result;u.name=E.name,u.profileImage="../../../../assets/img/profile.png",E.profileImage&&(u.profileImage=$.API_BASE_URL+"/uploads/profile/"+E.profileImage)}else u={name:"Unassigned",profileImage:"../../../../assets/img/profile.png"};const d=n.tags.map((E,w)=>{if(w>3)return"";let z;return w==3?z=`
        <div class="rounded-sm bg-gray-200 px-2 py-1">
          +${n.tags.length-3}
        </div>
      `:z=` <div
        class="labels bg-primary-100 rounded-sm px-2 py-1"
      >
        ${E}
      </div>`,z});o.classList=` border-b border-b-gray-200 whitespace-nowrap border-l-3 ${l} bg-white hover:bg-gray-100`,o.dataset.id=n._id;let h;h=n.dueDate.split("T");const f=new Date(h);h=xu(f,{}),o.innerHTML=`
    <td class="${s} ${i} px-4 py-2">
      <div class="flex items-center">
        <input
          id="checkbox-all-search"
          type="checkbox"
          class="checkboxes text-primary-600 bg-primary-100 border-primary-300 accent-primary-500 focus:ring-primary-600 h-3.5 w-3.5 rounded-sm"
          data-id=${n._id}
        />
      </div>
    </td>
    <td class="">
      <div class="flex w-full justify-center">${a}</div>
    </td>
    <td class="p-2">
      <p
        class="wrapper bg-primary-500 w-max rounded-md px-2 py-1 text-xs font-semibold text-white uppercase"
      >
        ${n.key}
      </p>
    </td>
    <td class="open-taskDrawer cursor-pointer p-2 hover:underline">
      ${n.title}
    </td>
    <td class="p-2">
      <div class="bg-primary-400 mr-2 w-fit rounded-md px-2 py-0.5 text-white">
        <select class="status-select-${n._id} w-30 outline-none"></select>
      </div>
    </td>
    <td class="${i} ${r?"":"hidden"} p-2">
      ${r?'<p class="wrapper bg-primary-400 text-white px-2 py-1 rounded-sm w-max uppercase font-semibold text-xs">'+r.key+"</p>":""}
    </td>
    <td class="p-2">
      <div class="flex items-center">
        <img
          class="mr-3 aspect-square h-6 w-6 rounded-full object-cover"
          src="${u.profileImage}"
        />${u.name}
      </div>
    </td>
    <td class="p-2">
      <input
        type="date"
        name="dueDate"
        id=""
        class="${n.key}-due-date ${new Date(n.dueDate)<Date.now()?"text-red-600":""} block w-28 rounded-md border border-gray-300 bg-gray-50 p-1 text-sm text-black outline-none"
        placeholder="Enter the due date"
        value="${h}"
      />
    </td>
    <td class="p-2">
      <div class="flex min-w-18 gap-1 text-xs">${d.join("")}</div>
    </td>
    <td class="p-2">
      ${y.fromISO(n.createdAt).toLocaleString(y.DATE_MED)}
    </td>
    <td class="p-2">
      ${y.fromISO(n.updatedAt).toLocaleString(y.DATE_MED)}
    </td>
    <td class="p-2">
      <div class="flex items-center">
        <img
          class="mr-3 aspect-square h-6 w-6 rounded-full object-cover"
          src="${c.profileImage?$.API_BASE_URL+"/uploads/profile/"+c.profileImage:"../../../assets/img/profile.png"}"
        />${c.name}
      </div>
    </td>
    <td class="p-2">&nbsp;</td>
  `;const p=o.querySelector(`.${n.key}-due-date`);o.querySelector(".open-taskDrawer").addEventListener("click",()=>Ve(n._id)),p.addEventListener("change",async()=>{if(new Date(p.value)<new Date(n.dueDate)){B("Invalid due date","error"),p.value=h;return}await S.updateTask(n._id,{dueDate:p.value}),B("Task Updated successfully","success"),new Date(p.value)>=Date.now()&&p.classList.remove("text-red-600")});const v=o.querySelector(`.status-select-${n._id}`);return await Vh(v,n.status),v.addEventListener("change",async E=>{await S.updateTask(n._id,{status:E.target.value}),E.preventDefault()}),o}async function Vh(n,e){(await q.getProjectById(localStorage.getItem("selectedProject"))).result.columns.forEach(r=>{const s=document.createElement("option");s.className="font-semibold",s.innerText=r,s.value=r,r===e&&(s.selected=!0),n.appendChild(s)})}function bn(n,e,t){e.forEach(r=>{r.classList.add("cursor-grab"),r.setAttribute("draggable","true"),r.addEventListener("dragstart",s=>{s.dataTransfer.setData("taskId",r.dataset.id),t?s.dataTransfer.setData("sprint",JSON.stringify(t)):s.dataTransfer.setData("sprint",JSON.stringify("")),s.dataTransfer.effectAllowed="move",r.classList.remove("cursor-grab"),r.classList.add("cursor-grabbing")}),r.addEventListener("dragend",()=>{r.classList.remove("cursor-grabbing"),r.classList.add("cursor-grab")}),n.append(r)})}async function oi(n,e,t,r,s){n.preventDefault();const i=n.dataTransfer.getData("taskId"),a=JSON.parse(n.dataTransfer.getData("sprint")),l=r?"backlog":a.key;if(e.querySelector(`[data-id="${i}"]`))return;document.querySelector(`.backlog table [data-id="${i}"]`).remove();const c=await S.getTaskById(i);let u;t==="kanban"?(u=r?await Ye(c.data.result,"backlog",t,""):await Ye(c.data.result,"","kanban",s),bn(e,[u],"")):(u=r?await Ye(c.data.result,"backlog",t,""):await Ye(c.data.result,"","",s),bn(e,[u],s)),e.querySelector(`#${l}-body`)?e.querySelector(`#${l}-body`).appendChild(u):e.querySelector(`#${s.key}-body`).appendChild(u),r?le.removeTaskFromSprint(a._id,{task:i}).catch(d=>{console.error("Failed to update sprint tasks",d)}):a?(le.removeTaskFromSprint(a._id,{task:i}).catch(d=>{console.error("Failed to update sprint tasks",d)}),le.addTasksToSprint(s._id,{tasks:[i]}).catch(d=>{console.error("Failed to update sprint tasks",d)})):le.addTasksToSprint(s._id,{tasks:[i]}).catch(d=>{console.error("Failed to update sprint tasks",d)}),vn()}function li(n){let e="";n==="kanban"&&(e="hidden");const t=document.createElement("div");return t.className=" p-1 rounded-t",t.innerHTML=`
    <div
      class="xs:justify-between xs:items-center relative flex flex-wrap rounded-md border border-gray-200 bg-gray-50 p-2 text-left shadow-sm"
    >
      <div class="flex flex-1 items-center justify-start">
        <button
          type="button"
          class="flex w-full cursor-pointer items-center gap-3 rounded-md font-semibold focus:outline-none md:w-full"
          id="dropdownButton-backlog"
          aria-expanded="false"
          aria-haspopup="true"
        >
          <svg
            id="dropdown-icon-backlog"
            class="dropdown-icon-backlog mt-1 h-4 w-4"
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 20 20"
            stroke="currentColor"
            aria-hidden="true"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M5 7l7 7 7-7"
            ></path>
          </svg>
          Backlog
        </button>
      </div>

      <div class="flex items-center gap-1 md:gap-2">
        <form
          class="xs:mt-0 xs:pl-0 mt-2 flex hidden h-7.5 gap-1 pl-4 md:justify-end"
          id="sprint-creation-form"
        >
          <input
            type="number"
            id="sprint-sp-input"
            aria-describedby="helper-text-explanation"
            class="focus:border-primary-400 block w-23 rounded-sm border border-gray-300 pl-2 shadow-xs outline-none placeholder:text-gray-500 md:w-30"
            placeholder="story point"
            required
          />
          <button
            type="submit"
            id="sprint-form-button"
            class="bg-primary-400 hover:bg-primary-500 w-20 cursor-pointer rounded-sm px-2 py-1 text-sm font-medium text-white shadow-xs focus:outline-none"
          >
            Confirm
          </button>
          <svg
            id="sprint-close-svg"
            class="cursor-pointer stroke-black hover:stroke-red-400 hover:stroke-2"
            viewBox="0 0 24 24"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
            <g
              id="SVGRepo_tracerCarrier"
              stroke-linecap="round"
              stroke-linejoin="round"
            ></g>
            <g id="SVGRepo_iconCarrier">
              <path
                d="M16 8L8 16M8.00001 8L16 16"
                stroke="inherit"
                stroke-width="1.5"
                stroke-linecap="round"
                stroke-linejoin="round"
              ></path>
            </g>
          </svg>
        </form>
        <button
          type="button"
          id="add-to-sprint-button"
          title="Add to sprint"
          class="my-1 hidden cursor-pointer rounded-sm border border-gray-200 bg-white p-1 text-gray-900 focus:outline-none"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 24 24"
            stroke-width="1.5"
            stroke="currentColor"
            class="size-5"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M12 4.5v15m7.5-7.5h-15"
            />
          </svg>
        </button>

        <div
          id="sprints-dropdown"
          class="xs:right-4 xs:left-auto absolute top-full left-4 z-40 hidden w-35 list-none rounded-sm border border-gray-200 bg-white shadow-lg sm:w-40"
        ></div>
        <button
          type="button"
          id="create-sprint-button"
          class="${e} bg-primary-400 hover:bg-primary-500 w-max cursor-pointer rounded-sm px-2 py-1 font-medium text-white shadow-xs focus:outline-none"
        >
          <p id="create-sprint-text">Create Sprint</p>
        </button>
      </div>
    </div>

    <div
      class="dropdown-menu-backlog no-scrollbar relative my-2 overflow-x-auto rounded-md border border-gray-200"
    >
      <table class="w-full text-left rtl:text-right">
        <thead
          class="border-b border-l-3 border-gray-200 border-l-gray-100 bg-gray-100 text-xs text-nowrap uppercase hover:border-l-gray-200 hover:bg-gray-200"
        >
          <tr>
            <th scope="col" class="${e} p-2">
              <div class="flex items-center">
                <input
                  id="backlog-checkbox-all"
                  type="checkbox"
                  class="text-primary-600 bg-primary-100 border-primary-300 accent-primary-500 focus:ring-primary-600 m-auto h-3.5 w-3.5 rounded-sm"
                />
              </div>
            </th>
            <th scope="col" class="p-2 text-center">Type</th>
            <th scope="col" class="p-2">Key</th>
            <th scope="col" class="min-w-48 p-2">Summary</th>
            <th scope="col" class="min-w-14 p-2">Status</th>
            <th scope="col" class="min-w-48 p-2">Assignee</th>
            <th scope="col" class="p-2">Due Date</th>
            <th scope="col" class="min-w-36 p-2">Labels</th>
            <th scope="col" class="p-2">Created</th>
            <th scope="col" class="p-2">Updated</th>
            <th scope="col" class="min-w-36 p-2">Reporter</th>
            <th scope="col" class="min-w-px p-2"></th>
          </tr>
        </thead>
        <tbody id="backlog-body" data-id="backlog"></tbody>
      </table>
    </div>
    <div
      class="empty-message flex hidden w-full justify-center rounded-md bg-white/80 p-4 text-center text-lg font-bold text-gray-400 backdrop:blur-lg"
      id="backlog-empty-message"
      data-id="backlog"
    >
      <p class="hover:text-primary-400 cursor-pointer">
        No task found, click here to create one
      </p>
    </div>

    <div class="flex w-full justify-center" id="backlog-loader">
      <svg viewBox="25 25 50 50" class="loader">
        <circle r="20" cy="50" cx="50"></circle>
      </svg>
    </div>
  `,t}async function jh(n,e,t,r){let s=[];for(const l of e){const o=await S.getTaskById(l);o.data.result.status!==r.columns[r.columns.length-1]&&s.push(Ye(o.data.result,"backlog",r.projectType,null))}const i=document.getElementById("backlog-loader");n.classList.add("hidden");const a=await Promise.all(s);i.classList.add("hidden"),n.classList.remove("hidden"),a.forEach(l=>{const o=l.querySelector(".checkboxes");o.addEventListener("change",()=>{o.checked&&t.classList.contains("hidden")&&Y(t)})}),bn(n,a,""),vn()}function ci(n){document.getElementById("backlog-body").querySelectorAll(".checkboxes").forEach(t=>{t.checked=n})}function Wh(){document.querySelector("#backlog-empty-message p").addEventListener("click",()=>{ts()})}const Hh=document.getElementById("table-body"),Kt=document.getElementById("sprint-backlog-wrapper");async function mt(n,e="",t=""){Hh.innerHTML="",Kt.innerHTML="";const r=await S.getTaskByProjectId(n,e,t),s=await q.getProjectById(n),i=await le.getAllSprints(n),a=r.data.result,l=new Set;a.forEach(g=>{g.subTask&&g.subTask.length&&g.subTask.forEach(F=>l.add(F))});const c=a.filter(g=>!l.has(g._id)).map(g=>g._id);Cr(s.result);const u=[];i.result.forEach(g=>u.push(...g.tasks));const h=c.filter(g=>!u.includes(g)).map(g=>a.find(F=>F._id===g)).filter(g=>g&&!g.parentTask&&g.status!==s.result.columns[s.result.columns.length-1]).map(g=>g._id),f=i.result.filter(g=>!g.isCompleted);f.forEach(async g=>{const F=wd(g);Kt.append(F);const se=[];if(g.tasks.forEach(Q=>se.push(Q)),ss(g),se.length?(document.getElementById(`${g.key}-empty-message`).classList.add("hidden"),s.result.projectType==="kanban"?await Ys(g,se,"kanban"):await Ys(g,se,"")):(document.getElementById(`${g.key}-empty-message`).classList.remove("hidden"),document.getElementById(`${g.key}-loader`).classList.add("hidden")),F.addEventListener("dragover",Q=>Q.preventDefault()),F.addEventListener("drop",async Q=>{await oi(Q,F,s.result.projectType,!1,g)}),await bd(g),g.dueDate){Y(document.getElementById(`${g.key}-sprint-start-button`)),Y(document.getElementById(`${g.key}-sprint-complete-button`));const Q=document.getElementById(`${g.key}-sprint-complete-button`),Ke=document.getElementById(`${g.key}-due-date-preview`);Ke.innerText=new Date(g.dueDate).toLocaleDateString();const je=await q.updateProject(n,{currentSprint:g._id});Q.addEventListener("click",async Se=>{Se.preventDefault(),Hr("Are you sure you want to complete this sprint?",async()=>{await $a(g._id,je.result)})})}});let p;s.result.projectType==="kanban"?(p=li("kanban"),Kt.append(p)):(p=li(""),Kt.append(p)),ss(),p.addEventListener("dragover",g=>g.preventDefault()),p.addEventListener("drop",async g=>{await oi(g,p,"project.result.projectType",!0,"")});const b=document.getElementById("add-to-sprint-button"),v=document.getElementById("backlog-body");await jh(v,h,b,s.result),v.addEventListener("change",g=>{if(!g.target.classList.contains("checkboxes"))return;let F=!1;v.querySelectorAll(".checkboxes").forEach(se=>{se.checked&&(F=!0)}),F||Y(b)});const E=document.getElementById("create-sprint-button"),w=document.getElementById("sprint-creation-form"),z=document.getElementById("sprint-close-svg"),Z=document.getElementById("sprint-form-button"),N=document.getElementById("sprint-sp-input");function ee(){Y(E),Y(w)}E.addEventListener("click",ee),z.addEventListener("click",ee),Z.addEventListener("click",async g=>{g.preventDefault(),await kd(N)});const fe=document.getElementById("backlog-checkbox-all");fe.addEventListener("change",g=>{fe.checked?(ci(!0),b.classList.contains("hidden")&&Y(b)):(ci(!1),b.classList.contains("hidden")||Y(b)),g.stopPropagation()});const _=document.getElementById("sprints-dropdown");b.addEventListener("click",()=>{vd(f,_)}),document.addEventListener("click",g=>{_.contains(g.target)||b.contains(g.target)||(_.classList.contains("hidden")||Y(_),g.stopPropagation())}),document.querySelectorAll(".checkboxes").forEach(g=>{g.checked&&Y(b)}),Wh()}const ns=document.getElementById("create-project-modal"),Uh=document.getElementById("close-button"),zh=document.getElementById("project-form"),de=document.getElementById("project-columns-input-wrapper"),ae=document.getElementById("project-columns"),no=document.getElementById("name"),Zh=document.getElementById("createProjectForm");ae.addEventListener("input",()=>{if(!ae.value.endsWith(" "))return;if(ae.value===" "){ae.value="";return}const n=document.createElement("div");n.textContent=ae.value.slice(0,ae.value.length-1),n.className="bg-primary-400 flex items-center justify-center px-2 m-1 rounded-md text-white",de.insertBefore(n,ae),ae.value=""});ae.addEventListener("keydown",n=>{if(n.key==="Backspace"&&ae.value===""){if(!ae.previousElementSibling)return;de.querySelector(":nth-last-child(2)").remove()}});zh.addEventListener("submit",async n=>{n.preventDefault();const e=document.getElementById("projectType").value;let t=["todo","in-progress","done"];de.children.length>1&&(t=Array.from(de.children).slice(0,de.children.length-1).map(i=>{const a=i.textContent;return i.remove(),a}));const s={name:no.value.trim(),projectType:e,columns:t};try{const i=(await q.createProject(s)).result;localStorage.setItem("selectedProject",i._id),await W(localStorage.getItem("selectedProject")),xn(),ns.classList.add("hidden"),B("Project created Successfully","success"),Mn(),Bn()}catch(i){B(`${i.message}`,"error")}});Uh.addEventListener("click",()=>{ns.classList.add("hidden"),Zh.reset(),de.children.length>1&&Array.from(de.children).slice(0,de.children.length-1).forEach(n=>{n.remove()})});function ui(){ns.classList.remove("hidden")}function Yh(){document.querySelectorAll(".dropdownButton-template").forEach(e=>{e.addEventListener("click",t=>{const r=t.target;let s,i;r.classList.contains("dropdown-icon-template")?(s=r,i=r.parentElement.parentElement.nextElementSibling):(s=r.querySelector(".dropdown-icon-template"),i=r.parentElement.nextElementSibling),s.classList.contains("-rotate-90")?(s.classList.remove("-rotate-90"),i.classList.remove("hidden")):(s.classList.add("-rotate-90"),i.classList.add("hidden"))})})}function Gh(){document.querySelectorAll(".template").forEach(e=>{e.addEventListener("click",()=>{de.children.length>1&&Array.from(de.children).slice(0,de.children.length-1).forEach(r=>{r.remove()}),e.dataset.value.split(",").forEach(r=>{const s=document.createElement("div");s.textContent=r.trim(),s.className="bg-primary-400 flex items-center justify-center px-2 py-1 m-1 rounded-md text-white",de.insertBefore(s,ae)}),no.value=e.querySelector(".project-name").innerText})})}Gh();Yh();const Er=document.getElementById("statusDropdown"),Tr=document.getElementById("assigneeDropdown"),ve=localStorage.getItem("selectedProject");function ro(n){const e=document.createElement("div");return e.className=`px-4 py-2 hover:bg-gray-100 cursor-pointer ${n}-filter`,e.id=`${n}-filter`,e.innerHTML=`
    ${n.charAt(0).toUpperCase()+n.slice(1)}
  `,e}async function Jh(){if(!ve)return;un(Er),un(Tr),(await q.getProjectById(ve)).result.columns.forEach(e=>{const t=ro(e);Er.appendChild(t),t.addEventListener("click",async()=>{await W(ve,"status",`${e}`)})})}async function Qh(){if(!ve)return;un(Er),un(Tr),(await q.getProjectMembers(ve)).result.forEach(e=>{const t=ro(e.name);Tr.appendChild(t),t.addEventListener("click",async()=>{await W(ve,"assignee",`${e._id}`)})})}const Xh=document.getElementById("low-filter"),Kh=document.getElementById("medium-filter"),ef=document.getElementById("high-filter"),tf=document.getElementById("critical-filter"),nf=document.getElementById("remove-filter-btn"),rf=document.getElementById("filterBox"),so=document.getElementById("mainDropdown"),rs=document.querySelectorAll(".subDropdown");rf.addEventListener("click",n=>{n.stopPropagation(),so.classList.toggle("hidden"),rs.forEach(e=>e.classList.add("hidden"))});document.querySelectorAll(".dropdown-item").forEach(n=>{n.addEventListener("click",e=>{e.stopPropagation();const t=n.getAttribute("data-target");rs.forEach(r=>r.id!==t&&r.classList.add("hidden")),document.getElementById(t).classList.toggle("hidden")})});document.addEventListener("click",n=>{so.classList.add("hidden"),rs.forEach(e=>e.classList.add("hidden")),n.stopPropagation()});Xh.addEventListener("click",async()=>{await W(ve,"priority","low")});Kh.addEventListener("click",async()=>{await W(ve,"priority","medium")});ef.addEventListener("click",async()=>{await W(ve,"priority","high")});tf.addEventListener("click",async()=>{await W(ve,"priority","critical")});nf.addEventListener("click",async()=>{await W(ve)});let di=0;const sf=10;let Xn=!1,Kn=!0,er=null;function af(n){const e="=".repeat((4-n.length%4)%4),t=(n+e).replace(/-/g,"+").replace(/_/g,"/"),r=window.atob(t),s=new Uint8Array(r.length);for(let i=0;i<r.length;++i)s[i]=r.charCodeAt(i);return s}function io(n,e="render"){console.log("title",n.title),console.log("data passed to notification",n);const t=document.querySelector("#notificationDropdownMenu ul");if(!t)return;const r=document.getElementById("notificationListEmpty");t.length===0?r.classList.remove("hidden"):r.classList.add("hidden");const s=document.createElement("li");s.className=`
    dropdown-item notification-item flex cursor-pointer items-start px-4
  `,s.innerHTML=`
    <div
      class="flex items-start gap-2 bg-white p-2 transition hover:bg-gray-100"
    >
      <div class="relative shrink-0">
        ${n.image?`<img
            src="${$.API_BASE_URL}/uploads/profile/${n.image}"
            class="h-12 w-12 rounded-full object-cover ring-2 ring-gray-200"
          />`:`<img
            src="../../assets/img/profile.png"
            class="h-12 w-12 rounded-full object-cover ring-2 ring-gray-200"
          />`}
      </div>
      <div class="flex flex-col gap-1">
        <p class="text-sm leading-snug font-medium text-gray-900">
          ${n.title}
        </p>

        <span class="text-xs text-gray-500">
          ${y.fromISO(n.createdAt).toRelative()}
        </span>
      </div>
    </div>
  `,s.addEventListener("click",()=>{Ve(n.taskId)}),e==="new"?t.prepend(s):t.append(s),oo()}async function ao(){if(Xn||!Kn)return;Xn=!0;const n=localStorage.getItem("selectedProject");try{const e=await uf(n,{page:di,limit:sf});e.data.result.forEach(io),Kn=e.data.pagination.hasMore,Kn&&di++}catch(e){console.error("Error fetching notifications:",e)}finally{Xn=!1}}function of(){const n=document.getElementById("targetElement");er||(er=new IntersectionObserver(e=>{e[0].isIntersecting&&ao()},{root:null,threshold:.5}),er.observe(n))}function oo(){const n=document.getElementById("notificationBadge");if(!n)return;const e=parseInt(localStorage.getItem("notificationCount"),10)||0;e>0?(n.textContent=e>6?"6+":e,n.classList.remove("hidden")):(n.textContent="",n.classList.add("hidden"))}function lf(){const n=(parseInt(localStorage.getItem("notificationCount"),10)||0)+1;localStorage.setItem("notificationCount",n),oo()}const Ge=document.getElementById("notificationBadge"),cf=document.getElementById("dropdownToggle");function lo(){Ge&&Ge.addEventListener("click",()=>{localStorage.setItem("notificationCount",0),Ge.textContent="0",Ge.classList.add("hidden")})}Ge.addEventListener("click",lo);cf.addEventListener("click",()=>{localStorage.setItem("notificationCount",0),Ge.textContent="0",Ge.classList.add("hidden")});lo();const At=he.create({baseURL:$.API_BASE_URL+"/notification/"});At.interceptors.request.use(function(n){const e=localStorage.getItem("access_token");return e&&(n.headers.Authorization=`Bearer ${e}`),n},function(n){console.error(n)});At.interceptors.response.use(n=>n,async n=>{const e=n.config;if(n.response&&n.response.status===401&&!e._retry){e._retry=!0;try{const t=await he.get($.API_BASE_URL+"/auth/refresh-token",{headers:{Authorization:"Bearer "+localStorage.getItem("refresh_token")}});if(t)return localStorage.setItem("access_token",t.data.accessToken),localStorage.setItem("refresh_token",t.data.refreshToken),e.headers.Authorization=`Bearer ${t.data.accessToken}`,At(e)}catch(t){console.error(t),localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),window.location.reload()}}return Promise.reject(n)});function uf(n,{page:e,limit:t}){return At.get(`get/${n}?page=${e}&limit=${t}`)}const df="BBxyBixxdLHGQaKCZSYguTcuFmIW9tyQQnMKOsZcQxgwjBFsHRWbSXMK2aiqQqOWkCriNtu6mDnRljyFzss8kOU";async function hf(){if("serviceWorker"in navigator&&"PushManager"in window)try{const n=await navigator.serviceWorker.register("/serviceWorker.js");if(console.log("service worker registered"),await Notification.requestPermission()!=="granted"){console.warn("Notification permission denied");return}let t=await n.pushManager.getSubscription();console.log("subscription",t),t||(t=await n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:af(df)}));const r=localStorage.getItem("userEmail");At.post("subscribe",{email:r,subscription:t});const s=new BroadcastChannel("sw-messages");return s.onmessage=i=>{const{type:a,payload:l}=i.data;a==="PUSH_NOTIFICATION"&&(io(l,"new"),lf())},t}catch(n){console.error("Push setup failed:",n)}}async function ff(){Aa(),await Dd(),document.getElementById("plus-icon").addEventListener("click",ui),document.getElementById("create-task").addEventListener("click",()=>ts()),localStorage.setItem("selectedTab","board");const t=document.getElementById("search-input-form"),r=document.getElementById("backlog-li"),s=document.getElementById("backlog-view");r.addEventListener("click",async()=>{$n(r),Nn(s),localStorage.setItem("selectedTab","backlog"),t.classList.add("hidden"),await mt(localStorage.getItem("selectedProject"))});const i=document.getElementById("board-li"),a=document.getElementById("board-view");i.addEventListener("click",async()=>{$n(i),Nn(a),localStorage.setItem("selectedTab","board"),t.classList.remove("hidden"),await wr(localStorage.getItem("selectedProject"))});const l=document.getElementById("list-li"),o=document.getElementById("list-view");l.addEventListener("click",async()=>{$n(l),Nn(o),localStorage.setItem("selectedTab","list"),t.classList.remove("hidden"),await Va(localStorage.getItem("selectedProject"))}),document.querySelector("#no-project-text a").addEventListener("click",ui),hi(localStorage.getItem("theme")||"indigo"),xn(),Md(),Wd(),qt(localStorage.getItem("selectedProject")),Jh(),Qh(),wr(localStorage.getItem("selectedProject")),hf(),of(),ao(),Vr(),Ad(),Ft()}ff();
