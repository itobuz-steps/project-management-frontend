import"./main-DiITyB4b.js";import"./main-uUo-qxe4.js";import{s as g,b as e,a as u}from"./setTheme-XohNhFF_.js";const c=document.querySelector(".forgot-form"),a=document.getElementById("email-input"),t=document.getElementById("otp-input"),f=document.getElementById("password-input"),i=c.querySelector(".send"),o=c.querySelector(".reset-button");let m=!1,d=!1;t.disabled=!0;f.disabled=!0;g(localStorage.getItem("theme")||"indigo");i.addEventListener("click",async r=>{r.preventDefault();const s=a.value.trim();if(!s){e("Enter email.","info");return}a.disabled=!0,i.textContent="Sending...";try{await u.sendOtp(s),m=!0,i.textContent="Resend OTP",a.disabled=!1,t.disabled=!1,f.disabled=!1,e("OTP sent! Check email.","success")}catch(n){i.textContent="Send OTP",a.disabled=!1,e(n.message||"Failed to send OTP.","error")}});t.addEventListener("input",async()=>{const r=t.value.trim(),s=a.value.trim();if(!(d||r.length!==6)){e("Verifying...","info");try{t.disabled=!0,await u.verify(s,r),d=!0,t.disabled=!1,e("OTP verified! Enter new password.","success")}catch(n){d=!1,t.value="",t.disabled=!1,e(n.message||"Invalid OTP.","error")}}});c.addEventListener("submit",async r=>{r.preventDefault();const s=a.value.trim(),n=t.value.trim(),l=f.value;if(!m){e("Send OTP first.","info");return}if(!d){e("Verify OTP before resetting.","info");return}if(!s||!n||!l){e("All fields required.","info");return}if(l.length<6){e("Password must be 6+ characters.","info");return}o.textContent="Resetting...",o.disabled=!0;try{await u.forgetPasswordReset(s,n,l),e("Password reset successful! Redirecting...","success"),setTimeout(()=>{window.location.href="signup"},2e3)}catch(p){o.textContent="Reset Password",o.disabled=!1,e(p.message||"Failed to reset password.","error")}});
